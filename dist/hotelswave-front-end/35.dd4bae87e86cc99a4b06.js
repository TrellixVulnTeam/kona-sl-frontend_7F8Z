(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"3lWI":function(e,t,o){"use strict";o.r(t),o.d(t,"ROUTES",function(){return R}),o.d(t,"AssignRoleModule",function(){return E});var r=o("SVse"),n=o("/e7+"),i=o("4pzL"),s=o("uCM0"),a=o("8Y7J"),l=o("iInd"),c=o("EApP"),d=o("G0yt"),m=o("s7LF"),p=o("ijA0"),u=o("jgEc"),b=o("pUrn"),g=o("HyRP"),f=o("W2O4"),h=o("UPO+"),y=function(){return(y=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function L(e,t){1&e&&(a.Qb(0,"small",15),a.Lc(1,"Employee required"),a.Pb())}function v(e,t){1&e&&(a.Qb(0,"small",15),a.Lc(1,"Designation required"),a.Pb())}function w(e,t){1&e&&(a.Qb(0,"small",15),a.Lc(1,"Company required"),a.Pb())}function S(e,t){1&e&&(a.Qb(0,"small",15),a.Lc(1,"Role required"),a.Pb())}function C(e,t){1&e&&(a.Qb(0,"small",15),a.Lc(1,"Password required"),a.Pb())}function P(e,t){if(1&e&&(a.Qb(0,"span",15),a.Lc(1),a.Pb()),2&e){var o=a.ec();a.zb(1),a.Nc(" ",o.getFormValidationErrors()," ")}}var Q=function(e,t,o){return{disabled:e,"btn-warning":t,"btn-success":o}},O=function(){function e(e,t,o,r,n,i,s,l,c){this.fb=e,this.calendar=t,this.employeeService=o,this.dataSource=r,this.organogramService=n,this.companyService=i,this.roleService=s,this.http=l,this.create=new a.n,this.edit=!1,this.mouseoverShifting=!1,this.dropdownList=[],this.selectedList=[],this.dropdownRoleList=[],this.selectedRoleList=[],this.dropdownOrgList=[],this.selectedOrgList=[],this.dropdownCompanyList=[],this.selectedCompanyList=[],c.spinners=!1,this.createForm()}return e.prototype.createForm=function(){this.form=this.fb.group({employee:["",m.w.required],designation:["",m.w.required],company:["",m.w.required],role:["",m.w.required],password:["",m.w.required]})},e.prototype.submit=function(){if(this.form.valid){if(this.edit){var e=y({id:this.userOrganogram.id},this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.edit=!1,this.form.reset(),this.createForm()}},e.prototype.getFormValidationErrors=function(){return""+this.getFormGroupValidationErrors(this.form)},e.prototype.getFormGroupValidationErrors=function(e){var t="";return Object.keys(e.controls).forEach(function(o){var r=e.get(o).errors;null!=r&&Object.keys(r).forEach(function(e){t+=o.split(/(?=[A-Z])/).join(" ")+" : "+e+"; "})}),t},e.prototype.getEmployeeList=function(){var e=this;try{this.http.get(this.dataSource.baseUrl+this.employeeService.listUrl,{headers:this.dataSource.getAuthorizationHeader()}).subscribe({next:function(t){var o=t.json();if(200===o.statusCode||201===o.statusCode){e.employeeList=o.content;for(var r=[],n=0;n<e.employeeList.length;n++){var i="";null!=e.employeeList[n].title&&""!==e.employeeList[n].title&&(i=i+e.employeeList[n].title+" "),null!=e.employeeList[n].firstName&&""!==e.employeeList[n].firstName&&(i=i+e.employeeList[n].firstName+" "),null!=e.employeeList[n].lastName&&""!==e.employeeList[n].lastName&&(i=i+e.employeeList[n].lastName+" "),r.push({id:e.employeeList[n].id,name:i+" (Phone: "+e.employeeList[n].phoneNo+")"})}e.dropdownList=r,e.selectedList=[]}},error:function(e){console.error("There was an error!",e)}})}catch(t){console.log(t)}},e.prototype.getOrgList=function(){var e=this;try{this.http.get(this.dataSource.baseUrl+this.organogramService.listUrl,{headers:this.dataSource.getAuthorizationHeader()}).subscribe({next:function(t){var o=t.json();if(200===o.statusCode||201===o.statusCode){e.orgList=o.content;for(var r=[],n=0;n<e.orgList.length;n++)r.push({id:e.orgList[n].id,name:e.orgList[n].designationName});e.dropdownOrgList=r,e.selectedOrgList=[]}},error:function(e){console.error("There was an error!",e)}})}catch(t){console.log(t)}},e.prototype.getCompanyList=function(){var e=this;try{this.http.get(this.dataSource.baseUrl+this.companyService.listUrl,{headers:this.dataSource.getAuthorizationHeader()}).subscribe({next:function(t){var o=t.json();if(200===o.statusCode||201===o.statusCode){e.companyList=o.content;for(var r=[],n=0;n<e.companyList.length;n++)r.push({id:e.companyList[n].id,name:e.companyList[n].name});e.dropdownCompanyList=r,e.selectedCompanyList=[]}},error:function(e){console.error("There was an error!",e)}})}catch(t){console.log(t)}},e.prototype.getRoleList=function(){var e=this;try{this.http.get(this.dataSource.baseUrl+this.roleService.listUrl,{headers:this.dataSource.getAuthorizationHeader()}).subscribe({next:function(t){var o=t.json();if(200===o.statusCode||201===o.statusCode){e.roleList=o.content;for(var r=[],n=0;n<e.roleList.length;n++)r.push({id:e.roleList[n].id,name:e.roleList[n].role});e.dropdownRoleList=r,e.selectedRoleList=[]}},error:function(e){console.error("There was an error!",e)}})}catch(t){console.log(t)}},e.prototype.ngOnInit=function(){this.dropdownSettings={singleSelection:!0,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.dropdownRoleSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.getEmployeeList(),this.getOrgList(),this.getCompanyList(),this.getRoleList()},e.\u0275fac=function(t){return new(t||e)(a.Lb(m.d),a.Lb(d.b),a.Lb(p.a),a.Lb(u.a),a.Lb(i.a),a.Lb(b.a),a.Lb(g.a),a.Lb(f.b),a.Lb(d.x))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-assign-role-form"]],inputs:{userOrganogram:"userOrganogram"},outputs:{create:"create"},decls:45,vars:32,consts:[[1,"container-fluid"],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],["for","employee"],[1,"required-indicator"],["id","employee","name","employee",3,"formControl","placeholder","settings","data","ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["id","designation","name","designation",3,"formControl","placeholder","settings","data","ngModel","ngModelChange"],["id","company","name","company",3,"formControl","placeholder","settings","data","ngModel","ngModelChange"],["id","role","name","role",3,"formControl","placeholder","settings","data","ngModel","ngModelChange"],["id","password","type","password","name","password","formControlName","password",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight",2,"padding-top","20px"],[3,"mouseenter"],["type","submit","type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[1,"text-danger"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"form",1),a.bc("ngSubmit",function(){return t.submit()}),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"label",4),a.Lc(5,"Employee Name "),a.Qb(6,"span",5),a.Lc(7,"*"),a.Pb(),a.Pb(),a.Qb(8,"ng-multiselect-dropdown",6),a.bc("ngModelChange",function(e){return t.selectedList=e}),a.Pb(),a.Jc(9,L,2,0,"small",7),a.Pb(),a.Qb(10,"div",3),a.Qb(11,"label",4),a.Lc(12,"Employee Designation "),a.Qb(13,"span",5),a.Lc(14,"*"),a.Pb(),a.Pb(),a.Qb(15,"ng-multiselect-dropdown",8),a.bc("ngModelChange",function(e){return t.selectedOrgList=e}),a.Pb(),a.Jc(16,v,2,0,"small",7),a.Pb(),a.Pb(),a.Qb(17,"div",2),a.Qb(18,"div",3),a.Qb(19,"label",4),a.Lc(20,"Employee Company "),a.Qb(21,"span",5),a.Lc(22,"*"),a.Pb(),a.Pb(),a.Qb(23,"ng-multiselect-dropdown",9),a.bc("ngModelChange",function(e){return t.selectedCompanyList=e}),a.Pb(),a.Jc(24,w,2,0,"small",7),a.Pb(),a.Qb(25,"div",3),a.Qb(26,"label",4),a.Lc(27,"Employee Role(s) "),a.Qb(28,"span",5),a.Lc(29,"*"),a.Pb(),a.Pb(),a.Qb(30,"ng-multiselect-dropdown",10),a.bc("ngModelChange",function(e){return t.selectedRoleList=e}),a.Pb(),a.Jc(31,S,2,0,"small",7),a.Pb(),a.Pb(),a.Qb(32,"div",2),a.Qb(33,"div",3),a.Qb(34,"label",4),a.Lc(35,"Employee Password "),a.Qb(36,"span",5),a.Lc(37,"*"),a.Pb(),a.Pb(),a.Mb(38,"input",11),a.Jc(39,C,2,0,"small",7),a.Pb(),a.Pb(),a.Qb(40,"div",12),a.Qb(41,"span",13),a.bc("mouseenter",function(){return t.mouseoverShifting=!0}),a.Qb(42,"button",14),a.Lc(43," Assign Organogram & Role "),a.Pb(),a.Pb(),a.Jc(44,P,2,1,"span",7),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(1),a.mc("formGroup",t.form),a.zb(7),a.mc("formControl",t.form.controls.employee)("placeholder","Select Employee")("settings",t.dropdownSettings)("data",t.dropdownList)("ngModel",t.selectedList),a.zb(1),a.mc("ngIf",(null==t.form.controls.employee.errors?null:t.form.controls.employee.errors.required)&&t.form.controls.employee.dirty),a.zb(6),a.mc("formControl",t.form.controls.designation)("placeholder","Select Designation")("settings",t.dropdownSettings)("data",t.dropdownOrgList)("ngModel",t.selectedOrgList),a.zb(1),a.mc("ngIf",(null==t.form.controls.designation.errors?null:t.form.controls.designation.errors.required)&&t.form.controls.designation.dirty),a.zb(7),a.mc("formControl",t.form.controls.company)("placeholder","Select Company")("settings",t.dropdownSettings)("data",t.dropdownCompanyList)("ngModel",t.selectedCompanyList),a.zb(1),a.mc("ngIf",(null==t.form.controls.company.errors?null:t.form.controls.company.errors.required)&&t.form.controls.company.dirty),a.zb(6),a.mc("formControl",t.form.controls.role)("placeholder","Select Role(s)")("settings",t.dropdownRoleSettings)("data",t.dropdownRoleList)("ngModel",t.selectedRoleList),a.zb(1),a.mc("ngIf",(null==t.form.controls.role.errors?null:t.form.controls.role.errors.required)&&t.form.controls.role.dirty),a.zb(8),a.mc("ngIf",(null==t.form.controls.password.errors?null:t.form.controls.password.errors.required)&&t.form.controls.password.dirty),a.zb(3),a.mc("ngClass",a.sc(28,Q,t.form.invalid,t.edit,!t.edit)),a.zb(2),a.mc("ngIf",t.mouseoverShifting))},directives:[m.y,m.o,m.h,h.a,m.n,m.f,r.p,m.b,m.g,r.n],styles:[""]}),e}();function N(e,t){if(1&e){var o=a.Rb();a.Qb(0,"app-assign-role-form",7),a.bc("create",function(e){return a.Ac(o),a.ec().onCreate(e)}),a.Pb()}if(2&e){var r=a.ec();a.mc("userOrganogram",r.userOrganogram)}}var z=function(){function e(e,t,o,r){this.organogramService=e,this.utilService=t,this.activeRoute=o,this.toastrService=r,this.activeNav=1,this.id=o.snapshot.params.id}return e.prototype.ngOnInit=function(){},e.prototype.onCreate=function(e){var t=this;e.organogramId=e.designation[0].id,e.companyId=e.company[0].id,e.employeeId=e.employee[0].id,e.roles=[];for(var o=0;o<e.role.length;o++){var r=new s.a;r.id=e.role[o].id,r.role=e.role[o].name,e.roles.push(r)}return this.organogramService.assignOrgRoleToEmployee(e).subscribe(function(e){e.statusCode<400?t.toastrService.success(e.message,"Success"):t.toastrService.error(e.message,"Error")})},e.\u0275fac=function(t){return new(t||e)(a.Lb(i.a),a.Lb(n.a),a.Lb(l.a),a.Lb(c.b))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-add"]],decls:8,vars:3,consts:[[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[3,"userOrganogram","create"]],template:function(e,t){if(1&e&&(a.Qb(0,"div",0),a.Qb(1,"ul",1,2),a.bc("activeIdChange",function(e){return t.activeNav=e}),a.Qb(3,"li",3),a.Qb(4,"a",4),a.Lc(5,"Create"),a.Pb(),a.Jc(6,N,1,1,"ng-template",5),a.Pb(),a.Pb(),a.Mb(7,"div",6),a.Pb()),2&e){var o=a.xc(2);a.zb(1),a.mc("activeId",t.activeNav),a.zb(2),a.mc("ngbNavItem",1),a.zb(4),a.mc("ngbNavOutlet",o)}},directives:[d.n,d.p,d.q,d.o,d.s,O],styles:[""]}),e}(),I=o("KZX/"),R=[{path:"add",component:z}],E=function(){function e(){}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},imports:[[r.c,m.u,l.d.forChild(R),I.a,h.b]]}),e}()}}]);