(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{ebPK:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return O}),n.d(t,"MenuPermissionModule",function(){return z});var r=n("SVse"),o=n("HyRP"),i=n("8Y7J"),s=n("iInd"),c=n("EApP"),a=n("G0yt"),l=n("s7LF"),u=n("jgEc"),b=n("Qttl"),d=n("W2O4"),m=n("UPO+"),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function f(e,t){1&e&&(i.Qb(0,"small",13),i.Lc(1,"Role required"),i.Pb())}function h(e,t){1&e&&(i.Qb(0,"small",13),i.Lc(1,"Menu(s) required"),i.Pb())}function g(e,t){if(1&e&&(i.Qb(0,"span",13),i.Lc(1),i.Pb()),2&e){var n=i.ec();i.zb(1),i.Nc(" ",n.getFormValidationErrors()," ")}}var v=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},P=function(){function e(e,t,n,r,o,s,c){this.fb=e,this.calendar=t,this.dataSource=n,this.menuService=r,this.roleService=o,this.http=s,this.create=new i.n,this.edit=!1,this.mouseoverShifting=!1,this.dropdownRoleList=[],this.selectedRoleList=[],this.dropdownMenus=[],this.selectedMenuList=[],c.spinners=!1,this.createForm()}return e.prototype.createForm=function(){this.form=this.fb.group({role:["",l.w.required],menus:["",l.w.required]})},e.prototype.submit=function(){if(this.form.valid){if(this.edit){var e=p({id:this.menuPermission.id},this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.edit=!1,this.form.reset(),this.createForm()}},e.prototype.getFormValidationErrors=function(){return""+this.getFormGroupValidationErrors(this.form)},e.prototype.getFormGroupValidationErrors=function(e){var t="";return Object.keys(e.controls).forEach(function(n){var r=e.get(n).errors;null!=r&&Object.keys(r).forEach(function(e){t+=n.split(/(?=[A-Z])/).join(" ")+" : "+e+"; "})}),t},e.prototype.getMenuList=function(){var e=this;try{this.http.get(this.dataSource.baseUrl+this.menuService.listUrl,{headers:this.dataSource.getAuthorizationHeader()}).subscribe({next:function(t){var n=t.json();if(200===n.statusCode||201===n.statusCode){e.menuList=n.content;for(var r=[],o=0;o<e.menuList.length;o++)r.push({id:e.menuList[o].id,name:e.menuList[o].menuName});e.dropdownMenus=r,e.selectedMenuList=[]}},error:function(e){console.error("There was an error!",e)}})}catch(t){console.log(t)}},e.prototype.getRoleList=function(){var e=this;try{this.http.get(this.dataSource.baseUrl+this.roleService.listUrl,{headers:this.dataSource.getAuthorizationHeader()}).subscribe({next:function(t){var n=t.json();if(200===n.statusCode||201===n.statusCode){e.roleList=n.content;for(var r=[],o=0;o<e.roleList.length;o++)r.push({id:e.roleList[o].id,name:e.roleList[o].role});e.dropdownRoleList=r,e.selectedRoleList=[]}},error:function(e){console.error("There was an error!",e)}})}catch(t){console.log(t)}},e.prototype.ngOnInit=function(){this.dropdownSettings={singleSelection:!0,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.dropdownMenuSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.getMenuList(),this.getRoleList()},e.\u0275fac=function(t){return new(t||e)(i.Lb(l.d),i.Lb(a.b),i.Lb(u.a),i.Lb(b.a),i.Lb(o.a),i.Lb(d.b),i.Lb(a.x))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-menu-permission-form"]],inputs:{menuPermission:"menuPermission"},outputs:{create:"create"},decls:22,vars:18,consts:[[1,"container-fluid"],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],["for","role"],[1,"required-indicator"],["id","role","name","role",3,"formControl","placeholder","settings","data","ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["for","menus"],["id","menus","name","menus","formControlName","menus",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"d-flex","flex-row-reverse","bd-highlight",2,"padding-top","20px"],[3,"mouseenter"],["type","submit","type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[1,"text-danger"]],template:function(e,t){1&e&&(i.Qb(0,"div",0),i.Qb(1,"form",1),i.bc("ngSubmit",function(){return t.submit()}),i.Qb(2,"div",2),i.Qb(3,"div",3),i.Qb(4,"label",4),i.Lc(5,"Role "),i.Qb(6,"span",5),i.Lc(7,"*"),i.Pb(),i.Pb(),i.Qb(8,"ng-multiselect-dropdown",6),i.bc("ngModelChange",function(e){return t.selectedRoleList=e}),i.Pb(),i.Jc(9,f,2,0,"small",7),i.Pb(),i.Qb(10,"div",3),i.Qb(11,"label",8),i.Lc(12,"Menu(s) "),i.Qb(13,"span",5),i.Lc(14,"*"),i.Pb(),i.Pb(),i.Qb(15,"ng-multiselect-dropdown",9),i.bc("ngModelChange",function(e){return t.selectedMenuList=e}),i.Pb(),i.Jc(16,h,2,0,"small",7),i.Pb(),i.Pb(),i.Qb(17,"div",10),i.Qb(18,"span",11),i.bc("mouseenter",function(){return t.mouseoverShifting=!0}),i.Qb(19,"button",12),i.Lc(20," Submit "),i.Pb(),i.Pb(),i.Jc(21,g,2,1,"span",7),i.Pb(),i.Pb(),i.Pb()),2&e&&(i.zb(1),i.mc("formGroup",t.form),i.zb(7),i.mc("formControl",t.form.controls.role)("placeholder","Select Role(s)")("settings",t.dropdownSettings)("data",t.dropdownRoleList)("ngModel",t.selectedRoleList),i.zb(1),i.mc("ngIf",(null==t.form.controls.role.errors?null:t.form.controls.role.errors.required)&&t.form.controls.role.dirty),i.zb(6),i.mc("placeholder","Select Menu(s)")("settings",t.dropdownMenuSettings)("data",t.dropdownMenus)("ngModel",t.selectedMenuList),i.zb(1),i.mc("ngIf",(null==t.form.controls.menus.errors?null:t.form.controls.menus.errors.required)&&t.form.controls.menus.dirty),i.zb(3),i.mc("ngClass",i.sc(14,v,t.form.invalid,t.edit,!t.edit)),i.zb(2),i.mc("ngIf",t.mouseoverShifting))},directives:[l.y,l.o,l.h,m.a,l.n,l.f,r.p,l.g,r.n],styles:[""]}),e}(),L=n("XNiG"),Q=n("oTcB");function S(e,t){if(1&e){var n=i.Rb();i.Qb(0,"tr"),i.Qb(1,"td"),i.Lc(2),i.Pb(),i.Qb(3,"td"),i.Lc(4),i.Pb(),i.Qb(5,"td"),i.Lc(6),i.Pb(),i.Qb(7,"td"),i.Lc(8),i.Pb(),i.Qb(9,"td"),i.Lc(10),i.Pb(),i.Qb(11,"td"),i.Qb(12,"button",8),i.bc("click",function(){i.Ac(n);var e=t.$implicit;return i.ec().deletePermission(e.menuId,e.roleId)}),i.Mb(13,"i",9),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=t.$implicit;i.zb(2),i.Mc(r.roleName),i.zb(2),i.Mc(r.menuName),i.zb(2),i.Mc(r.url),i.zb(2),i.Mc(1==r.isParent?"Yes":"No"),i.zb(2),i.Mc(r.parentName)}}var M=function(){function e(e,t){this.restDataService=e,this.toastrService=t,this.dtOptions={},this.dtTrigger=new L.a}return e.prototype.ngOnInit=function(){this.dtOptions={pagingType:"full_numbers"},this.getCounterUserList()},e.prototype.getCounterUserList=function(){var e=this;this.restDataService.sendAuthenticateGetRequestObserver("api/v1/menus/menu-permission/list","").subscribe(function(t){e.responseModel=t,e.menuPermissions=e.responseModel.content,e.dtTrigger.next()})},e.prototype.deletePermission=function(e,t){var n=this;confirm("Are you sure to delete this menu permission?")&&this.restDataService.sendAuthenticatePutRequestObserver("api/v1/roles/revoke-permission/"+t+"/"+e,null,null).subscribe(function(e){n.responseModel=e,n.responseModel.statusCode<400?n.toastrService.success(n.responseModel.message,"Success"):n.toastrService.error(n.responseModel.message,"Error")})},e.\u0275fac=function(t){return new(t||e)(i.Lb(u.a),i.Lb(c.b))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-list"]],inputs:{menuPermissions:"menuPermissions"},decls:23,vars:3,consts:[["datatable","",1,"table","table-hover","table-responsive-sm","border",3,"dtOptions","dtTrigger"],[2,"background-color","#f8f9fa"],["colspan","6"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"pl-3"],[4,"ngFor","ngForOf"],[1,"btn-danger","btn",3,"click"],[1,"fa","fa-trash-o",2,"font-size","20px"]],template:function(e,t){1&e&&(i.Qb(0,"table",0),i.Qb(1,"thead"),i.Qb(2,"tr",1),i.Qb(3,"td",2),i.Qb(4,"div",3),i.Qb(5,"div",4),i.Qb(6,"h5",5),i.Lc(7,"List of Menu Permission"),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Qb(8,"tr"),i.Qb(9,"th",6),i.Lc(10,"Role Name"),i.Pb(),i.Qb(11,"th"),i.Lc(12,"Menu Name"),i.Pb(),i.Qb(13,"th"),i.Lc(14,"URL"),i.Pb(),i.Qb(15,"th"),i.Lc(16,"Is Parent"),i.Pb(),i.Qb(17,"th"),i.Lc(18,"Parent Name"),i.Pb(),i.Qb(19,"th"),i.Lc(20,"Action"),i.Pb(),i.Pb(),i.Pb(),i.Qb(21,"tbody"),i.Jc(22,S,14,5,"tr",7),i.Pb(),i.Pb()),2&e&&(i.mc("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),i.zb(22),i.mc("ngForOf",t.menuPermissions))},directives:[Q.a,r.o],styles:[""]}),e}();function w(e,t){if(1&e){var n=i.Rb();i.Qb(0,"app-menu-permission-form",7),i.bc("create",function(e){return i.Ac(n),i.ec().onCreate(e)}),i.Pb()}if(2&e){var r=i.ec();i.mc("menuPermission",r.menuPermission)}}function y(e,t){1&e&&(i.Ob(0),i.Mb(1,"app-list"),i.Nb())}var C=function(){function e(e,t,n){this.roleService=e,this.activeRoute=t,this.toastrService=n,this.activeNav=1,this.id=t.snapshot.params.id}return e.prototype.ngOnInit=function(){},e.prototype.onCreate=function(e){var t=this;return this.roleService.createMenuPermission(e).subscribe(function(e){e.statusCode<400?t.toastrService.success(e.message,"Success"):t.toastrService.error(e.message,"Error")})},e.\u0275fac=function(t){return new(t||e)(i.Lb(o.a),i.Lb(s.a),i.Lb(c.b))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-add"]],decls:12,vars:4,consts:[[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[3,"menuPermission","create"]],template:function(e,t){if(1&e&&(i.Qb(0,"div",0),i.Qb(1,"ul",1,2),i.bc("activeIdChange",function(e){return t.activeNav=e}),i.Qb(3,"li",3),i.Qb(4,"a",4),i.Lc(5,"Create"),i.Pb(),i.Jc(6,w,1,1,"ng-template",5),i.Pb(),i.Qb(7,"li",3),i.Qb(8,"a",4),i.Lc(9,"List"),i.Pb(),i.Jc(10,y,2,0,"ng-template",5),i.Pb(),i.Pb(),i.Mb(11,"div",6),i.Pb()),2&e){var n=i.xc(2);i.zb(1),i.mc("activeId",t.activeNav),i.zb(2),i.mc("ngbNavItem",1),i.zb(4),i.mc("ngbNavItem",2),i.zb(4),i.mc("ngbNavOutlet",n)}},directives:[a.n,a.p,a.q,a.o,a.s,P,M],styles:[""]}),e}(),N=n("KZX/"),O=[{path:"add",component:C}],z=function(){function e(){}return e.\u0275mod=i.Jb({type:e}),e.\u0275inj=i.Ib({factory:function(t){return new(t||e)},imports:[[r.c,l.u,s.d.forChild(O),N.a,m.b,Q.b]]}),e}()}}]);