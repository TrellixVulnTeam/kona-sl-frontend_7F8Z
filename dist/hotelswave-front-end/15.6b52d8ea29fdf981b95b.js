(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"3whx":function(e,t,o){"use strict";o.d(t,"a",function(){return c});var n=o("KZX/"),r=o("oTcB"),i=o("8Y7J"),c=function(){function e(){}return e.\u0275mod=i.Jb({type:e}),e.\u0275inj=i.Ib({factory:function(t){return new(t||e)},imports:[[n.a,r.b],n.a]}),e}()},wXy8:function(e,t,o){"use strict";o.r(t),o.d(t,"ROUTES",function(){return dn}),o.d(t,"AdminBookingModule",function(){return mn});var n=o("0sMf"),r=o("/e7+"),i=o("Sa+r"),c=function(){return function(e,t){this.room=t,this.date=e,this.discount=0,this.advance=0,this.commission=0}}(),a=o("jgEc"),s=o("LLt/"),l=o("/uGD"),b=o("yBZE"),u=o("G0yt"),d=o("8Y7J"),m=o("iInd"),f=o("EApP"),g=o("SVse"),h=o("/YPm"),p=o("53Co"),v=o("HF3I"),y=function(){return(y=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function P(e,t){if(1&e){var o=d.Rb();d.Qb(0,"span"),d.Qb(1,"button",15),d.bc("click",function(){d.Ac(o);var e=t.$implicit;return d.ec(2).onSelectCategory(e)}),d.Lc(2),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit,r=d.ec(2);d.zb(1),d.mc("ngClass",n==r.category?"btn-primary":"btn-outline-info"),d.zb(1),d.Nc(" ",n," ")}}var k=function(e,t){return{disabled:e,selected:t}};function Q(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",16),d.Qb(1,"div",17),d.bc("click",function(){d.Ac(o);var e=t.$implicit;return d.ec(2).onRoomSelect(e.id,e.available)}),d.Lc(2),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit;d.zb(1),d.mc("ngClass",d.rc(2,k,!n.available,n.selected)),d.zb(1),d.Nc(" ",n.roomNumber," ")}}function S(e,t){if(1&e&&(d.Ob(0),d.Qb(1,"div",10),d.Qb(2,"div",11),d.Qb(3,"h4"),d.Lc(4),d.Pb(),d.Pb(),d.Qb(5,"div",11),d.Jc(6,P,3,2,"span",12),d.Pb(),d.Pb(),d.Qb(7,"div",13),d.Jc(8,Q,3,5,"div",14),d.Pb(),d.Nb()),2&e){var o=d.ec();d.zb(4),d.Mc(o.hotel.name),d.zb(2),d.mc("ngForOf",o.categoryList),d.zb(2),d.mc("ngForOf",o.filteredRoomList)}}function M(e,t){if(1&e&&d.Mb(0,"loading",18),2&e){var o=d.ec();d.mc("message",o.message)}}var C=function(){function e(e,t){this.roomService=e,this.util=t,this.showHotels=new d.n,this.roomSelected=new d.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return e.prototype.ngOnInit=function(){this.setDateRanges(),this.hotel&&this.getAdminAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},e.prototype.ngOnChanges=function(e){var t=this;if(e.unSelect&&e.unSelect.currentValue&&this.roomList&&this.roomList.length>0){var o=this.roomList.find(function(e){return e.id===t.unSelect}),n=y(y({},o),{selected:!1});this.roomList.splice(this.roomList.findIndex(function(e){return e.id===t.unSelect}),1,n)}e.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.reload(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},e.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+90);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-60),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},e.prototype.selectedDate=function(e){this.daterange.checkinDate=e.start._d,this.daterange.checkoutDate=e.end._d,this.daterange.label=e.label,this.getAdminAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},e.prototype.reload=function(e,t,o){this.getAdminAvailableRoomList(e,t,o)},e.prototype.getAdminAvailableRoomList=function(e,t,o,n){return void 0===n&&(n=null),r=this,void 0,c=function(){var r,i,c=this;return function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(a){switch(a.label){case 0:return r=this.util.getDateString(t),i=this.util.getDateString(o),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getAdminAvailableRoomListByHotelId(e,r,i,n).subscribe(function(e){c.showRoomListLoading=!1,c.roomList=e,c.filteredRoomList=e,c.category="All",c.categoryList=["All"],c.roomList.forEach(function(e){c.categoryList.includes(e.category.name)||c.categoryList.push(e.category.name)})})];case 1:return a.sent(),[2]}})},new((i=void 0)||(i=Promise))(function(e,t){function o(e){try{a(c.next(e))}catch(o){t(o)}}function n(e){try{a(c.throw(e))}catch(o){t(o)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i(function(e){e(r)})).then(o,n)}a((c=c.apply(r,[])).next())});var r,i,c},e.prototype.onSelectCategory=function(e){this.category=e,this.filteredRoomList="All"===e?this.roomList:this.roomList.filter(function(t){return t.category.name===e})},e.prototype.onRoomSelect=function(e,t){if(t){var o=this.roomList.find(function(t){return t.id===e}),n=y({selected:!0},o);this.roomList.splice(this.roomList.findIndex(function(t){return t.id===e}),1,n);var r={room:n,checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};r.room.selected=!0,this.roomSelected.emit(r)}},e.prototype.onHotelList=function(){this.showHotels.emit(!0)},e.\u0275fac=function(t){return new(t||e)(d.Lb(b.a),d.Lb(r.a))},e.\u0275cmp=d.Fb({type:e,selectors:[["admin-available-room-list"]],inputs:{hotel:"hotel",unSelect:"unSelect",reloadRoomList:"reloadRoomList"},outputs:{showHotels:"showHotels",roomSelected:"roomSelected"},features:[d.xb],decls:12,vars:3,consts:[[1,"row"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"btn","btn-sm","btn-block","btn-info",3,"click"],[1,"row","mt-1"],[1,"col-12"],[4,"ngFor","ngForOf"],[1,"row","m-0","mb-3"],["class","col-md-2 col-3 p-0",4,"ngFor","ngForOf"],[1,"btn","btn-sm","mr-2","mb-2",3,"ngClass","click"],[1,"col-md-2","col-3","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(e,t){if(1&e&&(d.Qb(0,"div",0),d.Qb(1,"div",1),d.Qb(2,"div",2),d.Qb(3,"div",3),d.Qb(4,"div",4),d.Mb(5,"i",5),d.Pb(),d.Pb(),d.Qb(6,"input",6),d.bc("selected",function(e){return t.selectedDate(e)}),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Jc(7,S,9,3,"ng-container",7),d.Jc(8,M,1,1,"ng-template",null,8,d.Kc),d.Qb(10,"button",9),d.bc("click",function(){return t.onHotelList()}),d.Lc(11," <<< Back to hotel list\n"),d.Pb()),2&e){var o=d.xc(9);d.zb(6),d.mc("options",t.options),d.zb(1),d.mc("ngIf",!t.showRoomListLoading)("ngIfElse",o)}},directives:[p.b,g.p,g.o,g.n,v.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:5px;border:1px solid grey;border-radius:5px;text-align:center;margin:10px 10px 0 0}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}.selected[_ngcontent-%COMP%]{background-color:#90ee90;color:#fff}"]}),e}(),L=o("s7LF");function O(e,t){1&e&&(d.Qb(0,"small",12),d.Lc(1," Name required "),d.Pb())}function A(e,t){if(1&e&&(d.Qb(0,"small",12),d.Qb(1,"div",13),d.Lc(2," Phone number required "),d.Pb(),d.Qb(3,"div",13),d.Lc(4," Phone number format 01934953023 "),d.Pb(),d.Pb()),2&e){var o=d.ec();d.zb(1),d.mc("hidden",!o.form.controls.phoneNumber.errors.required),d.zb(2),d.mc("hidden",!o.form.controls.phoneNumber.errors.pattern)}}var D=function(e){return{disabled:e}},R=function(){function e(e){this.builder=e,this.user=new d.n}return e.prototype.ngOnInit=function(){this.createForm()},e.prototype.createForm=function(){this.form=this.builder.group({name:["",L.w.required],phoneNumber:["",[L.w.required,L.w.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},e.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},e.\u0275fac=function(t){return new(t||e)(d.Lb(L.d))},e.\u0275cmp=d.Fb({type:e,selectors:[["admin-user-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name",1,"col-form-label","col-form-label-sm"],["id","name","placeholder","Name","formControlName","name",1,"form-control","form-control-sm"],["class","text-danger",4,"ngIf"],["for","phone",1,"col-form-label","col-form-label-sm"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control","form-control-sm"],["for","email",1,"col-form-label","col-form-label-sm"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control","form-control-sm"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(e,t){1&e&&(d.Qb(0,"h4"),d.Lc(1,"User Info"),d.Pb(),d.Qb(2,"form",0),d.bc("ngSubmit",function(){return t.submit()}),d.Qb(3,"div",1),d.Qb(4,"div",2),d.Qb(5,"label",3),d.Lc(6,"Name *"),d.Pb(),d.Mb(7,"input",4),d.Jc(8,O,2,0,"small",5),d.Pb(),d.Qb(9,"div",2),d.Qb(10,"label",6),d.Lc(11,"Phone *"),d.Pb(),d.Mb(12,"input",7),d.Jc(13,A,5,2,"small",5),d.Pb(),d.Qb(14,"div",2),d.Qb(15,"label",8),d.Lc(16,"Email"),d.Pb(),d.Mb(17,"input",9),d.Pb(),d.Pb(),d.Qb(18,"div",10),d.Qb(19,"button",11),d.Lc(20," Submit "),d.Pb(),d.Pb(),d.Pb()),2&e&&(d.zb(2),d.mc("formGroup",t.form),d.zb(6),d.mc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),d.zb(5),d.mc("ngIf",t.form.controls.phoneNumber.errors&&t.form.controls.phoneNumber.touched),d.zb(6),d.mc("ngClass",d.qc(4,D,t.form.invalid)))},directives:[L.y,L.o,L.h,L.b,L.n,L.g,g.p,L.k,g.n],styles:[""]}),e}(),I=function(){return(I=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function w(e,t){if(1&e){var o=d.Rb();d.Qb(0,"admin-hotel-list",7),d.bc("hotel",function(e){return d.Ac(o),d.ec().onHotel(e)}),d.Pb()}}function x(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",8),d.Qb(1,"div",9),d.Qb(2,"div",10),d.Qb(3,"div",11),d.bc("click",function(){return d.Ac(o),d.xc(7).toggle()}),d.Qb(4,"div",12),d.Mb(5,"i",13),d.Pb(),d.Pb(),d.Qb(6,"input",14,15),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().dd=e})("dateSelect",function(){d.Ac(o);var e=d.ec();return e.getAdminBookingList(e.hotelId,e.dd)})("click",function(){return d.Ac(o),d.xc(7).toggle()}),d.Pb(),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec();d.zb(6),d.mc("ngModel",n.dd)("minDate",n.minDate)("maxDate",n.maxDate)}}function B(e,t){if(1&e&&(d.Qb(0,"div",16),d.Qb(1,"div",17),d.Qb(2,"h4"),d.Lc(3),d.Pb(),d.Pb(),d.Pb()),2&e){var o=d.ec();d.zb(3),d.Mc(o.hotel.name)}}var N=function(e,t,o,n,r){return{"bg-lightgray":e,"bg-yellow":t,"bg-reserved":o,"bg-red":n,"bg-white":r}};function z(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",18),d.Qb(1,"div",19),d.bc("click",function(){d.Ac(o);var e=t.$implicit,n=d.ec();return n.onRoomClick(e.id,e.bookingId,n.dd)}),d.Lc(2),d.Mb(3,"br"),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit;d.zb(1),d.mc("ngClass",d.uc(2,N,"ROOM_BLOCKED"===n.status,"ROOM_BOOKED"===n.status,"ROOM_RESERVED"===n.status,"ROOM_SOLD"===n.status,"ROOM_FREE"===n.status)),d.zb(1),d.Nc(" ",n.roomNumber," ")}}function T(e,t){1&e&&(d.Qb(0,"div",20),d.Qb(1,"div",21),d.Mb(2,"div",22),d.Lc(3," Blocked "),d.Pb(),d.Qb(4,"div",21),d.Mb(5,"div",23),d.Lc(6," Reserved "),d.Pb(),d.Qb(7,"div",21),d.Mb(8,"div",24),d.Lc(9," Sold "),d.Pb(),d.Qb(10,"div",21),d.Mb(11,"div",25),d.Lc(12," Free "),d.Pb(),d.Pb())}function E(e,t){if(1&e){var o=d.Rb();d.Qb(0,"button",26),d.bc("click",function(){return d.Ac(o),d.ec().onHotelList()}),d.Mb(1,"i",27),d.Lc(2," Back to hotel list\n"),d.Pb()}}var _=function(){function e(e){this.roomService=e,this.roomSelected=new d.n,this.loading=!1,this.showRoomList=!1}return e.prototype.ngOnChanges=function(e){e.reload&&this.dd&&this.getAdminBookingList(this.hotelId,this.dd)},e.prototype.ngOnInit=function(){var e=new Date;this.dd=null!=localStorage.getItem("selectedDate")?JSON.parse(localStorage.getItem("selectedDate")):{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.minDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()-60},this.maxDate={year:e.getFullYear(),month:e.getMonth()+4,day:e.getDate()},this.maxDate.month>12&&(this.maxDate.year+=1,this.maxDate.month-=12)},e.prototype.getAdminBookingList=function(e,t){return o=this,void 0,r=function(){var o=this;return function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,this.roomService.getAdminBookingList(e,this.makeDateString(t)).subscribe(function(e){o.roomList=e,o.loading=!1})];case 1:return n.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(e,t){function i(e){try{a(r.next(e))}catch(o){t(o)}}function c(e){try{a(r.throw(e))}catch(o){t(o)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n(function(e){e(o)})).then(i,c)}a((r=r.apply(o,[])).next())});var o,n,r},e.prototype.onRoomClick=function(e,t,o){if(t>0){localStorage.selectedDate=JSON.stringify(o);var n=this.roomList.find(function(t){return t.id===e});this.status=n.status;var r=I({date:o.year+"-"+(o.month+1)+"-"+o.day},n);this.roomSelected.emit(r)}},e.prototype.onHotel=function(e){this.hotelId=e.id,this.hotel=e,this.getAdminBookingList(e.id,this.dd),this.showRoomList=!0},e.prototype.onHotelList=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},e.prototype.makeDateString=function(e){return e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)},e.\u0275fac=function(t){return new(t||e)(d.Lb(b.a))},e.\u0275cmp=d.Fb({type:e,selectors:[["admin-room-status-date"]],inputs:{reload:"reload"},outputs:{roomSelected:"roomSelected"},features:[d.xb],decls:7,vars:6,consts:[[3,"hotel",4,"ngIf"],["class","row my-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","m-0","mb-3"],["class","col-md-2 col-3 p-0",4,"ngFor","ngForOf"],["class","row border m-0 py-2",4,"ngIf"],["class","btn btn-sm btn-info mt-1",3,"click",4,"ngIf"],[3,"hotel"],[1,"row","my-2"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"row"],[1,"col-12"],[1,"col-md-2","col-3","p-0"],[1,"room-map-box",3,"ngClass","click"],[1,"row","border","m-0","py-2"],[1,"col-3"],[1,"foo","bg-lightgray"],[1,"foo","bg-reserved"],[1,"foo","bg-red"],[1,"foo","bg-white"],[1,"btn","btn-sm","btn-info","mt-1",3,"click"],[1,"fa","fa-chevron-left"]],template:function(e,t){1&e&&(d.Jc(0,w,1,0,"admin-hotel-list",0),d.Jc(1,x,8,3,"div",1),d.Jc(2,B,4,1,"div",2),d.Qb(3,"div",3),d.Jc(4,z,4,8,"div",4),d.Pb(),d.Jc(5,T,13,0,"div",5),d.Jc(6,E,3,0,"button",6)),2&e&&(d.mc("ngIf",!t.showRoomList),d.zb(1),d.mc("ngIf",t.showRoomList),d.zb(1),d.mc("ngIf",t.showRoomList),d.zb(2),d.mc("ngForOf",t.roomList),d.zb(1),d.mc("ngIf",null==t.roomList?null:t.roomList.length),d.zb(1),d.mc("ngIf",t.showRoomList))},directives:[g.p,g.o,h.a,u.k,L.b,L.n,L.q,g.n],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin:10px 10px 0 0;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-reserved[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important;border-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important;border-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),e}(),F=o("Xtf6");function J(e,t){1&e&&(d.Qb(0,"th",13),d.Lc(1," Commission "),d.Pb())}function V(e,t){if(1&e){var o=d.Rb();d.Qb(0,"td"),d.Qb(1,"input",24),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().$implicit.commission=e}),d.Pb(),d.Pb()}if(2&e){var n=d.ec().$implicit;d.zb(1),d.mc("ngModel",n.commission)}}function G(e,t){if(1&e){var o=d.Rb();d.Qb(0,"tr"),d.Qb(1,"td"),d.Lc(2),d.fc(3,"date"),d.Pb(),d.Qb(4,"td"),d.Lc(5),d.Pb(),d.Qb(6,"td",17),d.Lc(7),d.Pb(),d.Qb(8,"td"),d.Qb(9,"input",22),d.bc("ngModelChange",function(e){return d.Ac(o),t.$implicit.discount=e})("keyup",function(){d.Ac(o);var e=t.index;return d.ec(2).updateSubBooking(e)}),d.Pb(),d.Pb(),d.Qb(10,"td",17),d.Lc(11),d.Pb(),d.Qb(12,"td",17),d.Qb(13,"input",23),d.bc("ngModelChange",function(e){return d.Ac(o),t.$implicit.advance=e})("keyup",function(){d.Ac(o);var e=t.index;return d.ec(2).updateSubBooking(e)}),d.Pb(),d.Pb(),d.Qb(14,"td",17),d.Lc(15),d.Pb(),d.Jc(16,V,2,1,"td",18),d.Pb()}if(2&e){var n=t.$implicit,r=d.ec(2);d.zb(2),d.Mc(d.gc(3,8,n.date)),d.zb(3),d.Mc("N/A"==n.room.roomNumber?n.room.category.name:n.room.roomNumber),d.zb(2),d.Mc(n.room.price),d.zb(2),d.mc("ngModel",n.discount),d.zb(2),d.Nc("",n.room.price-n.discount," BDT"),d.zb(2),d.mc("ngModel",n.advance),d.zb(2),d.Nc("",null==n?null:n.due," BDT"),d.zb(1),d.mc("ngIf",(null==r.refBy?null:r.refBy.length)>0)}}function H(e,t){1&e&&d.Mb(0,"td")}function q(e,t){1&e&&d.Mb(0,"td")}function j(e,t){1&e&&d.Mb(0,"td")}function $(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",1),d.Qb(1,"div",2),d.Mb(2,"div",3),d.Qb(3,"div",4),d.Qb(4,"h4"),d.Lc(5),d.Pb(),d.Pb(),d.Qb(6,"div",5),d.Qb(7,"div",2),d.Mb(8,"div",6),d.Qb(9,"div",7),d.Qb(10,"strong"),d.Lc(11),d.fc(12,"date"),d.Mb(13,"br"),d.Lc(14),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(15,"div",2),d.Qb(16,"div",8),d.Qb(17,"h3",9),d.Lc(18),d.Pb(),d.Lc(19),d.Mb(20,"br"),d.Lc(21),d.Pb(),d.Qb(22,"div",10),d.Qb(23,"Strong"),d.Lc(24,"Customer Info"),d.Pb(),d.Qb(25,"table"),d.Qb(26,"tr"),d.Qb(27,"td"),d.Lc(28,"Name :"),d.Pb(),d.Qb(29,"td"),d.Lc(30),d.Pb(),d.Pb(),d.Qb(31,"tr"),d.Qb(32,"td"),d.Lc(33,"Phone :"),d.Pb(),d.Qb(34,"td"),d.Lc(35),d.Pb(),d.Pb(),d.Qb(36,"tr"),d.Qb(37,"td"),d.Lc(38,"Email :"),d.Pb(),d.Qb(39,"td"),d.Lc(40),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(41,"div",2),d.Qb(42,"table",11),d.Qb(43,"thead"),d.Qb(44,"tr"),d.Qb(45,"th",12),d.Lc(46,"Date"),d.Pb(),d.Qb(47,"th",12),d.Lc(48,"Room number"),d.Pb(),d.Qb(49,"th",13),d.Lc(50,"Per night"),d.Pb(),d.Qb(51,"th",13),d.Lc(52,"Discount"),d.Pb(),d.Qb(53,"th",13),d.Lc(54,"Payable"),d.Pb(),d.Qb(55,"th",13),d.Lc(56,"Advance"),d.Pb(),d.Qb(57,"th",13),d.Lc(58,"Due"),d.Pb(),d.Jc(59,J,2,0,"th",14),d.Pb(),d.Pb(),d.Qb(60,"tbody"),d.Jc(61,G,17,10,"tr",15),d.Pb(),d.Qb(62,"tfoot"),d.Qb(63,"tr"),d.Qb(64,"th",16),d.Lc(65,"Total"),d.Pb(),d.Qb(66,"th",17),d.Lc(67),d.Pb(),d.Jc(68,H,1,0,"td",18),d.Pb(),d.Qb(69,"tr"),d.Qb(70,"th",16),d.Lc(71,"Total Advance"),d.Pb(),d.Qb(72,"th",17),d.Lc(73),d.Pb(),d.Jc(74,q,1,0,"td",18),d.Pb(),d.Qb(75,"tr"),d.Qb(76,"th",16),d.Lc(77,"Total due"),d.Pb(),d.Qb(78,"th",17),d.Lc(79),d.Pb(),d.Jc(80,j,1,0,"td",18),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(81,"div",19),d.Qb(82,"button",20),d.bc("click",function(){return d.Ac(o),d.ec().onConfirm()}),d.Lc(83," Confirm "),d.Pb(),d.Qb(84,"button",21),d.bc("click",function(){return d.Ac(o),d.ec().onCancel()}),d.Lc(85," Cancel "),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec();d.zb(5),d.Oc("","ROOM_SOLD"===(null==n.booking?null:n.booking.bookingStatus)?"Invoice":"Reservation"," # ",n.booking.id," "),d.zb(6),d.Nc(" Date: ",d.gc(12,18,null==n.booking?null:n.booking.created)," "),d.zb(3),d.Nc(" Booked by: ",null==n.booking||null==n.booking.createdBy?null:n.booking.createdBy.name,""),d.zb(4),d.Mc(null==n.booking?null:n.booking.hotels[0].name),d.zb(1),d.Nc(" ",null==n.booking?null:n.booking.hotels[0].phoneNumber," "),d.zb(2),d.Nc(" ",null==n.booking?null:n.booking.hotels[0].addressString," "),d.zb(9),d.Mc(null==n.booking||null==n.booking.user?null:n.booking.user.name),d.zb(5),d.Mc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),d.zb(5),d.Mc(null==n.booking||null==n.booking.user?null:n.booking.user.email),d.zb(19),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(2),d.mc("ngForOf",n.subBookings),d.zb(6),d.Nc("",null==n.booking?null:n.booking.total," BDT"),d.zb(1),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.Nc("",null==n.booking?null:n.booking.totalAdvance," BDT"),d.zb(1),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.Nc("",null==n.booking?null:n.booking.totalDue," BDT"),d.zb(1),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0)}}var U=function(){function e(){this.onBooking=new d.n,this.cancelBooking=new d.n,this.subBookings=[]}return e.prototype.ngOnChanges=function(e){e.booking.currentValue&&(this.subBookings=this.booking.subBookingList)},e.prototype.ngOnInit=function(){},e.prototype.updateSubBooking=function(e){var t=this.subBookings[e];t.payablePrice=t.room.price-t.discount,t.due=t.payablePrice-t.advance,this.updateBooking()},e.prototype.updateBooking=function(){var e=0,t=0,o=0;this.subBookings.forEach(function(n){e+=n.payablePrice,t+=n.advance,o+=n.due}),this.booking.total=e,this.booking.totalAdvance=t,this.booking.totalDue=o},e.prototype.onConfirm=function(){this.onBooking.emit(this.booking)},e.prototype.onCancel=function(){this.cancelBooking.emit(this.booking.id)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Fb({type:e,selectors:[["booking-form"]],inputs:{booking:"booking"},outputs:{onBooking:"onBooking",cancelBooking:"cancelBooking"},features:[d.xb],decls:1,vars:1,consts:[["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-md-4"],[1,"col-md-4","p-0","pt-3","text-center"],[1,"col-md-4","p-0"],[1,"col"],[1,"col-auto"],[1,"col-md-8","col-12","my-2","p-2"],[1,"hotel_name"],[1,"col-md-4","col-12","border","my-2","p-2"],[1,"table","mb-4","table-responsive-sm","mt-3","border"],[1,"table_head"],[1,"text-right","table_head"],["class","text-right table_head",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-right"],[1,"text-right"],[4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-success","btn-sm","mx-2",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","mx-2",3,"click"],["type","number","name","totalDiscount",1,"form-control","form-control-sm","text-right",3,"ngModel","ngModelChange","keyup"],["type","number","name","advance",1,"form-control","form-control-sm","text-right",3,"ngModel","ngModelChange","keyup"],["type","number","name","commission",1,"form-control","form-control-sm","text-right",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&d.Jc(0,$,86,20,"div",0),2&e&&d.mc("ngIf",t.booking)},directives:[g.p,g.o,L.s,L.b,L.n,L.q],pipes:[g.f],styles:[".btn-web[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]{color:#fff;background-color:#0e893f}.hotel-button-reverse[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]:hover{background-color:#f7a71a}.hotel-button-reverse[_ngcontent-%COMP%]{color:#fff}.hotel-button-reverse[_ngcontent-%COMP%]:hover{background-color:#0e893f}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.table_head[_ngcontent-%COMP%]{color:#fff;background-color:#0e893f;font-weight:300;font-size:16px;border:1px solid #0e893f}.form-control-sm[_ngcontent-%COMP%]{float:right;max-width:120px}"]}),e}(),K=function(){return(K=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Y=function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},W=function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function X(e,t){if(1&e){var o=d.Rb();d.Qb(0,"admin-hotel-list",15),d.bc("hotel",function(e){return d.Ac(o),d.ec(2).onHotel(e)}),d.Pb()}}function Z(e,t){if(1&e){var o=d.Rb();d.Qb(0,"admin-available-room-list",16),d.bc("showHotels",function(e){return d.Ac(o),d.ec(2).onShowHotels(e)})("roomSelected",function(e){return d.Ac(o),d.ec(2).onRoomSelect(e)}),d.Pb()}if(2&e){var n=d.ec(2);d.mc("hotel",n.hotel)("unSelect",n.unSelect)("reloadRoomList",n.reloadRoomList)}}function ee(e,t){if(1&e){var o=d.Rb();d.Qb(0,"a",19),d.bc("click",function(){return d.Ac(o),d.ec(3).onModeChange("Reserve")}),d.Lc(1,"Reserve"),d.Pb()}if(2&e){var n=d.ec(3);d.mc("ngClass","Reserve"==n.mode?"btn-primary":"btn-light")}}function te(e,t){1&e&&(d.Qb(0,"th",42),d.Lc(1," Ref. fee "),d.Pb())}function oe(e,t){if(1&e){var o=d.Rb();d.Qb(0,"input",57),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().$implicit.discount=e})("ngModelChange",function(){d.Ac(o);var e=d.ec().$implicit;return d.ec(4).updatePayable(e)}),d.Pb()}if(2&e){var n=d.ec().$implicit;d.mc("ngModel",n.discount)}}function ne(e,t){if(1&e){var o=d.Rb();d.Qb(0,"input",58),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().$implicit.discount=e})("ngModelChange",function(){d.Ac(o);var e=d.ec().$implicit;return d.ec(4).updatePayable(e)}),d.Pb()}if(2&e){var n=d.ec().$implicit;d.mc("ngModel",n.discount)}}function re(e,t){if(1&e){var o=d.Rb();d.Qb(0,"td"),d.Qb(1,"input",59),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().$implicit.commission=e}),d.Pb(),d.Pb()}if(2&e){var n=d.ec().$implicit;d.zb(1),d.mc("ngModel",n.commission)}}function ie(e,t){if(1&e){var o=d.Rb();d.Qb(0,"tr"),d.Qb(1,"td"),d.Lc(2),d.Pb(),d.Qb(3,"td"),d.Lc(4),d.Pb(),d.Qb(5,"td",42),d.Lc(6),d.Pb(),d.Qb(7,"td",43),d.Lc(8),d.Pb(),d.Qb(9,"td"),d.Jc(10,oe,1,1,"input",52),d.Jc(11,ne,1,1,"input",53),d.Pb(),d.Qb(12,"td",42),d.Lc(13),d.fc(14,"number"),d.Pb(),d.Qb(15,"td",43),d.Qb(16,"input",54),d.bc("ngModelChange",function(e){return d.Ac(o),t.$implicit.advance=e}),d.Pb(),d.Pb(),d.Qb(17,"td",43),d.Lc(18),d.Pb(),d.Jc(19,re,2,1,"td",39),d.Qb(20,"td"),d.Qb(21,"button",55),d.bc("click",function(){d.Ac(o);var e=t.index;return d.ec(4).onRemove(e)}),d.Mb(22,"i",56),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit,r=d.ec(4);d.zb(2),d.Mc(n.date),d.zb(2),d.Oc("",n.room.roomNumber," [",n.room.category.name,"]"),d.zb(2),d.Mc(n.room.price),d.zb(2),d.Nc("",n.room.vatService," %"),d.zb(2),d.mc("ngIf",!r.authService.hasRole("SERVICE_AGENT_HOTEL")&&!r.authService.hasRole("B2B_AGENT")&&!r.authService.hasRole("OFFICE_AGENT")),d.zb(1),d.mc("ngIf",r.authService.hasRole("SERVICE_AGENT_HOTEL")||r.authService.hasRole("B2B_AGENT")||r.authService.hasRole("OFFICE_AGENT")),d.zb(2),d.Nc(" ",d.hc(14,11,n.payablePrice,"1.1-2")," "),d.zb(3),d.mc("ngModel",n.advance),d.zb(2),d.Mc(null==n?null:n.due),d.zb(1),d.mc("ngIf",(null==r.refBy?null:r.refBy.length)>0)}}function ce(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",23),d.Qb(1,"input",60),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(4).booking.complementaryBreakfast=e}),d.Pb(),d.Qb(2,"label",61),d.Lc(3,"Complementary Breakfast"),d.Pb(),d.Pb()}if(2&e){var n=d.ec(4);d.zb(1),d.mc("ngModel",n.booking.complementaryBreakfast)}}function ae(e,t){1&e&&d.Mb(0,"td")}function se(e,t){1&e&&d.Mb(0,"td")}function le(e,t){1&e&&d.Mb(0,"td")}function be(e,t){1&e&&d.Mb(0,"td")}function ue(e,t){1&e&&d.Mb(0,"td")}function de(e,t){if(1&e){var o=d.Rb();d.Qb(0,"table",41),d.Qb(1,"thead"),d.Qb(2,"tr"),d.Qb(3,"th"),d.Lc(4,"Date"),d.Pb(),d.Qb(5,"th"),d.Lc(6,"Room No."),d.Pb(),d.Qb(7,"th",42),d.Lc(8,"Rent"),d.Pb(),d.Qb(9,"th",43),d.Lc(10,"Vat"),d.Pb(),d.Qb(11,"th",42),d.Lc(12,"Discount"),d.Pb(),d.Qb(13,"th",42),d.Lc(14,"Payable"),d.Pb(),d.Qb(15,"th",43),d.Lc(16,"Advance"),d.Pb(),d.Qb(17,"th",43),d.Lc(18,"Due"),d.Pb(),d.Jc(19,te,2,0,"th",44),d.Mb(20,"th"),d.Pb(),d.Pb(),d.Qb(21,"tbody"),d.Jc(22,ie,23,14,"tr",45),d.Pb(),d.Qb(23,"tfoot"),d.Qb(24,"tr"),d.Qb(25,"td",46),d.Jc(26,ce,4,1,"div",47),d.Pb(),d.Qb(27,"th",48),d.Lc(28,"Vat and Service Charge (%)"),d.Pb(),d.Qb(29,"th"),d.Qb(30,"input",49),d.bc("change",function(){return d.Ac(o),d.ec(3).getTotalPayable()})("ngModelChange",function(e){return d.Ac(o),d.ec(3).editedVatAndServiceCharge=e}),d.Pb(),d.Pb(),d.Qb(31,"th",46),d.Lc(32),d.Pb(),d.Mb(33,"td"),d.Jc(34,ae,1,0,"td",39),d.Pb(),d.Qb(35,"tr"),d.Qb(36,"th",50),d.Lc(37,"System Adjustment "),d.Pb(),d.Qb(38,"th",48),d.Lc(39),d.Pb(),d.Mb(40,"td"),d.Jc(41,se,1,0,"td",39),d.Pb(),d.Qb(42,"tr"),d.Qb(43,"th",50),d.Lc(44,"Total "),d.Pb(),d.Qb(45,"th",48),d.Lc(46),d.Pb(),d.Mb(47,"td"),d.Jc(48,le,1,0,"td",39),d.Pb(),d.Qb(49,"tr"),d.Qb(50,"th",50),d.Lc(51,"Total Advance"),d.Pb(),d.Qb(52,"th",48),d.Qb(53,"input",51),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(3).booking.totalAdvance=e})("ngModelChange",function(){return d.Ac(o),d.ec(3).updateSubAdvance()}),d.Pb(),d.Pb(),d.Mb(54,"td"),d.Jc(55,be,1,0,"td",39),d.Pb(),d.Qb(56,"tr"),d.Qb(57,"th",50),d.Lc(58,"Total due"),d.Pb(),d.Qb(59,"th",48),d.Lc(60),d.Pb(),d.Mb(61,"td"),d.Jc(62,ue,1,0,"td",39),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec(3);d.zb(19),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(3),d.mc("ngForOf",n.subBookings),d.zb(4),d.mc("ngIf",null==n.hotel||null==n.hotel.facilities?null:n.hotel.facilities.complementaryBreakfast),d.zb(4),d.mc("ngModel",n.editedVatAndServiceCharge),d.zb(2),d.Nc("",n.booking.totalVatService," BDT"),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.Nc("",n.systemAdjustment(null==n.booking?null:n.booking.total)," BDT"),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.Nc("",n.round(null==n.booking?null:n.booking.total)," BDT"),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.mc("ngModel",n.booking.totalAdvance),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.Nc("",n.getTotalDues()," BDT"),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0)}}function me(e,t){if(1&e&&(d.Qb(0,"option",71),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.methodName),d.zb(1),d.Nc(" ",o.methodName," ")}}function fe(e,t){if(1&e){var o=d.Rb();d.Ob(0),d.Qb(1,"h4"),d.Lc(2,"Payment Info"),d.Pb(),d.Qb(3,"div",62),d.Qb(4,"div",63),d.Qb(5,"label",64),d.Lc(6,"Payment Method"),d.Pb(),d.Qb(7,"select",65),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(3).paymentMethod=e}),d.Jc(8,me,2,2,"option",66),d.Pb(),d.Pb(),d.Qb(9,"div",63),d.Qb(10,"label",67),d.Lc(11,"Reference"),d.Pb(),d.Qb(12,"input",68),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(3).booking.paymentRef=e}),d.Pb(),d.Pb(),d.Qb(13,"div",63),d.Qb(14,"label",69),d.Lc(15,"Note"),d.Pb(),d.Qb(16,"input",70),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(3).booking.note=e}),d.Pb(),d.Pb(),d.Pb(),d.Nb()}if(2&e){var n=d.ec(3);d.zb(7),d.mc("ngModel",n.paymentMethod),d.zb(1),d.mc("ngForOf",n.paymentMethods),d.zb(4),d.mc("ngModel",n.booking.paymentRef),d.zb(4),d.mc("ngModel",n.booking.note)}}function ge(e,t){if(1&e){var o=d.Rb();d.Qb(0,"admin-user-form",72),d.bc("user",function(e){return d.Ac(o),d.ec(3).onCreateUser(e)}),d.Pb()}}function he(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",17),d.Qb(1,"div",18),d.Qb(2,"a",19),d.bc("click",function(){return d.Ac(o),d.ec(2).onModeChange("Sell")}),d.Lc(3,"Sell"),d.Pb(),d.Jc(4,ee,2,1,"a",20),d.Pb(),d.Qb(5,"h3",21),d.Lc(6,"New Booking"),d.Pb(),d.Qb(7,"div",22),d.Qb(8,"div",23),d.Qb(9,"input",24),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).sendHotelSMS=e}),d.Pb(),d.Qb(10,"label",25),d.Lc(11,"Send Hotel SMS"),d.Pb(),d.Pb(),d.Qb(12,"div",26),d.Qb(13,"input",27),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).sendCustomerSMS=e}),d.Pb(),d.Qb(14,"label",28),d.Lc(15,"Send Guest SMS"),d.Pb(),d.Pb(),d.Qb(16,"div",29),d.Qb(17,"input",30),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).changeSimilar=e}),d.Pb(),d.Qb(18,"label",31),d.Lc(19," Auto Change Similar Category "),d.Pb(),d.Pb(),d.Qb(20,"div",32),d.Qb(21,"div",33),d.Qb(22,"span",34),d.Lc(23,"Ref. By"),d.Pb(),d.Pb(),d.Qb(24,"input",35),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).refBy=e}),d.Pb(),d.Pb(),d.Pb(),d.Qb(25,"div",36),d.Qb(26,"div",37),d.Qb(27,"h5"),d.Lc(28,"Booking List"),d.Pb(),d.Pb(),d.Pb(),d.Jc(29,de,63,14,"table",38),d.Jc(30,fe,17,4,"ng-container",39),d.Jc(31,ge,1,0,"admin-user-form",40),d.Pb()}if(2&e){var n=d.ec(2);d.zb(2),d.mc("ngClass","Sell"==n.mode?"btn-primary":"btn-light"),d.zb(2),d.mc("ngIf",!(n.authService.hasRole("SERVICE_AGENT_HOTEL")||n.authService.hasRole("B2B_AGENT")||n.authService.hasRole("B2B_COUNTER")||n.authService.hasRole("OFFICE_AGENT"))),d.zb(5),d.mc("ngModel",n.sendHotelSMS),d.zb(4),d.mc("ngModel",n.sendCustomerSMS),d.zb(4),d.mc("ngModel",n.changeSimilar),d.zb(7),d.mc("ngModel",n.refBy),d.zb(5),d.mc("ngIf",!n.sendingInfo)("ngIfElse",n.sending),d.zb(1),d.mc("ngIf",!n.sendingInfo),d.zb(1),d.mc("ngIf",!n.sendingInfo)}}function pe(e,t){if(1&e&&(d.Qb(0,"div",10),d.Qb(1,"div",11),d.Jc(2,X,1,0,"admin-hotel-list",12),d.Jc(3,Z,1,3,"admin-available-room-list",13),d.Pb(),d.Jc(4,he,32,10,"div",14),d.Pb()),2&e){var o=d.ec();d.zb(2),d.mc("ngIf",!o.showRoomList),d.zb(1),d.mc("ngIf",o.showRoomList),d.zb(1),d.mc("ngIf",o.subBookings.length>0)}}function ve(e,t){if(1&e&&d.Mb(0,"booking-info",80),2&e){var o=d.ec(4);d.mc("booking",o.reservation)("systemShow",!0)}}function ye(e,t){if(1&e&&(d.Qb(0,"option",71),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.methodName),d.zb(1),d.Nc(" ",o.methodName," ")}}function Pe(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",85),d.Qb(1,"h4",86),d.Lc(2,"Cancel Booking"),d.Pb(),d.Qb(3,"button",87),d.bc("click",function(){return t.$implicit.dismiss("Cross click")}),d.Mb(4,"i",88),d.Pb(),d.Pb(),d.Qb(5,"div",89),d.Qb(6,"form"),d.Qb(7,"div",90),d.Qb(8,"label",91),d.Lc(9,"Cancel Fee *"),d.Pb(),d.Qb(10,"div",92),d.Qb(11,"input",93),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(5).cancelFee=e}),d.Pb(),d.Pb(),d.Pb(),d.Qb(12,"div",90),d.Qb(13,"label",94),d.Lc(14,"Payment Method *"),d.Pb(),d.Qb(15,"div",92),d.Qb(16,"select",95),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(5).paymentMethodCancelFee=e}),d.Jc(17,ye,2,2,"option",66),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(18,"div",96),d.Qb(19,"button",97),d.bc("click",function(){d.Ac(o);var e=t.$implicit,n=d.ec(5);return e.close(n.reservation.id)}),d.Lc(20,"Confirm"),d.Pb(),d.Pb()}if(2&e){var n=d.ec(5);d.zb(11),d.mc("ngModel",n.cancelFee),d.zb(5),d.mc("ngModel",n.paymentMethodCancelFee),d.zb(1),d.mc("ngForOf",n.paymentMethods)}}function ke(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",81),d.Qb(1,"a",82),d.Mb(2,"i",83),d.Lc(3," Print"),d.Pb(),d.Jc(4,Pe,21,3,"ng-template",null,84,d.Kc),d.Qb(6,"button",55),d.bc("click",function(){d.Ac(o);var e=d.xc(5);return d.ec(4).open(e)}),d.Lc(7,"Cancel Booking"),d.Pb(),d.Mb(8,"hr"),d.Pb()}if(2&e){var n=d.ec(4);d.zb(1),d.oc("routerLink","/dashboard/printTicket/",n.reservation.id,"")}}function Qe(e,t){if(1&e){var o=d.Rb();d.Qb(0,"booking-form",98),d.bc("onBooking",function(e){return d.Ac(o),d.ec(4).onConfirmRerservation(e)})("cancelBooking",function(e){return d.Ac(o),d.ec(4).onCancelRerservation(e)}),d.Pb()}if(2&e){var n=d.ec(4);d.mc("booking",n.reservation)}}var Se=function(e,t){return{"bg-danger":e,"bg-reserved":t}};function Me(e,t){if(1&e&&(d.Qb(0,"div",17),d.Qb(1,"div",76),d.Lc(2),d.Pb(),d.Jc(3,ve,1,2,"booking-info",77),d.Jc(4,ke,9,1,"div",78),d.Jc(5,Qe,1,1,"booking-form",79),d.Pb()),2&e){var o=d.ec(3);d.zb(1),d.mc("ngClass",d.rc(5,Se,"ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus),"ROOM_RESERVED"==(null==o.reservation?null:o.reservation.bookingStatus))),d.zb(1),d.Nc(" ","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus)?"Booking Details":"Reservation Details"," "),d.zb(1),d.mc("ngIf","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus)),d.zb(1),d.mc("ngIf","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus)),d.zb(1),d.mc("ngIf","ROOM_RESERVED"==(null==o.reservation?null:o.reservation.bookingStatus))}}function Ce(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",73),d.Qb(1,"div",74),d.Qb(2,"admin-room-status-date",75),d.bc("roomSelected",function(e){return d.Ac(o),d.ec(2).onRoomSelectFromRoomStatus(e)}),d.Pb(),d.Pb(),d.Jc(3,Me,6,8,"div",14),d.Pb()}if(2&e){var n=d.ec(2);d.zb(3),d.mc("ngIf",n.reservation)}}function Le(e,t){1&e&&(d.Qb(0,"li",5),d.Qb(1,"a",6),d.Lc(2,"Room status"),d.Pb(),d.Jc(3,Ce,4,1,"ng-template",7),d.Pb()),2&e&&d.mc("ngbNavItem",2)}var Oe=function(){function e(e,t,o,n,r,i,c,a,s){this.utilService=e,this.bookingService=t,this.roomService=o,this.dataSource=n,this.authService=r,this.userGlobal=i,this.router=c,this.modalService=a,this.toastrService=s,this.closeResult="",this.subBookings=[],this.reloadRoomList=!1,this.showRoomList=!1,this.sendingInfo=!1,this.changeSimilar=!0,this.sendCustomerSMS=!0,this.sendHotelSMS=!1,this.cancelFee=0,this.editedVatAndServiceCharge=0,this.message="",this.active=1,this.mode="Sell",this.paymentMethod="CASH",this.paymentMethodCancelFee="CASH"}return e.prototype.ngOnInit=function(){this.booking={total:0,totalAdvance:0,totalDue:0},this.getPaymentMethodList()},e.prototype.getPaymentMethodList=function(){var e=this;this.dataSource.sendAuthenticateGetRequestObserver("api/v1/payment-methods/list","").subscribe(function(t){e.responseModel=t,e.paymentMethods=e.responseModel.content})},e.prototype.round=function(e){if(e<=100)return e>=75?100:e>=50||e>=25?50:0;var t=e%100;return t<25?e-t:t<74?e-t+50:e-t+100},e.prototype.systemAdjustment=function(e){if(e<=100)return e>=75?(this.booking.systemAdjustment=e-75,"+ "+(e-75)):e>=50?(this.booking.systemAdjustment=-(e-50),"- "+(e-50)):e>=25?(this.booking.systemAdjustment=e-25,"+ "+(e-25)):(this.booking.systemAdjustment=-(25-e),"- "+(25-e));var t=e%100;return t<25?(this.booking.systemAdjustment=-t,"-"+t):t<=50?(this.booking.systemAdjustment=50-t,"+"+(50-t)):t<74?(this.booking.systemAdjustment=-(t-50),"-"+(t-50)):(this.booking.systemAdjustment=100-t,"+"+(100-t))},e.prototype.onHotel=function(e){this.subBookings=[],this.hotel=e,this.hotelId=e.id,this.showRoomList=!0,this.booking.complementaryBreakfast=!!this.hotel.facilities.complementaryBreakfast},e.prototype.onShowHotels=function(e){this.showRoomList=!e,this.subBookings=[],localStorage.removeItem("hotelId")},e.prototype.onRoomSelect=function(e){var t=this;this.utilService.getDatesBetween(e.checkInDate,e.checkOutDate).forEach(function(o){var n=new c(o,e.room);t.roomService.getRoomByDate(n.room.id,o).then(function(e){n.discount=e.onDateDiscount,n.payablePrice=n.room.price-n.discount,t.editedVatAndServiceCharge=n.room.vatService,t.isContain(n)||(t.subBookings.push(n),t.getTotalPayable(),t.subBookings.sort(t.utilService.dynamicSortObject("date")),t.subBookings.sort(t.utilService.dynamicSortObject("room.roomNumber")))})})},e.prototype.onModeChange=function(e){this.mode=e},e.prototype.onCreateUser=function(e){var t=K({id:0},e);this.createBooking(t)},e.prototype.createBooking=function(e){var t=this,o=new i.a(e,this.subBookings),n=K({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue,refBy:this.refBy,complementaryBreakfast:this.booking.complementaryBreakfast,paymentMethod:this.booking.paymentMethod,paymentRef:this.booking.paymentRef,sendCustomerSMS:this.sendCustomerSMS,sendHotelSMS:this.sendHotelSMS},o);switch(n.paymentMethod=this.paymentMethod,this.message="generating booking",this.sendingInfo=!0,this.mode){case"Sell":this.bookingService.createAdminBooking(n).subscribe(function(e){t.message="Booking generated, Thank you.",t.sendingInfo=!1,t.userGlobal.balance=e.createdBy.balance,t.userGlobal.payable=e.createdBy.payable,t.booking.subBookingList=[],t.subBookings=[],t.ngOnInit(),t.reloadRoomList=!t.reloadRoomList,t.toastrService.info("Booking generated, Thank you.","Success!"),t.router.navigate(["/dashboard/printTicket",e.id])},function(e){t.toastrService.error(e.error,"Error")});break;case"Reserve":this.bookingService.reserveAdminBooking(n).subscribe(function(e){t.message="Booking complete, Thank you.",t.sendingInfo=!1,t.reloadRoomList=!t.reloadRoomList,t.ngOnInit(),t.toastrService.info("Booking complete, Thank you.","Success!"),t.router.navigate(["/dashboard/printTicket",e.id])},function(e){t.toastrService.error(e.error,"Error")})}},e.prototype.isContain=function(e){return this.subBookings.find(function(t){return t.room.id===e.room.id&&t.date===e.date&&t.room.category.hotel.id===e.room.category.hotel.id})},e.prototype.onRemove=function(e){var t=this.subBookings[e];this.unSelect=t.room.id,t.room.available=!0,t.room.selected=!1,this.subBookings.splice(e,1),this.subBookings.length>0&&(this.getTotalPayable(),this.getTotalDues())},e.prototype.onRoomSelectFromRoomStatus=function(e){return Y(this,void 0,void 0,function(){var t=this;return W(this,function(o){switch(o.label){case 0:return[4,this.bookingService.getAdminBooking(e.bookingId).subscribe(function(e){t.reservation=e})];case 1:return o.sent(),[2]}})})},e.prototype.onConfirmRerservation=function(e){return Y(this,void 0,void 0,function(){var t=this;return W(this,function(o){switch(o.label){case 0:return confirm("Are you sure to confirm reservation with id : "+e.id)?(e.createdBy=null,[4,this.bookingService.confirmAdminReservation(e).subscribe(function(e){t.reservation=null,t.toastrService.info("Confirm Reservation Done.","Success!")})]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.onCancelRerservation=function(e){return Y(this,void 0,void 0,function(){var t=this;return W(this,function(o){switch(o.label){case 0:return this.cancelFee<0?(this.toastrService.error("Cancel fee can not be negative","Error"),[2]):confirm("Are you sure to cancel reservation with id : "+e)?[4,this.bookingService.cancelAdminReservation(e,this.cancelFee).subscribe(function(e){t.reservation=null,t.toastrService.info("Cancel Reservation done.","Success!"),t.active=1})]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.onCancelBooking=function(e){return Y(this,void 0,void 0,function(){var t=this;return W(this,function(o){return this.cancelFee<0?(this.toastrService.error("Cancel fee can not be negative","Error"),[2]):(this.bookingService.cancelAdminBooking(e,this.cancelFee,this.paymentMethodCancelFee).subscribe(function(e){var o=e;t.userGlobal.balance=o.balance,t.userGlobal.payable=o.payable,t.reservation=null,t.toastrService.info("Cancel Booking done.","Success!"),t.active=1}),[2])})})},e.prototype.updateSubAdvance=function(){var e,t;return Y(this,void 0,void 0,function(){var o,n;return W(this,function(r){return(o=this.round((null===(e=this.booking)||void 0===e?void 0:e.total)+(null===(t=this.booking)||void 0===t?void 0:t.totalVatService)))<this.booking.totalAdvance&&(this.booking.totalAdvance=o),this.subBookings.forEach((n=this.booking.totalAdvance)<=0?function(e){e.advance=0}:function(e){e.advance=e.payablePrice<=n?e.payablePrice:n,n-=e.advance,e.payablePrice=Math.round((e.room.price-e.discount)*(1+e.room.vatService/100)),e.due=e.payablePrice-e.advance}),this.booking.totalDue=o-this.booking.totalAdvance,[2]})})},e.prototype.getTotalPayable=function(){var e=0;return this.subBookings.forEach(function(t){e+=t.payablePrice}),this.booking.totalVatService=e*this.editedVatAndServiceCharge/100,this.booking.total=e+this.booking.totalVatService,this.booking.total},e.prototype.getTotalDues=function(){var e,t=this.round(null===(e=this.booking)||void 0===e?void 0:e.total)-this.booking.totalAdvance;return this.booking.totalDue=t,t},e.prototype.getMySells=function(){return Y(this,void 0,void 0,function(){return W(this,function(e){return[2]})})},e.prototype.updatePayable=function(e){this.changeSimilar?this.subBookings.forEach(function(t){e.room.category.id===t.room.category.id&&(t.discount=e.discount,t.discount>t.room.price&&(t.discount=t.room.price),t.payablePrice=t.room.price-t.discount)}):(e.discount>e.room.price&&(e.discount=e.room.price),e.payablePrice=e.room.price-e.discount),this.getTotalPayable()},e.prototype.open=function(e){var t=this;this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(function(e){t.onCancelBooking(e)},function(e){t.closeResult="Dismissed "+t.getDismissReason(e)})},e.prototype.getDismissReason=function(e){return e===u.a.ESC?"by pressing ESC":e===u.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: "+e},e.\u0275fac=function(t){return new(t||e)(d.Lb(r.a),d.Lb(n.a),d.Lb(b.a),d.Lb(a.a),d.Lb(s.a),d.Lb(l.a),d.Lb(m.b),d.Lb(u.l),d.Lb(f.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-admin-sell-room"]],decls:12,vars:4,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavItem",4,"ngIf"],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","m-0","py-2"],[1,"col-md-4","p-0"],[3,"hotel",4,"ngIf"],[3,"hotel","unSelect","reloadRoomList","showHotels","roomSelected",4,"ngIf"],["class","col-md-8",4,"ngIf"],[3,"hotel"],[3,"hotel","unSelect","reloadRoomList","showHotels","roomSelected"],[1,"col-md-8"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],["type","button","class","btn btn-sm",3,"ngClass","click",4,"ngIf"],[1,"text-center"],[1,"form-inline"],[1,"form-group","form-check"],["type","checkbox","id","sendHotelSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendHotelSMS",1,"form-check-label"],[1,"form-group","form-check","mx-4"],["type","checkbox","id","sendCustomerSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendCustomerSMS",1,"form-check-label"],[1,"form-check"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"ml-auto","input-group","input-group-sm","mb-3"],[1,"input-group-prepend"],["id","inputGroup-sizing-sm",1,"input-group-text"],["type","text","id","refBy",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-12","bg-primary","text-white","text-center"],["class","table mb-4 border table-hover table-responsive-sm",4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"user",4,"ngIf"],[1,"table","mb-4","border","table-hover","table-responsive-sm"],[1,"text-right"],[1,"text-right",2,"display","none"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",1,"text-right"],["class","form-group form-check",4,"ngIf"],["colspan","3",1,"text-right"],["type","number","max","0","maxlength","2","placeholder","Edit in %",1,"form-control","sized-form","float-right","text-right",3,"ngModel","change","ngModelChange"],["colspan","5",1,"text-right"],["type","number","min","0","name","totalDiscount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],["type","number","class","form-control sized-form float-right text-right","name","discount",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control sized-form float-right text-right","readonly","readonly","name","discount",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","name","advance",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","discount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],["type","number","readonly","readonly","name","discount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],["type","number","name","commission",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],["type","checkbox","id","complementaryBreakfast",1,"form-check-input",3,"ngModel","ngModelChange"],["for","complementaryBreakfast",1,"form-check-label"],[1,"form-row"],[1,"form-group","col-md-3"],["for","paymentMethod",1,"col-form-label","col-form-label-sm"],["id","paymentMethod",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","reference",1,"col-form-label","col-form-label-sm"],["type","text","id","reference",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","note",1,"col-form-label","col-form-label-sm"],["type","text","id","note",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value"],[3,"user"],[1,"mt-2","row"],[1,"col-md-4"],[3,"roomSelected"],[1,"p-3","mb-2","text-white",3,"ngClass"],[3,"booking","systemShow",4,"ngIf"],["class","d-flex flex-row-reverse bd-highlight mb-4",4,"ngIf"],[3,"booking","onBooking","cancelBooking",4,"ngIf"],[3,"booking","systemShow"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-sm","btn-primary","mx-1",3,"routerLink"],[1,"fa","fa-print"],["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",2,"color","red",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"modal-body"],[1,"mb-3"],["for","cancelFee"],[1,"input-group"],["type","number","id","cancelFee","placeholder","Cancel Fee",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","paymentMethod"],["id","paymentMethodCancelFee",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"booking","onBooking","cancelBooking"]],template:function(e,t){if(1&e&&(d.Qb(0,"div",0),d.Qb(1,"span",1),d.Lc(2,"Sell room"),d.Pb(),d.Pb(),d.Qb(3,"div",2),d.Qb(4,"ul",3,4),d.bc("activeIdChange",function(e){return t.active=e}),d.Qb(6,"li",5),d.Qb(7,"a",6),d.Lc(8,"Sell room"),d.Pb(),d.Jc(9,pe,5,3,"ng-template",7),d.Pb(),d.Jc(10,Le,4,1,"li",8),d.Pb(),d.Mb(11,"div",9),d.Pb()),2&e){var o=d.xc(5);d.zb(4),d.mc("activeId",t.active),d.zb(2),d.mc("ngbNavItem",1),d.zb(4),d.mc("ngIf",t.authService.hasRole("B2B_COUNTER")||t.authService.hasRole("ROLE_ADMIN")||t.authService.hasRole("OFFICE_COUNTER")||t.authService.hasRole("SERVICE_COUNTER_HOTEL")),d.zb(1),d.mc("ngbNavOutlet",o)}},directives:[u.n,u.p,u.q,u.o,g.p,u.s,h.a,C,g.n,L.a,L.n,L.q,L.b,g.o,L.s,L.k,L.v,L.r,L.x,R,_,F.a,m.c,L.y,L.o,L.p,U],pipes:[g.g],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control.sized-form[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}.bg-reserved[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important;color:#000!important}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{padding:.5rem;margin:-.5rem -.5rem -.5rem auto}"]}),e}(),Ae=o("3whx"),De=o("s1VS"),Re=o("ITiG"),Ie=function(){return(Ie=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function we(e,t){if(1&e&&(d.Qb(0,"div",28),d.Lc(1),d.Pb()),2&e){var o=d.ec();d.zb(1),d.Nc(" ",o.errorMessage,"\n")}}function xe(e,t){if(1&e&&d.Mb(0,"ngb-highlight",29),2&e){var o=t.term;d.mc("result",t.result.name)("term",o)}}function Be(e,t){1&e&&(d.Qb(0,"small",30),d.Lc(1,"Guest name required"),d.Pb())}function Ne(e,t){if(1&e&&(d.Qb(0,"small",31),d.Qb(1,"div",32),d.Lc(2," Phone required "),d.Pb(),d.Qb(3,"div",32),d.Lc(4," Phone patter should be 01945564841 "),d.Pb(),d.Pb()),2&e){var o=d.ec();d.zb(1),d.mc("hidden",!o.form.controls.guestPhone.errors.required),d.zb(2),d.mc("hidden",!o.form.controls.guestPhone.errors.pattern)}}function ze(e,t){if(1&e&&(d.Qb(0,"option",33),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Nc(" ",o.serviceType," ")}}function Te(e,t){1&e&&(d.Qb(0,"small",31),d.Lc(1,"Service Type required"),d.Pb())}function Ee(e,t){if(1&e&&(d.Qb(0,"option",33),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Nc(" ",o.serviceName," ")}}function _e(e,t){1&e&&(d.Qb(0,"small",30),d.Lc(1,"Service name"),d.Pb())}function Fe(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",34),d.Qb(1,"label",35),d.Lc(2),d.Pb(),d.Qb(3,"select",36),d.bc("change",function(e){return d.Ac(o),d.ec().loadCategoryDropdown(e.target.value)}),d.Qb(4,"option",15),d.Lc(5,"-Select One-"),d.Pb(),d.Jc(6,Ee,2,2,"option",16),d.Pb(),d.Jc(7,_e,2,0,"small",7),d.Pb()}if(2&e){var n=d.ec();d.zb(2),d.Mc(n.serviceName),d.zb(4),d.mc("ngForOf",n.serviceNames),d.zb(1),d.mc("ngIf",n.form.controls.serviceName.errors&&n.form.controls.serviceName.touched)}}function Je(e,t){if(1&e&&(d.Qb(0,"option",33),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Nc(" ",o.categoryName," ")}}function Ve(e,t){1&e&&(d.Qb(0,"small",30),d.Lc(1,"Service category required"),d.Pb())}function Ge(e,t){if(1&e&&(d.Qb(0,"div",4),d.Qb(1,"label",37),d.Lc(2,"Category"),d.Pb(),d.Qb(3,"select",38),d.Qb(4,"option",15),d.Lc(5,"--Select One--"),d.Pb(),d.Jc(6,Je,2,2,"option",16),d.Pb(),d.Jc(7,Ve,2,0,"small",7),d.Pb()),2&e){var o=d.ec();d.zb(6),d.mc("ngForOf",o.serviceCategories),d.zb(1),d.mc("ngIf",o.form.controls.serviceCategoryId.errors&&o.form.controls.serviceCategoryId.touched)}}function He(e,t){if(1&e&&(d.Qb(0,"div",39),d.Qb(1,"label",40),d.Lc(2),d.Pb(),d.Mb(3,"input",41),d.Pb()),2&e){var o=d.ec();d.zb(2),d.Mc(o.checkInDateLabel)}}function qe(e,t){if(1&e&&(d.Qb(0,"div",42),d.Qb(1,"label",43),d.Lc(2),d.Pb(),d.Mb(3,"input",44),d.Pb()),2&e){var o=d.ec();d.zb(2),d.Mc(o.checkOutDateLabel)}}function je(e,t){1&e&&(d.Qb(0,"div",4),d.Qb(1,"label",45),d.Lc(2,"Location"),d.Pb(),d.Mb(3,"input",46),d.Pb())}function $e(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",47),d.Qb(1,"label",48),d.Lc(2,"Trip Type"),d.Pb(),d.Qb(3,"select",49),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().tripWayDefaultValue=e}),d.Qb(4,"option",15),d.Lc(5,"--Select One--"),d.Pb(),d.Qb(6,"option",50),d.Lc(7,"One Way"),d.Pb(),d.Qb(8,"option",51),d.Lc(9,"Round Way"),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec();d.zb(3),d.mc("ngModel",n.tripWayDefaultValue)}}function Ue(e,t){1&e&&(d.Qb(0,"small",30),d.Lc(1,"Start from required"),d.Pb())}function Ke(e,t){if(1&e&&(d.Qb(0,"div",52),d.Qb(1,"label",53),d.Lc(2),d.Pb(),d.Mb(3,"input",54),d.Jc(4,Ue,2,0,"small",7),d.Pb()),2&e){var o=d.ec();d.zb(2),d.Mc(o.startPoint),d.zb(2),d.mc("ngIf",o.form.controls.startFrom.errors&&o.form.controls.startFrom.touched)}}function Ye(e,t){if(1&e&&(d.Qb(0,"div",55),d.Qb(1,"label",48),d.Lc(2),d.Pb(),d.Mb(3,"input",56),d.Pb()),2&e){var o=d.ec();d.zb(2),d.Mc(o.dropPoint)}}function We(e,t){if(1&e&&(d.Qb(0,"option",33),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.methodName),d.zb(1),d.Nc(" ",o.methodName," ")}}function Xe(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",57),d.Qb(1,"table",58),d.Qb(2,"tr"),d.Mb(3,"td",59),d.Mb(4,"td",59),d.Qb(5,"td",59),d.Lc(6),d.Pb(),d.Qb(7,"td",60),d.Qb(8,"input",61),d.bc("change",function(){return d.Ac(o),d.ec().updateTotal()}),d.Pb(),d.Pb(),d.Qb(9,"td",59),d.Lc(10),d.Pb(),d.Qb(11,"td",62),d.Qb(12,"input",63),d.bc("keyup",function(){return d.Ac(o),d.ec().updateTotal()}),d.Pb(),d.Pb(),d.Pb(),d.Qb(13,"tr"),d.Mb(14,"td",59),d.Mb(15,"td",59),d.Qb(16,"td",64),d.Lc(17,"Discount Ref"),d.Pb(),d.Qb(18,"td",60),d.Mb(19,"input",65),d.Pb(),d.Qb(20,"td",59),d.Lc(21,"Discount"),d.Pb(),d.Qb(22,"td",62),d.Qb(23,"input",66),d.bc("keyup",function(){return d.Ac(o),d.ec().updateTotal()}),d.Pb(),d.Pb(),d.Pb(),d.Qb(24,"tr"),d.Mb(25,"td",59),d.Mb(26,"td",59),d.Qb(27,"td",59),d.Lc(28,"Type"),d.Pb(),d.Qb(29,"td",60),d.Qb(30,"select",67),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().vatTypeDefaultValue=e})("change",function(){return d.Ac(o),d.ec().updateTotal()}),d.Qb(31,"option",15),d.Lc(32,"--Select One--"),d.Pb(),d.Qb(33,"option",68),d.Lc(34,"Percent"),d.Pb(),d.Qb(35,"option",69),d.Lc(36,"Amount"),d.Pb(),d.Pb(),d.Pb(),d.Qb(37,"td",59),d.Lc(38,"VAT & Service Charge"),d.Pb(),d.Qb(39,"td",62),d.Qb(40,"input",70),d.bc("keyup",function(){return d.Ac(o),d.ec().updateTotal()}),d.Pb(),d.Pb(),d.Pb(),d.Qb(41,"tr"),d.Mb(42,"td",59),d.Mb(43,"td",59),d.Mb(44,"td",64),d.Mb(45,"td",60),d.Qb(46,"td",59),d.Lc(47,"ITA Commission"),d.Pb(),d.Qb(48,"td",62),d.Mb(49,"input",71),d.Pb(),d.Pb(),d.Qb(50,"tr"),d.Mb(51,"td",59),d.Mb(52,"td",60),d.Mb(53,"td",64),d.Mb(54,"td",60),d.Qb(55,"td",59),d.Lc(56,"Payable"),d.Pb(),d.Qb(57,"td",72),d.Lc(58),d.fc(59,"currency"),d.Pb(),d.Pb(),d.Qb(60,"tr"),d.Qb(61,"td",59),d.Lc(62,"Payment Method"),d.Pb(),d.Qb(63,"td",64),d.Qb(64,"select",73),d.Jc(65,We,2,2,"option",16),d.Pb(),d.Pb(),d.Qb(66,"td",64),d.Lc(67,"Payment Ref"),d.Pb(),d.Qb(68,"td",60),d.Mb(69,"input",74),d.Pb(),d.Qb(70,"td",59),d.Lc(71,"Advance"),d.Pb(),d.Qb(72,"td",62),d.Qb(73,"input",75),d.bc("keyup",function(){return d.Ac(o),d.ec().updateTotal()}),d.Pb(),d.Pb(),d.Pb(),d.Qb(74,"tr"),d.Mb(75,"td",59),d.Mb(76,"td",60),d.Mb(77,"td",64),d.Mb(78,"td",60),d.Qb(79,"td",59),d.Lc(80,"Due"),d.Pb(),d.Qb(81,"td",72),d.Lc(82),d.fc(83,"currency"),d.Pb(),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec();d.zb(6),d.Mc(n.noOfRoomLabel),d.zb(4),d.Mc(n.rateLabel),d.zb(20),d.mc("ngModel",n.vatTypeDefaultValue),d.zb(28),d.Mc(d.hc(59,6,n.payable,"\u09f3")),d.zb(7),d.mc("ngForOf",n.paymentMethods),d.zb(17),d.Mc(d.hc(83,9,n.due,"\u09f3"))}}function Ze(e,t){if(1&e&&(d.Qb(0,"div",31),d.Lc(1),d.Pb()),2&e){var o=d.ec();d.zb(1),d.Nc(" ",o.getFormValidationErrors()," ")}}var et={HOTEL:[{name:"Sea View Resort & Sports ",categories:[{name:"Deluxe Double "},{name:"Regular Double "},{name:"Regular Couple "},{name:"Premium Double   "},{name:"Premium Couple  "},{name:"Tent"}]},{name:"Mermaid Resort",categories:[{name:"Double Bed"}]},{name:"Hotel Sea Cox",categories:[{name:"Standard Couple (Non AC Room)"},{name:"Standard Couple (AC Room)"},{name:"Standard Three Bed (AC Room)"},{name:"Standard Four Bed (Non AC Room)"},{name:"Honeymoon Suite Couple (AC Room)"},{name:"Super Deluxe Couple Sea View (AC Room)"},{name:"Super Deluxe Four Bed (AC Room)"},{name:"Deluxe Couple (AC Room)"},{name:"Royal Suite Connecting Sea View (AC Room) "},{name:"Executive Suite Connecting (AC Room) "},{name:"Standard Triple (Non AC Room)"}]},{name:"The Cox Beach Resort",categories:[{name:"VIP Couple Deluxe AC"},{name:"Couple Bed AC"},{name:"3 Bed Deluxe AC"},{name:"Family Deluxe"},{name:"4 Bed Deluxe AC"},{name:"Couple Bed Non AC"}]},{name:"Grand Sajek Resort",categories:[{name:"Couple Bed "},{name:"Double Bed"}]},{name:"Muscat Holiday Resort",categories:[{name:"Couple Non Ac"},{name:"Couple Bed Ac"},{name:"Three Bed Non Ac"},{name:"Three Bed AC"},{name:"6 Bed Non Ac Room"},{name:"6 Bed Ac Room"},{name:"8 Bed Non Ac Room"},{name:"8 Bed Ac Room"}]},{name:"Tareng Resort ",categories:[{name:"Double Bed"},{name:"Couple Room"}]},{name:"Himalay Resort",categories:[{name:"Double Bed "}]},{name:"Shwapno Chura Resort",categories:[{name:"Double Bed "}]},{name:"Royal Sajek Resort",categories:[{name:"Double Bed"}]},{name:"Hotel Hill View",categories:[{name:" Family Deluxe Non AC"},{name:"Three Bed AC"},{name:"Three Bed Non AC"},{name:"Twin Bed Non-Ac"},{name:"Deluxe Couple AC"},{name:"Deluxe Couple Non AC"},{name:"Twin Bed Ac"},{name:"Family Deluxe Ac"}]},{name:"Sajek Megh Bilash Resort",categories:[{name:"Double Bed "},{name:"Couple Bed"}]},{name:"Dream Sajek Resort",categories:[{name:"Double Bed Room"}]},{name:"Hotel Auster echo",categories:[{name:"Couple Bed Ac (Hill View)"},{name:"Couple Bed Non-Ac (Hill View)"},{name:"Double Bed Ac"},{name:"Double Bed Non-Ac"},{name:"Three Bed Ac"},{name:"Three Bed Non-Ac"},{name:"Connecting Room Non-Ac (6 Pax)"},{name:"Suite Room"},{name:"Couple Bed Ac (Sea View)"},{name:"Couple Bed Non-Ac (Sea View)"}]},{name:"Sayeman Beach Resort",categories:[{name:"Panaroma Ocean Suite"},{name:"Super Deluxe King"},{name:"Infinity Sea View"},{name:"Junior Suite"},{name:"Infinity Sea View"},{name:"Infinity Sea View "}]},{name:"Sea Probal Beach Resort",categories:[{name:"Double Bedroom"}]},{name:"Shahajalal Resort",categories:[{name:"DoubleCouple"},{name:" Premium Couple Bed"},{name:"Premium Double"}]},{name:"Hotel Pink Shore",categories:[{name:"Deluxe King Suite (Hill View)"},{name:"Deluxe King Suite (Sea View)"},{name:"Deluxe Triple Suite (Hill View)"},{name:"Standard Double Suite (Hill View)"}]},{name:"Hotel Square Park",categories:[{name:"Twin Double Ac"},{name:"Single Twin Bed Ac"},{name:"Single Twin Bed Non-Ac"},{name:"Single Bed Non-Ac"},{name:"Single Bed Ac"},{name:"Three Bed Non-Ac"},{name:"Couple Bed Ac"},{name:"Couple Bed Non-Ac"},{name:"Twin Double Non AC"}]},{name:"Meghadree Eco Resort",categories:[{name:"Double Bed"},{name:"Semi Double Bed"}]},{name:"Paharika Resort",categories:[{name:"Couple Bed"},{name:"Double Bed"},{name:"3 Bed"}]},{name:"Best Western Heritage",categories:[{name:"Deluxe Double Sea View"},{name:"Deluxe Double Hill View"},{name:"Superior Double"},{name:"Superior Twin"}]},{name:"Moynamoti Resort",categories:[{name:"Deluxe Double"},{name:"Deluxe Couple"}]},{name:"Rajendra Eco Resort",categories:[]}],SHIP:[{name:"MV Bay Cruise",categories:[{name:"Krishnachura"},{name:"Hasnahena"},{name:"Raganigandha"}]},{name:"Keari Sindabad",categories:[{name:"Main Deck"},{name:"Open Deck"},{name:"Bridge Deck"}]},{name:"Keari Cruise and Dine",categories:[{name:"Pearl Loung"},{name:"Coral Loung"},{name:"Exclusive "}]},{name:"The Atlantic Cruise",categories:[{name:"Economy"},{name:"Open Deck"},{name:"Royal Loung"},{name:"Luxury Loung"}]},{name:"MV Bay One",categories:[{name:"VVIP Cabin"},{name:"Bunker Cabin"},{name:"Royal Class"},{name:"Bunker Bed"},{name:"Presidencial Suite"},{name:"Luxury Seat "},{name:"Economy Class"}]},{name:"MV Karnafuly Express",categories:[{name:"Lavender"},{name:"Marigold"},{name:"Gladiolous"},{name:"Lilack Loung"},{name:"Crishanthamam Loung"},{name:"Single Cabin"},{name:"Twin Cabin"},{name:"VIP Cabin"},{name:"VVIP Cabin"}]}],BUS:[{name:"Relax Transport",categories:[{name:"E-Class Non AC"},{name:"E-Class AC"},{name:"B-Class AC"}]},{name:"Relax Premium",categories:[{name:"E-Class Non AC"},{name:"E-Class AC"},{name:"B-Class AC"}]},{name:"Saintmartin Paribahan BD",categories:[{name:"E-Class Non AC"},{name:"E-Class AC"},{name:"B-Class Non AC"},{name:"B-Class AC"}]},{name:"President Travels",categories:[{name:"B-Class AC"}]},{name:"Saintmartin Hyundai",categories:[{name:"E-Class AC"},{name:"B-Class AC"}]},{name:"London Express Limited",categories:[{name:"E-Class AC"},{name:"B-Class AC"}]},{name:"Others ",categories:[{name:"E-Class NON-AC"},{name:"E-Class AC"},{name:"B-Class NON-AC"},{name:"B-Class AC"},{name:"Other"}]}],AIR:[{name:"Biman Bangladesh Airlines",categories:[{name:"Economy Class"},{name:"Business Class"}]},{name:"US-Bangla Airlines",categories:[{name:"Economy Class"},{name:"Business Class"}]},{name:"Regent Airways",categories:[{name:"Economy Class"},{name:"Business Class"}]},{name:"Novoair",categories:[{name:"Economy Class"},{name:"Business Class"}]},{name:"Other",categories:[{name:"Economy Class"},{name:"Business Class"}]}]},tt=function(){function e(e,t,o){this.fb=e,this.util=t,this.dataSource=o,this.create=new d.n,this.errorMessage="",this.exists=!1,this.mouseoverShifting=!1,this.serviceCategoryList=[],this.serviceName="",this.checkInDateLabel="",this.vatTypeDefaultValue="Percent",this.tripWayDefaultValue="One",this.checkOutDateLabel="",this.noOfRoomLabel="",this.startPoint="",this.dropPoint="",this.rateLabel="",this.enableLocation=!1,this.price=0,this.subTotal=0,this.payable=0,this.due=0,this.isServiceTypeSelected=!1,this.checkInDiv=!1,this.checkOutDiv=!1,this.tableId=!1,this.startFromDiv=!1,this.tripTypeDiv=!1,this.destinationDiv=!1,this.isServiceNameSelected=!1,this.createForm()}return e.prototype.ngOnInit=function(){this.getServiceTypeList(),this.getPaymentMethodList()},e.prototype.createForm=function(){this.form=this.fb.group({serviceType:["",L.w.required],name:[""],serviceName:["",L.w.required],serviceCategoryId:["",L.w.required],startDate:[""],endDate:[""],startFrom:[""],destination:[""],quantity:[""],rate:[""],discount:[""],location:[""],vatPercent:[""],discountRef:[""],commission:[""],vatType:[""],advance:[""],tripWay:[""],paymentMethod:["CASH",L.w.required],paymentRef:[""],guestName:["",L.w.required],guestPhone:["",[L.w.required,L.w.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],guestEmail:[""]})},e.prototype.submit=function(){if(this.form.valid){var e=Ie({},this.form.value);this.create.emit(e),this.clear()}},e.prototype.onSelectServiceType=function(e){var t=this;""===e?this.isServiceTypeSelected=!1:(this.isServiceTypeSelected=!0,this.dataSource.sendAuthenticateGetRequestObserver("api/v1/service-type-manual-bookings/"+e,"").subscribe(function(e){t.responseModel=e,t.serviceType=t.responseModel.content,null!=t.serviceType&&t.dataSource.sendAuthenticateGetRequestObserver("api/v1/service-name-manual-bookings/list-by-type/"+t.serviceType.id,"").subscribe(function(e){t.responseModel=e,t.serviceNames=t.responseModel.content,t.serviceNames.length>0&&(t.serviceName=t.serviceType.serviceType+" Name",t.checkInDiv=!0,t.checkOutDiv=!0,t.enableLocation=!1,t.tableId=!0,t.startFromDiv=!1,t.tripTypeDiv=!1,t.destinationDiv=!1,"HOTEL"===t.serviceType.serviceType?(t.checkInDateLabel="Check In Date",t.checkOutDateLabel="Check Out Date",t.noOfRoomLabel="No. Of Room",t.rateLabel="Rent"):"FOOD"!==t.serviceType.serviceType?(t.checkInDateLabel="Journey Date",t.checkOutDateLabel="Return Date",t.noOfRoomLabel="No. Of Seat",t.rateLabel="Ticket Price",t.startPoint="Starting Point",t.dropPoint="Dropping Point",t.startFromDiv=!0,t.tripTypeDiv=!0,t.destinationDiv=!0):(t.serviceName="Restaurant Name",t.noOfRoomLabel="No. Of Meal",t.rateLabel="Price Per Meal",t.enableLocation=!0,t.checkInDiv=!1,t.checkOutDiv=!1))})}))},e.prototype.onSelectServiceName=function(e){this.form.controls.category.setValue(""),this.serviceCategoryList=[];var t=e.item,o=et[this.form.controls.serviceType.value].find(function(e){return e.name===t});this.serviceCategoryList=o.categories},e.prototype.updateTotal=function(){var e=this.form.value;this.price=e.rate*e.quantity,this.subTotal=this.price-e.discount,this.payable=this.subTotal+(""===e.vatType?this.subTotal*e.vatPercent/100:e.vatPercent),this.due=this.payable-e.advance},e.prototype.clear=function(){this.exists=!1,this.errorMessage="",this.form.reset()},e.prototype.getFormValidationErrors=function(){var e=this,t="";return Object.keys(this.form.controls).forEach(function(o){var n=e.form.get(o).errors;null!=n&&Object.keys(n).forEach(function(e){t+=o+" : "+e+"; "})}),t},e.prototype.getServiceTypeList=function(){var e=this;this.dataSource.sendAuthenticateGetRequestObserver("api/v1/service-type-manual-bookings/list","").subscribe(function(t){e.responseModel=t,e.serviceTypes=e.responseModel.content})},e.prototype.loadCategoryDropdown=function(e){var t=this;null!=e&&""!==e?this.dataSource.sendAuthenticateGetRequestObserver("api/v1/service-category-manual-bookings/list-by-service/"+e,"").subscribe(function(e){t.responseModel=e,t.serviceCategories=t.responseModel.content,t.isServiceNameSelected=!0}):this.isServiceNameSelected=!1},e.prototype.getPaymentMethodList=function(){var e=this;this.dataSource.sendAuthenticateGetRequestObserver("api/v1/payment-methods/list","").subscribe(function(t){e.responseModel=t,e.paymentMethods=e.responseModel.content})},e.\u0275fac=function(t){return new(t||e)(d.Lb(L.d),d.Lb(r.a),d.Lb(a.a))},e.\u0275cmp=d.Fb({type:e,selectors:[["manual-booking-form"]],outputs:{create:"create"},decls:44,vars:17,consts:[["class","alert alert-danger",4,"ngIf"],["rt",""],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],[1,"col-sm-3"],["for","guestName",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","guestName","formControlName","guestName","placeholder","Guest Name",1,"form-control","form-control-sm"],["class","form-text text-danger",4,"ngIf"],["for","guestPhone",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","guestPhone","maxlength","11","formControlName","guestPhone","placeholder","Guest phone number",1,"form-control","form-control-sm"],["class","text-danger",4,"ngIf"],["for","guestEmail",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","guestEmail","formControlName","guestEmail","placeholder","Guest Email",1,"form-control","form-control-sm"],["for","serviceType",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","serviceType","formControlName","serviceType",1,"form-control","form-control-sm",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","col-sm-3","id","serviceNameDiv",4,"ngIf"],["class","col-sm-3",4,"ngIf"],["class","col-sm-3","id","checkInDiv",4,"ngIf"],["class","col-sm-3","id","checkOutDiv",4,"ngIf"],["class","col-sm-3","id","tripTypeDiv",4,"ngIf"],["class","col-sm-3","id","startFromDiv",4,"ngIf"],["class","col-sm-3","id","destinationDiv",4,"ngIf"],["class","row","id","tableId",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-primary","mx-1",3,"mouseenter"],["type","button",1,"btn","btn-sm","btn-warning","mx-1",3,"click"],[1,"alert","alert-danger"],[3,"result","term"],[1,"form-text","text-danger"],[1,"text-danger"],[3,"hidden"],[3,"value"],["id","serviceNameDiv",1,"col-sm-3"],["for","serviceName",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","serviceName","formControlName","serviceName",1,"form-control","form-control-sm",3,"change"],["for","serviceCategoryId",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","serviceCategoryId","formControlName","serviceCategoryId",1,"form-control","form-control-sm"],["id","checkInDiv",1,"col-sm-3"],["for","startDate",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","startDate","type","date","formControlName","startDate",1,"form-control","form-control-sm"],["id","checkOutDiv",1,"col-sm-3"],["for","endDate",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","endDate","type","date","formControlName","endDate",1,"form-control","form-control-sm"],["for","location",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","location","placeholder","Location","name","location","formControlName","location",1,"form-control","form-control-sm"],["id","tripTypeDiv",1,"col-sm-3"],["for","destination",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","tripWay","formControlName","tripWay",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","One"],["value","Round"],["id","startFromDiv",1,"col-sm-3"],["for","startFrom",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","startFrom","formControlName","startFrom","placeholder","Start From",1,"form-control","form-control-sm"],["id","destinationDiv",1,"col-sm-3"],["type","text","id","destination","formControlName","destination","placeholder","Destination",1,"form-control","form-control-sm"],["id","tableId",1,"row"],["cellspacing","0","cellpadding","0",2,"border","none","width","100%"],["width","16%",2,"text-align","right","padding-right","20px","padding","5px"],["width","16%",2,"padding","5px"],["type","number","id","quantity","formControlName","quantity","placeholder","Quantity",3,"change"],["width","17%",2,"padding","5px"],["type","number","id","rate","formControlName","rate","placeholder","Rate",3,"keyup"],["width","16%",2,"text-align","right","padding-right","20px"],["type","text","id","discountRef","formControlName","discountRef","placeholder","discountRef"],["type","number","id","discount","value","0","formControlName","discount","placeholder","Discount",3,"keyup"],["formControlName","vatType",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value","Percent"],["value","Amount"],["type","number","id","vat","value","0","formControlName","vatPercent","placeholder","VAT & Service Charge",3,"keyup"],["type","number","id","commission","formControlName","commission","placeholder","ITA Commission"],["width","17%",2,"text-align","center","padding","5px"],["id","paymentMethod","formControlName","paymentMethod"],["type","text","id","reference","formControlName","paymentRef"],["type","text","id","advance","formControlName","advance","placeholder","Advance",3,"keyup"]],template:function(e,t){1&e&&(d.Jc(0,we,2,1,"div",0),d.Jc(1,xe,1,2,"ng-template",null,1,d.Kc),d.Qb(3,"form",2),d.bc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),d.Qb(4,"div",3),d.Qb(5,"div",4),d.Qb(6,"label",5),d.Lc(7,"Guest Name*"),d.Pb(),d.Mb(8,"input",6),d.Jc(9,Be,2,0,"small",7),d.Pb(),d.Qb(10,"div",4),d.Qb(11,"label",8),d.Lc(12,"Guest Phone*"),d.Pb(),d.Mb(13,"input",9),d.Jc(14,Ne,5,2,"small",10),d.Pb(),d.Qb(15,"div",4),d.Qb(16,"label",11),d.Lc(17,"Guest Email"),d.Pb(),d.Mb(18,"input",12),d.Pb(),d.Qb(19,"div",4),d.Qb(20,"label",13),d.Lc(21,"Service Type*"),d.Pb(),d.Qb(22,"select",14),d.bc("change",function(e){return t.onSelectServiceType(e.target.value)}),d.Qb(23,"option",15),d.Lc(24,"Select a service Type"),d.Pb(),d.Jc(25,ze,2,2,"option",16),d.Pb(),d.Jc(26,Te,2,0,"small",10),d.Pb(),d.Pb(),d.Qb(27,"div",3),d.Jc(28,Fe,8,3,"div",17),d.Jc(29,Ge,8,2,"div",18),d.Jc(30,He,4,1,"div",19),d.Jc(31,qe,4,1,"div",20),d.Jc(32,je,4,0,"div",18),d.Pb(),d.Qb(33,"div",3),d.Jc(34,$e,10,1,"div",21),d.Jc(35,Ke,5,2,"div",22),d.Jc(36,Ye,4,1,"div",23),d.Pb(),d.Jc(37,Xe,84,12,"div",24),d.Qb(38,"div",25),d.Qb(39,"button",26),d.bc("mouseenter",function(){return t.mouseoverShifting=!0}),d.Lc(40),d.Pb(),d.Qb(41,"button",27),d.bc("click",function(){return t.clear()}),d.Lc(42,"Clear"),d.Pb(),d.Pb(),d.Jc(43,Ze,2,1,"div",10),d.Pb()),2&e&&(d.mc("ngIf",t.errorMessage.length>0),d.zb(3),d.mc("formGroup",t.form),d.zb(6),d.mc("ngIf",t.form.controls.guestName.errors&&t.form.controls.guestName.touched),d.zb(5),d.mc("ngIf",t.form.controls.guestPhone.errors&&t.form.controls.guestPhone.touched),d.zb(11),d.mc("ngForOf",t.serviceTypes),d.zb(1),d.mc("ngIf",(null==t.form.controls.serviceType.errors?null:t.form.controls.serviceType.errors.required)&&t.form.controls.serviceType.dirty),d.zb(2),d.mc("ngIf",t.isServiceTypeSelected),d.zb(1),d.mc("ngIf",t.isServiceNameSelected),d.zb(1),d.mc("ngIf",t.checkInDiv),d.zb(1),d.mc("ngIf",t.checkOutDiv),d.zb(1),d.mc("ngIf",t.enableLocation),d.zb(2),d.mc("ngIf",t.tripTypeDiv),d.zb(1),d.mc("ngIf",t.startFromDiv),d.zb(1),d.mc("ngIf",t.destinationDiv),d.zb(1),d.mc("ngIf",t.tableId),d.zb(3),d.Mc(t.exists?"Update":"Save"),d.zb(3),d.mc("ngIf",t.mouseoverShifting))},directives:[g.p,L.y,L.o,L.h,L.b,L.n,L.g,L.k,L.v,L.r,L.x,g.o,u.j,L.s],pipes:[g.d],styles:[".btn-web[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]{color:#fff;background-color:#0e893f}.hotel-button-reverse[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]:hover{background-color:#f7a71a}.hotel-button-reverse[_ngcontent-%COMP%]{color:#fff}.form-head[_ngcontent-%COMP%], .hotel-button-reverse[_ngcontent-%COMP%]:hover, td.form-head[_ngcontent-%COMP%]{background-color:#0e893f}.form-head[_ngcontent-%COMP%], td.form-head[_ngcontent-%COMP%]{width:inherit;font-size:20px!important;line-height:22px;padding:5px;color:#fff}.form-head-link[_ngcontent-%COMP%], td.form-head-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-size:16px}"]}),e}(),ot=function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},nt=function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function rt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"manual-booking-form",8),d.bc("create",function(e){return d.Ac(o),d.ec().onCreate(e)}),d.Pb()}}function it(e,t){if(1&e&&(d.Qb(0,"option",30),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Oc("",o.name,"[",o.phoneNumber,"] ")}}function ct(e,t){if(1&e&&(d.Qb(0,"option",30),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Nc("",o.serviceType," ")}}function at(e,t){if(1&e&&(d.Qb(0,"option",30),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Nc("",o.serviceName," ")}}function st(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",16),d.Qb(1,"div",17),d.Qb(2,"div",12),d.Qb(3,"div",13),d.Lc(4,"Service Name"),d.Pb(),d.Pb(),d.Qb(5,"select",31),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).serviceName=e}),d.Qb(6,"option",19),d.Lc(7,"All"),d.Pb(),d.Jc(8,at,2,2,"option",20),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec(2);d.zb(5),d.mc("ngModel",n.serviceName),d.zb(3),d.mc("ngForOf",n.serviceNames)}}function lt(e,t){1&e&&(d.Qb(0,"div",32),d.Mb(1,"loading"),d.Pb())}function bt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"button",44),d.bc("click",function(){d.Ac(o);var e=d.ec().$implicit;return d.ec(3).cancelBooking(e)}),d.Lc(1,"Cancel "),d.Pb()}}function ut(e,t){1&e&&(d.Qb(0,"button",45),d.Lc(1,"Cancelled "),d.Pb())}function dt(e,t){if(1&e&&(d.Qb(0,"a",46),d.Lc(1,"Print"),d.Pb()),2&e){var o=d.ec().$implicit;d.mc("routerLink","/dashboard/manual-booking-print-ticket/"+o.id)}}function mt(e,t){if(1&e&&(d.Qb(0,"tr"),d.Qb(1,"td"),d.Lc(2),d.Pb(),d.Qb(3,"td"),d.Lc(4),d.Pb(),d.Qb(5,"td"),d.Lc(6),d.Mb(7,"br"),d.Lc(8),d.Pb(),d.Qb(9,"td"),d.Lc(10),d.Pb(),d.Qb(11,"td"),d.Lc(12),d.Pb(),d.Qb(13,"td"),d.Lc(14),d.Pb(),d.Qb(15,"td"),d.Lc(16),d.Pb(),d.Qb(17,"td"),d.Lc(18),d.Pb(),d.Qb(19,"td"),d.Lc(20),d.Pb(),d.Qb(21,"td"),d.Lc(22),d.Pb(),d.Qb(23,"td"),d.Lc(24),d.Pb(),d.Qb(25,"td"),d.Jc(26,bt,2,0,"button",41),d.Jc(27,ut,2,0,"button",42),d.Jc(28,dt,2,1,"a",43),d.Pb(),d.Pb()),2&e){var o=t.$implicit,n=d.ec(3);d.zb(2),d.Pc("",o.serviceType,"- ",o.serviceName," - ",o.serviceCategory,""),d.zb(2),d.Mc(o.createdUser),d.zb(2),d.Nc("","HOTEL"===o.serviceType?"CheckIn: "+n.checkValue(o.startDate):"FOOD"!==o.serviceType?"Journey:"+n.checkValue(o.startDate):""," "),d.zb(2),d.Nc("","HOTEL"===o.serviceType?"Checkout: "+n.checkValue(o.endDate):"FOOD"!==o.serviceType?"Return:"+n.checkValue(o.endDate):""," "),d.zb(2),d.Oc("Qty: ",o.quantity," & Rate: ",o.rate," BDT"),d.zb(2),d.Oc("",o.vat," ","Amount"===o.vatType?"BDT":"%",""),d.zb(2),d.Nc("",o.itaCommission," BDT"),d.zb(2),d.Nc("",o.payable," BDT"),d.zb(2),d.Nc("",o.advance," BDT"),d.zb(2),d.Nc("",o.due," BDT"),d.zb(2),d.Mc(o.paymentMethod),d.zb(2),d.Mc(o.id),d.zb(2),d.mc("ngIf","Cancelled"!==o.status),d.zb(1),d.mc("ngIf","Cancelled"===o.status),d.zb(1),d.mc("ngIf","Cancelled"!==o.status)}}function ft(e,t){if(1&e&&(d.Qb(0,"div",33),d.Ob(1),d.Qb(2,"table",34),d.Qb(3,"thead"),d.Qb(4,"tr",35),d.Qb(5,"td",36),d.Qb(6,"div",9),d.Qb(7,"div",37),d.Qb(8,"h5",38),d.Lc(9,"List of Manual Booking"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(10,"tr"),d.Qb(11,"th",39),d.Lc(12,"Service"),d.Pb(),d.Qb(13,"th"),d.Lc(14,"Sold by"),d.Pb(),d.Qb(15,"th"),d.Lc(16,"Date"),d.Pb(),d.Qb(17,"th"),d.Lc(18,"Particular"),d.Pb(),d.Qb(19,"th"),d.Lc(20,"Vat"),d.Pb(),d.Qb(21,"th"),d.Lc(22,"ITA Com."),d.Pb(),d.Qb(23,"th"),d.Lc(24,"Payable"),d.Pb(),d.Qb(25,"th"),d.Lc(26,"Advance"),d.Pb(),d.Qb(27,"th"),d.Lc(28,"Due"),d.Pb(),d.Qb(29,"th"),d.Lc(30,"Payment Method"),d.Pb(),d.Qb(31,"th"),d.Lc(32,"ID"),d.Pb(),d.Qb(33,"th"),d.Lc(34,"Action"),d.Pb(),d.Pb(),d.Pb(),d.Qb(35,"tbody"),d.Jc(36,mt,29,19,"tr",40),d.Pb(),d.Pb(),d.Nb(),d.Pb()),2&e){var o=d.ec(2);d.zb(36),d.mc("ngForOf",o.filteredManualBookingList)}}function gt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",0),d.Qb(1,"div",9),d.Qb(2,"div",10),d.Qb(3,"div",11),d.Qb(4,"div",12),d.Qb(5,"div",13),d.Mb(6,"i",14),d.Pb(),d.Pb(),d.Qb(7,"input",15),d.bc("selected",function(e){return d.Ac(o),d.ec().selectedDate(e)}),d.Pb(),d.Pb(),d.Pb(),d.Qb(8,"div",16),d.Qb(9,"div",17),d.Qb(10,"div",12),d.Qb(11,"div",13),d.Lc(12,"Counter"),d.Pb(),d.Pb(),d.Qb(13,"select",18),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().officeCounter=e}),d.Qb(14,"option",19),d.Lc(15,"All"),d.Pb(),d.Jc(16,it,2,3,"option",20),d.Pb(),d.Pb(),d.Pb(),d.Qb(17,"div",16),d.Qb(18,"div",17),d.Qb(19,"div",12),d.Qb(20,"div",13),d.Lc(21,"Service Type"),d.Pb(),d.Pb(),d.Qb(22,"select",21),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().serviceType=e})("ngModelChange",function(){return d.Ac(o),d.ec().onSelectServiceType()}),d.Qb(23,"option",19),d.Lc(24,"All"),d.Pb(),d.Jc(25,ct,2,2,"option",20),d.Pb(),d.Pb(),d.Pb(),d.Jc(26,st,9,2,"div",22),d.Qb(27,"div",16),d.Qb(28,"div",17),d.Qb(29,"div",12),d.Qb(30,"div",13),d.Lc(31,"Status"),d.Pb(),d.Pb(),d.Qb(32,"select",23),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().filterBookingStatus=e})("change",function(){return d.Ac(o),d.ec().onFilterChange()}),d.Qb(33,"option",19),d.Lc(34," Sold"),d.Pb(),d.Qb(35,"option",24),d.Lc(36," Canceled"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(37,"div",25),d.Qb(38,"button",26),d.bc("click",function(){return d.Ac(o),d.ec().onSearch()}),d.Lc(39,"Search"),d.Pb(),d.Pb(),d.Pb(),d.Qb(40,"div",27),d.Jc(41,lt,2,0,"div",28),d.Jc(42,ft,37,1,"div",29),d.Pb(),d.Pb()}if(2&e){var n=d.ec();d.zb(7),d.mc("options",n.options),d.zb(6),d.mc("ngModel",n.officeCounter),d.zb(3),d.mc("ngForOf",n.userList),d.zb(6),d.mc("ngModel",n.serviceType),d.zb(3),d.mc("ngForOf",n.serviceTypes),d.zb(1),d.mc("ngIf",n.isServiceTypeSelected),d.zb(6),d.mc("ngModel",n.filterBookingStatus),d.zb(9),d.mc("ngIf",n.loading),d.zb(1),d.mc("ngIf",!n.loading)}}var ht=function(){function e(e,t,o,n,r,i){this.manualBookingService=e,this.restDataService=t,this.userService=o,this.util=n,this.toastrService=r,this.router=i,this.activeNav=1,this.daterange={},this.officeCounter="0",this.filterBookingStatus="0",this.isServiceTypeSelected=!1,this.serviceType="0",this.serviceName="0",this.loading=!1,this.headerText="Create Manual Booking"}return e.prototype.ngOnInit=function(){this.setDateRanges(),this.getUserListByRole(),this.getServiceTypeList()},e.prototype.onFilterChange=function(){switch(this.filterBookingStatus){case"1":this.filteredManualBookingList=this.manualBookingList.filter(function(e){return"Cancelled"===e.status});break;default:this.filteredManualBookingList=this.manualBookingList.filter(function(e){return"Cancelled"!==e.status})}},e.prototype.onSelectServiceType=function(){var e=this;this.serviceName="0","0"===this.serviceType?this.isServiceTypeSelected=!1:(this.isServiceTypeSelected=!0,this.restDataService.sendAuthenticateGetRequestObserver("api/v1/service-name-manual-bookings/list-by-type/"+this.serviceType,"").subscribe(function(t){e.responseModel=t,e.serviceNames=e.responseModel.content}))},e.prototype.getUserListByRole=function(){return ot(this,void 0,void 0,function(){var e,t;return nt(this,function(o){switch(o.label){case 0:this.loading=!0,o.label=1;case 1:return o.trys.push([1,3,,4]),e=this,[4,this.userService.getCounterUserListByRole("OFFICE_COUNTER").toPromise()];case 2:return e.userList=o.sent(),this.userList.sort(this.util.dynamicSortObject("name")),this.loading=!1,[3,4];case 3:return t=o.sent(),console.log(t),[3,4];case 4:return[2]}})})},e.prototype.selectedDate=function(e){this.daterange.checkinDate=e.start._d,this.daterange.checkoutDate=e.end._d,this.daterange.label=e.label},e.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10),(new Date).setDate(this.daterange.checkinDate.getDate()-90),(new Date).setDate(this.daterange.checkinDate.getDate()+2),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},e.prototype.getServiceTypeList=function(){var e=this;this.restDataService.sendAuthenticateGetRequestObserver("api/v1/service-type-manual-bookings/list","").subscribe(function(t){e.responseModel=t,e.serviceTypes=e.responseModel.content})},e.prototype.onCreate=function(e){return ot(this,void 0,void 0,function(){var t=this;return nt(this,function(o){try{e.vat=e.vatPercent,e.itaCommission=e.commission,this.manualBookingService.create(e).subscribe(function(e){e.statusCode<400?(t.toastrService.success(e.message,"Success"),t.router.navigate(["/dashboard/manual-booking-print-ticket",e.content.id])):t.toastrService.error(e.message,"Error")})}catch(n){console.log(n)}return[2]})})},e.prototype.getManualBookingsList=function(e,t,o,n,r){var i=this;this.restDataService.sendAuthenticateGetRequestObserver("api/v1/manual-bookings/list-new?startDate="+this.util.getDateString(e)+"&endDate="+this.util.getDateString(t)+"&user="+o+"&serviceType="+n+"&serviceName="+r,null).subscribe(function(e){i.responseModel=e,i.manualBookingList=i.responseModel.content,i.filteredManualBookingList=i.manualBookingList,i.onFilterChange()})},e.prototype.onSearch=function(){this.getManualBookingsList(this.daterange.checkinDate,this.daterange.checkoutDate,this.officeCounter,this.serviceType,this.serviceName)},e.prototype.cancelBooking=function(e){var t=this;confirm("Are you sure to cancel booking id: "+e.id+"?")&&this.restDataService.sendAuthenticatePutRequestObserver("api/v1/manual-bookings/cancel/"+e.id,null,null).subscribe(function(e){e.statusCode<400?(t.toastrService.success(e.message,"Success"),t.onSearch()):t.toastrService.error(e.message,"Error")})},e.prototype.checkValue=function(e){return null==e||"undefined"===e||"null"===e?"-":e},e.prototype.changeHeaderText=function(e){1===e?this.headerText="Create Manual Booking":2===e&&(this.headerText="Manual Booking Report")},e.\u0275fac=function(t){return new(t||e)(d.Lb(De.a),d.Lb(a.a),d.Lb(Re.a),d.Lb(r.a),d.Lb(f.b),d.Lb(m.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-manual-booking"]],decls:15,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem","click"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[3,"create"],[1,"row"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-auto"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["id","serviceType",1,"form-control",3,"ngModel","ngModelChange"],["class","col-auto",4,"ngIf"],["id","status",1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",2,"margin-left","20px",3,"click"],[1,"row","mb-5"],["class","col text-center",4,"ngIf"],["class","col-sm-12",4,"ngIf"],[3,"value"],["id","serviceName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","text-center"],[1,"col-sm-12"],[1,"table","table-hover","table-responsive-sm","border"],[2,"background-color","#f8f9fa"],["colspan","12"],[1,"col"],[1,"mr-auto"],[1,"pl-3"],[4,"ngFor","ngForOf"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-warning","disabled","disabled",4,"ngIf"],["type","button","class","btn btn-success","target","_blank",3,"routerLink",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["disabled","disabled",1,"btn","btn-warning"],["type","button","target","_blank",1,"btn","btn-success",3,"routerLink"]],template:function(e,t){if(1&e&&(d.Qb(0,"div",0),d.Qb(1,"span",1),d.Lc(2),d.Pb(),d.Pb(),d.Qb(3,"div",0),d.Qb(4,"ul",2,3),d.bc("activeIdChange",function(e){return t.activeNav=e}),d.Qb(6,"li",4),d.bc("click",function(){return t.changeHeaderText(1)}),d.Qb(7,"a",5),d.Lc(8,"Create"),d.Pb(),d.Jc(9,rt,1,0,"ng-template",6),d.Pb(),d.Qb(10,"li",4),d.bc("click",function(){return t.changeHeaderText(2)}),d.Qb(11,"a",5),d.Lc(12,"List"),d.Pb(),d.Jc(13,gt,43,9,"ng-template",6),d.Pb(),d.Pb(),d.Mb(14,"div",7),d.Pb()),2&e){var o=d.xc(5);d.zb(2),d.Mc(t.headerText),d.zb(2),d.mc("activeId",t.activeNav),d.zb(2),d.mc("ngbNavItem",1),d.zb(4),d.mc("ngbNavItem",2),d.zb(4),d.mc("ngbNavOutlet",o)}},directives:[u.n,u.p,u.q,u.o,u.s,tt,p.b,L.v,L.n,L.q,L.r,L.x,g.o,g.p,v.a,m.c],styles:[".btn-web[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]{color:#fff;background-color:#0e893f}.hotel-button-reverse[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]:hover{background-color:#f7a71a}.hotel-button-reverse[_ngcontent-%COMP%]{color:#fff}.hotel-button-reverse[_ngcontent-%COMP%]:hover{background-color:#0e893f}.container[_ngcontent-%COMP%]{max-width:100%!important}.form-head[_ngcontent-%COMP%], td.form-head[_ngcontent-%COMP%]{width:inherit;font-size:20px!important;line-height:22px;padding:5px;color:#fff;background-color:#0e893f}.form-head-link[_ngcontent-%COMP%], td.form-head-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-size:16px}.col-form-label-sm[_ngcontent-%COMP%]{padding:0;font-size:12px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0;border-top:1px solid #dee2e6}"]}),e}(),pt=o("VZT5"),vt=function(){return(vt=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function yt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"app-own-hotel-list",6),d.bc("hotel",function(e){return d.Ac(o),d.ec().onHotel(e)}),d.Pb()}}function Pt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",7),d.Qb(1,"div",8),d.Qb(2,"div",9),d.Qb(3,"div",10),d.bc("click",function(){return d.Ac(o),d.xc(7).toggle()}),d.Qb(4,"div",11),d.Mb(5,"i",12),d.Pb(),d.Pb(),d.Qb(6,"input",13,14),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().dd=e})("dateSelect",function(){d.Ac(o);var e=d.ec();return e.getAdminBookingList(e.hotelId,e.dd)})("click",function(){return d.Ac(o),d.xc(7).toggle()}),d.Pb(),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec();d.zb(6),d.mc("ngModel",n.dd)("minDate",n.minDate)("maxDate",n.maxDate)}}function kt(e,t){if(1&e&&(d.Qb(0,"div",15),d.Qb(1,"div",16),d.Qb(2,"h4"),d.Lc(3),d.Pb(),d.Pb(),d.Pb()),2&e){var o=d.ec();d.zb(3),d.Mc(o.hotel.name)}}var Qt=function(e,t,o,n,r){return{"bg-lightgray":e,"bg-yellow":t,"bg-reserved":o,"bg-red":n,"bg-white":r}};function St(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",17),d.Qb(1,"div",18),d.bc("click",function(){d.Ac(o);var e=t.$implicit,n=d.ec();return n.onRoomClick(e.id,e.bookingId,n.dd)}),d.Lc(2),d.Mb(3,"br"),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit;d.zb(1),d.mc("ngClass",d.uc(2,Qt,"ROOM_BLOCKED"===n.status,"ROOM_BOOKED"===n.status,"ROOM_RESERVED"===n.status,"ROOM_SOLD"===n.status,"ROOM_FREE"===n.status)),d.zb(1),d.Nc(" ",n.roomNumber," ")}}function Mt(e,t){1&e&&(d.Qb(0,"div",19),d.Qb(1,"div",20),d.Mb(2,"div",21),d.Lc(3," Blocked "),d.Pb(),d.Qb(4,"div",20),d.Mb(5,"div",22),d.Lc(6," Reserved "),d.Pb(),d.Qb(7,"div",20),d.Mb(8,"div",23),d.Lc(9," Sold "),d.Pb(),d.Qb(10,"div",20),d.Mb(11,"div",24),d.Lc(12," Free "),d.Pb(),d.Pb())}var Ct=function(){function e(e){this.roomService=e,this.roomSelected=new d.n,this.loading=!1,this.showRoomList=!1}return e.prototype.ngOnChanges=function(e){e.reload&&this.dd&&this.getAdminBookingList(this.hotelId,this.dd)},e.prototype.ngOnInit=function(){var e=new Date;this.dd={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.minDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()-60},this.maxDate={year:e.getFullYear(),month:e.getMonth()+4,day:e.getDate()},this.maxDate.month>12&&(this.maxDate.year+=1,this.maxDate.month-=12)},e.prototype.getAdminBookingList=function(e,t){return o=this,void 0,r=function(){var o=this;return function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,this.roomService.getAdminBookingList(e,this.makeDateString(t)).subscribe(function(e){o.roomList=e,o.loading=!1})];case 1:return n.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(e,t){function i(e){try{a(r.next(e))}catch(o){t(o)}}function c(e){try{a(r.throw(e))}catch(o){t(o)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n(function(e){e(o)})).then(i,c)}a((r=r.apply(o,[])).next())});var o,n,r},e.prototype.onRoomClick=function(e,t,o){if(t>0){var n=this.roomList.find(function(t){return t.id===e});this.status=n.status;var r=vt({date:o.year+"-"+(o.month+1)+"-"+o.day},n);this.roomSelected.emit(r)}},e.prototype.onHotel=function(e){this.hotelId=e.id,this.hotel=e,this.getAdminBookingList(e.id,this.dd),this.showRoomList=!0},e.prototype.makeDateString=function(e){return e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)},e.\u0275fac=function(t){return new(t||e)(d.Lb(b.a))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-service-room-status-date"]],inputs:{reload:"reload"},outputs:{roomSelected:"roomSelected"},features:[d.xb],decls:6,vars:5,consts:[[3,"hotel",4,"ngIf"],["class","row my-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","m-0","mb-3"],["class","col-md-2 col-3 p-0",4,"ngFor","ngForOf"],["class","row border m-0 py-2",4,"ngIf"],[3,"hotel"],[1,"row","my-2"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"row"],[1,"col-12"],[1,"col-md-2","col-3","p-0"],[1,"room-map-box",3,"ngClass","click"],[1,"row","border","m-0","py-2"],[1,"col-3"],[1,"foo","bg-lightgray"],[1,"foo","bg-reserved"],[1,"foo","bg-red"],[1,"foo","bg-white"]],template:function(e,t){1&e&&(d.Jc(0,yt,1,0,"app-own-hotel-list",0),d.Jc(1,Pt,8,3,"div",1),d.Jc(2,kt,4,1,"div",2),d.Qb(3,"div",3),d.Jc(4,St,4,8,"div",4),d.Pb(),d.Jc(5,Mt,13,0,"div",5)),2&e&&(d.mc("ngIf",!t.showRoomList),d.zb(1),d.mc("ngIf",t.showRoomList),d.zb(1),d.mc("ngIf",t.showRoomList),d.zb(2),d.mc("ngForOf",t.roomList),d.zb(1),d.mc("ngIf",null==t.roomList?null:t.roomList.length))},directives:[g.p,g.o,pt.a,u.k,L.b,L.n,L.q,g.n],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin:10px 10px 0 0;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-reserved[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important;border-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important;border-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),e}(),Lt=function(){return(Lt=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ot=function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},At=function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function Dt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"app-own-hotel-list",15),d.bc("hotel",function(e){return d.Ac(o),d.ec(2).onHotel(e)}),d.Pb()}}function Rt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"admin-available-room-list",16),d.bc("showHotels",function(e){return d.Ac(o),d.ec(2).onShowHotels(e)})("roomSelected",function(e){return d.Ac(o),d.ec(2).onRoomSelect(e)}),d.Pb()}if(2&e){var n=d.ec(2);d.mc("hotel",n.hotel)("unSelect",n.unSelect)("reloadRoomList",n.reloadRoomList)}}function It(e,t){if(1&e){var o=d.Rb();d.Qb(0,"a",19),d.bc("click",function(){return d.Ac(o),d.ec(3).onModeChange("Reserve")}),d.Lc(1,"Reserve"),d.Pb()}if(2&e){var n=d.ec(3);d.mc("ngClass","Reserve"==n.mode?"btn-primary":"btn-light")}}function wt(e,t){1&e&&(d.Qb(0,"th",42),d.Lc(1," Ref. fee "),d.Pb())}function xt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"input",57),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().$implicit.discount=e})("ngModelChange",function(){d.Ac(o);var e=d.ec().$implicit;return d.ec(4).updatePayable(e)}),d.Pb()}if(2&e){var n=d.ec().$implicit;d.mc("ngModel",n.discount)}}function Bt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"input",58),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().$implicit.discount=e})("ngModelChange",function(){d.Ac(o);var e=d.ec().$implicit;return d.ec(4).updatePayable(e)}),d.Pb()}if(2&e){var n=d.ec().$implicit;d.mc("ngModel",n.discount)}}function Nt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"td"),d.Qb(1,"input",59),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().$implicit.commission=e}),d.Pb(),d.Pb()}if(2&e){var n=d.ec().$implicit;d.zb(1),d.mc("ngModel",n.commission)}}function zt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"tr"),d.Qb(1,"td"),d.Lc(2),d.Pb(),d.Qb(3,"td"),d.Lc(4),d.Pb(),d.Qb(5,"td",42),d.Lc(6),d.Pb(),d.Qb(7,"td",43),d.Lc(8),d.Pb(),d.Qb(9,"td"),d.Jc(10,xt,1,1,"input",52),d.Jc(11,Bt,1,1,"input",53),d.Pb(),d.Qb(12,"td",42),d.Lc(13),d.fc(14,"number"),d.Pb(),d.Qb(15,"td",43),d.Qb(16,"input",54),d.bc("ngModelChange",function(e){return d.Ac(o),t.$implicit.advance=e}),d.Pb(),d.Pb(),d.Qb(17,"td",43),d.Lc(18),d.Pb(),d.Jc(19,Nt,2,1,"td",39),d.Qb(20,"td"),d.Qb(21,"button",55),d.bc("click",function(){d.Ac(o);var e=t.index;return d.ec(4).onRemove(e)}),d.Mb(22,"i",56),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit,r=d.ec(4);d.zb(2),d.Mc(n.date),d.zb(2),d.Oc("",n.room.roomNumber," [",n.room.category.name,"]"),d.zb(2),d.Mc(n.room.price),d.zb(2),d.Nc("",n.room.vatService," %"),d.zb(2),d.mc("ngIf",!r.authService.hasRole("SERVICE_AGENT_HOTEL")&&!r.authService.hasRole("B2B_AGENT")&&!r.authService.hasRole("OFFICE_AGENT")),d.zb(1),d.mc("ngIf",r.authService.hasRole("SERVICE_AGENT_HOTEL")||r.authService.hasRole("B2B_AGENT")||r.authService.hasRole("OFFICE_AGENT")),d.zb(2),d.Nc(" ",d.hc(14,11,n.payablePrice,"1.1-2")," "),d.zb(3),d.mc("ngModel",n.advance),d.zb(2),d.Mc(null==n?null:n.due),d.zb(1),d.mc("ngIf",(null==r.refBy?null:r.refBy.length)>0)}}function Tt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",23),d.Qb(1,"input",60),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(4).booking.complementaryBreakfast=e}),d.Pb(),d.Qb(2,"label",61),d.Lc(3,"Complementary Breakfast"),d.Pb(),d.Pb()}if(2&e){var n=d.ec(4);d.zb(1),d.mc("ngModel",n.booking.complementaryBreakfast)}}function Et(e,t){1&e&&d.Mb(0,"td")}function _t(e,t){1&e&&d.Mb(0,"td")}function Ft(e,t){1&e&&d.Mb(0,"td")}function Jt(e,t){1&e&&d.Mb(0,"td")}function Vt(e,t){1&e&&d.Mb(0,"td")}function Gt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"table",41),d.Qb(1,"thead"),d.Qb(2,"tr"),d.Qb(3,"th"),d.Lc(4,"Date"),d.Pb(),d.Qb(5,"th"),d.Lc(6,"Room No."),d.Pb(),d.Qb(7,"th",42),d.Lc(8,"Rent"),d.Pb(),d.Qb(9,"th",43),d.Lc(10,"Vat"),d.Pb(),d.Qb(11,"th",42),d.Lc(12,"Discount"),d.Pb(),d.Qb(13,"th",42),d.Lc(14,"Payable"),d.Pb(),d.Qb(15,"th",43),d.Lc(16,"Advance"),d.Pb(),d.Qb(17,"th",43),d.Lc(18,"Due"),d.Pb(),d.Jc(19,wt,2,0,"th",44),d.Mb(20,"th"),d.Pb(),d.Pb(),d.Qb(21,"tbody"),d.Jc(22,zt,23,14,"tr",45),d.Pb(),d.Qb(23,"tfoot"),d.Qb(24,"tr"),d.Qb(25,"td",46),d.Jc(26,Tt,4,1,"div",47),d.Pb(),d.Qb(27,"th",48),d.Lc(28,"Vat and Service Charge (%)"),d.Pb(),d.Qb(29,"th"),d.Qb(30,"input",49),d.bc("change",function(){return d.Ac(o),d.ec(3).getTotalPayable()})("ngModelChange",function(e){return d.Ac(o),d.ec(3).editedVatAndServiceCharge=e}),d.Pb(),d.Pb(),d.Qb(31,"th",46),d.Lc(32),d.Pb(),d.Mb(33,"td"),d.Jc(34,Et,1,0,"td",39),d.Pb(),d.Qb(35,"tr"),d.Qb(36,"th",50),d.Lc(37,"System Adjustment "),d.Pb(),d.Qb(38,"th",48),d.Lc(39),d.Pb(),d.Mb(40,"td"),d.Jc(41,_t,1,0,"td",39),d.Pb(),d.Qb(42,"tr"),d.Qb(43,"th",50),d.Lc(44,"Total "),d.Pb(),d.Qb(45,"th",48),d.Lc(46),d.Pb(),d.Mb(47,"td"),d.Jc(48,Ft,1,0,"td",39),d.Pb(),d.Qb(49,"tr"),d.Qb(50,"th",50),d.Lc(51,"Total Advance"),d.Pb(),d.Qb(52,"th",48),d.Qb(53,"input",51),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(3).booking.totalAdvance=e})("ngModelChange",function(){return d.Ac(o),d.ec(3).updateSubAdvance()}),d.Pb(),d.Pb(),d.Mb(54,"td"),d.Jc(55,Jt,1,0,"td",39),d.Pb(),d.Qb(56,"tr"),d.Qb(57,"th",50),d.Lc(58,"Total due"),d.Pb(),d.Qb(59,"th",48),d.Lc(60),d.Pb(),d.Mb(61,"td"),d.Jc(62,Vt,1,0,"td",39),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec(3);d.zb(19),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(3),d.mc("ngForOf",n.subBookings),d.zb(4),d.mc("ngIf",null==n.hotel||null==n.hotel.facilities?null:n.hotel.facilities.complementaryBreakfast),d.zb(4),d.mc("ngModel",n.editedVatAndServiceCharge),d.zb(2),d.Nc("",n.booking.totalVatService," BDT"),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.Nc("",n.systemAdjustment(null==n.booking?null:n.booking.total)," BDT"),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.Nc("",n.round(null==n.booking?null:n.booking.total)," BDT"),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.mc("ngModel",n.booking.totalAdvance),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0),d.zb(5),d.Nc("",n.getTotalDues()," BDT"),d.zb(2),d.mc("ngIf",(null==n.refBy?null:n.refBy.length)>0)}}function Ht(e,t){if(1&e&&(d.Qb(0,"option",71),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.methodName),d.zb(1),d.Nc(" ",o.methodName," ")}}function qt(e,t){if(1&e){var o=d.Rb();d.Ob(0),d.Qb(1,"h4"),d.Lc(2,"Payment Info"),d.Pb(),d.Qb(3,"div",62),d.Qb(4,"div",63),d.Qb(5,"label",64),d.Lc(6,"Payment Method"),d.Pb(),d.Qb(7,"select",65),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(3).paymentMethod=e}),d.Jc(8,Ht,2,2,"option",66),d.Pb(),d.Pb(),d.Qb(9,"div",63),d.Qb(10,"label",67),d.Lc(11,"Reference"),d.Pb(),d.Qb(12,"input",68),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(3).booking.paymentRef=e}),d.Pb(),d.Pb(),d.Qb(13,"div",63),d.Qb(14,"label",69),d.Lc(15,"Note"),d.Pb(),d.Qb(16,"input",70),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(3).booking.note=e}),d.Pb(),d.Pb(),d.Pb(),d.Nb()}if(2&e){var n=d.ec(3);d.zb(7),d.mc("ngModel",n.paymentMethod),d.zb(1),d.mc("ngForOf",n.paymentMethods),d.zb(4),d.mc("ngModel",n.booking.paymentRef),d.zb(4),d.mc("ngModel",n.booking.note)}}function jt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"admin-user-form",72),d.bc("user",function(e){return d.Ac(o),d.ec(3).onCreateUser(e)}),d.Pb()}}function $t(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",17),d.Qb(1,"div",18),d.Qb(2,"a",19),d.bc("click",function(){return d.Ac(o),d.ec(2).onModeChange("Sell")}),d.Lc(3,"Sell"),d.Pb(),d.Jc(4,It,2,1,"a",20),d.Pb(),d.Qb(5,"h3",21),d.Lc(6,"New Booking"),d.Pb(),d.Qb(7,"div",22),d.Qb(8,"div",23),d.Qb(9,"input",24),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).sendHotelSMS=e}),d.Pb(),d.Qb(10,"label",25),d.Lc(11,"Send Hotel SMS"),d.Pb(),d.Pb(),d.Qb(12,"div",26),d.Qb(13,"input",27),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).sendCustomerSMS=e}),d.Pb(),d.Qb(14,"label",28),d.Lc(15,"Send Guest SMS"),d.Pb(),d.Pb(),d.Qb(16,"div",29),d.Qb(17,"input",30),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).changeSimilar=e}),d.Pb(),d.Qb(18,"label",31),d.Lc(19," Auto Change Similar Category "),d.Pb(),d.Pb(),d.Qb(20,"div",32),d.Qb(21,"div",33),d.Qb(22,"span",34),d.Lc(23,"Ref. By"),d.Pb(),d.Pb(),d.Qb(24,"input",35),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(2).refBy=e}),d.Pb(),d.Pb(),d.Pb(),d.Qb(25,"div",36),d.Qb(26,"div",37),d.Qb(27,"h5"),d.Lc(28,"Booking List"),d.Pb(),d.Pb(),d.Pb(),d.Jc(29,Gt,63,14,"table",38),d.Jc(30,qt,17,4,"ng-container",39),d.Jc(31,jt,1,0,"admin-user-form",40),d.Pb()}if(2&e){var n=d.ec(2);d.zb(2),d.mc("ngClass","Sell"==n.mode?"btn-primary":"btn-light"),d.zb(2),d.mc("ngIf",!(n.authService.hasRole("SERVICE_AGENT_HOTEL")||n.authService.hasRole("B2B_AGENT")||n.authService.hasRole("B2B_COUNTER")||n.authService.hasRole("OFFICE_AGENT"))),d.zb(5),d.mc("ngModel",n.sendHotelSMS),d.zb(4),d.mc("ngModel",n.sendCustomerSMS),d.zb(4),d.mc("ngModel",n.changeSimilar),d.zb(7),d.mc("ngModel",n.refBy),d.zb(5),d.mc("ngIf",!n.sendingInfo)("ngIfElse",n.sending),d.zb(1),d.mc("ngIf",!n.sendingInfo),d.zb(1),d.mc("ngIf",!n.sendingInfo)}}function Ut(e,t){if(1&e&&(d.Qb(0,"div",10),d.Qb(1,"div",11),d.Jc(2,Dt,1,0,"app-own-hotel-list",12),d.Jc(3,Rt,1,3,"admin-available-room-list",13),d.Pb(),d.Jc(4,$t,32,10,"div",14),d.Pb()),2&e){var o=d.ec();d.zb(2),d.mc("ngIf",!o.showRoomList),d.zb(1),d.mc("ngIf",o.showRoomList),d.zb(1),d.mc("ngIf",o.subBookings.length>0)}}function Kt(e,t){if(1&e&&d.Mb(0,"booking-info",80),2&e){var o=d.ec(4);d.mc("booking",o.reservation)("systemShow",!0)}}function Yt(e,t){if(1&e&&(d.Qb(0,"option",71),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.methodName),d.zb(1),d.Nc(" ",o.methodName," ")}}function Wt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",85),d.Qb(1,"h4",86),d.Lc(2,"Cancel Booking"),d.Pb(),d.Qb(3,"button",87),d.bc("click",function(){return t.$implicit.dismiss("Cross click")}),d.Mb(4,"i",88),d.Pb(),d.Pb(),d.Qb(5,"div",89),d.Qb(6,"form"),d.Qb(7,"div",90),d.Qb(8,"label",91),d.Lc(9,"Cancel Fee *"),d.Pb(),d.Qb(10,"div",92),d.Qb(11,"input",93),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(5).cancelFee=e}),d.Pb(),d.Pb(),d.Pb(),d.Qb(12,"div",90),d.Qb(13,"label",94),d.Lc(14,"Payment Method *"),d.Pb(),d.Qb(15,"div",92),d.Qb(16,"select",95),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(5).paymentMethodCancelFee=e}),d.Jc(17,Yt,2,2,"option",66),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(18,"div",96),d.Qb(19,"button",97),d.bc("click",function(){d.Ac(o);var e=t.$implicit,n=d.ec(5);return e.close(n.reservation.id)}),d.Lc(20,"Confirm"),d.Pb(),d.Pb()}if(2&e){var n=d.ec(5);d.zb(11),d.mc("ngModel",n.cancelFee),d.zb(5),d.mc("ngModel",n.paymentMethodCancelFee),d.zb(1),d.mc("ngForOf",n.paymentMethods)}}function Xt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",81),d.Qb(1,"a",82),d.Mb(2,"i",83),d.Lc(3," Print"),d.Pb(),d.Jc(4,Wt,21,3,"ng-template",null,84,d.Kc),d.Qb(6,"button",55),d.bc("click",function(){d.Ac(o);var e=d.xc(5);return d.ec(4).open(e)}),d.Lc(7,"Cancel Booking"),d.Pb(),d.Mb(8,"hr"),d.Pb()}if(2&e){var n=d.ec(4);d.zb(1),d.oc("routerLink","/dashboard/printTicket/",n.reservation.id,"")}}function Zt(e,t){if(1&e){var o=d.Rb();d.Qb(0,"booking-form",98),d.bc("onBooking",function(e){return d.Ac(o),d.ec(4).onConfirmRerservation(e)})("cancelBooking",function(e){return d.Ac(o),d.ec(4).onCancelRerservation(e)}),d.Pb()}if(2&e){var n=d.ec(4);d.mc("booking",n.reservation)}}var eo=function(e,t){return{"bg-danger":e,"bg-reserved":t}};function to(e,t){if(1&e&&(d.Qb(0,"div",17),d.Qb(1,"div",76),d.Lc(2),d.Pb(),d.Jc(3,Kt,1,2,"booking-info",77),d.Jc(4,Xt,9,1,"div",78),d.Jc(5,Zt,1,1,"booking-form",79),d.Pb()),2&e){var o=d.ec(3);d.zb(1),d.mc("ngClass",d.rc(5,eo,"ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus),"ROOM_RESERVED"==(null==o.reservation?null:o.reservation.bookingStatus))),d.zb(1),d.Nc(" ","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus)?"Booking Details":"Reservation Details"," "),d.zb(1),d.mc("ngIf","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus)),d.zb(1),d.mc("ngIf","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus)),d.zb(1),d.mc("ngIf","ROOM_RESERVED"==(null==o.reservation?null:o.reservation.bookingStatus))}}function oo(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",73),d.Qb(1,"div",74),d.Qb(2,"app-service-room-status-date",75),d.bc("roomSelected",function(e){return d.Ac(o),d.ec(2).onRoomSelectFromRoomStatus(e)}),d.Pb(),d.Pb(),d.Jc(3,to,6,8,"div",14),d.Pb()}if(2&e){var n=d.ec(2);d.zb(3),d.mc("ngIf",n.reservation)}}function no(e,t){1&e&&(d.Qb(0,"li",5),d.Qb(1,"a",6),d.Lc(2,"Room status"),d.Pb(),d.Jc(3,oo,4,1,"ng-template",7),d.Pb()),2&e&&d.mc("ngbNavItem",2)}var ro=function(){function e(e,t,o,n,r,i,c,a,s){this.utilService=e,this.bookingService=t,this.roomService=o,this.dataSource=n,this.router=r,this.authService=i,this.modalService=c,this.userGlobal=a,this.toastrService=s,this.subBookings=[],this.reloadRoomList=!1,this.showRoomList=!1,this.sendingInfo=!1,this.changeSimilar=!0,this.sendCustomerSMS=!0,this.sendHotelSMS=!1,this.editedVatAndServiceCharge=0,this.message="",this.active=1,this.cancelFee=0,this.mode="Sell",this.paymentMethod="CASH",this.closeResult="",this.paymentMethodCancelFee="CASH"}return e.prototype.ngOnInit=function(){this.booking={total:0,totalAdvance:0,totalDue:0},this.getPaymentMethodList()},e.prototype.getPaymentMethodList=function(){var e=this;this.dataSource.sendAuthenticateGetRequestObserver("api/v1/payment-methods/list","").subscribe(function(t){e.responseModel=t,e.paymentMethods=e.responseModel.content})},e.prototype.round=function(e){if(e<=100)return e>=75?100:e>=50||e>=25?50:0;var t=e%100;return t<25?e-t:t<74?e-t+50:e-t+100},e.prototype.systemAdjustment=function(e){if(e<=100)return e>=75?(this.booking.systemAdjustment=e-75,"+ "+(e-75)):e>=50?(this.booking.systemAdjustment=-(e-50),"- "+(e-50)):e>=25?(this.booking.systemAdjustment=e-25,"+ "+(e-25)):(this.booking.systemAdjustment=-(25-e),"- "+(25-e));var t=e%100;return t<25?(this.booking.systemAdjustment=-t,"-"+t):t<=50?(this.booking.systemAdjustment=50-t,"+"+(50-t)):t<74?(this.booking.systemAdjustment=-(t-50),"-"+(t-50)):(this.booking.systemAdjustment=100-t,"+"+(100-t))},e.prototype.onHotel=function(e){this.subBookings=[],this.hotel=e,this.hotelId=e.id,this.showRoomList=!0,this.booking.complementaryBreakfast=!!this.hotel.facilities.complementaryBreakfast},e.prototype.onShowHotels=function(e){this.showRoomList=!e,this.subBookings=[],localStorage.removeItem("hotelId")},e.prototype.onRoomSelect=function(e){var t=this;this.utilService.getDatesBetween(e.checkInDate,e.checkOutDate).forEach(function(o){var n=new c(o,e.room);t.roomService.getRoomByDate(n.room.id,o).then(function(e){n.discount=e.onDateDiscount,n.payablePrice=n.room.price-n.discount,t.editedVatAndServiceCharge=n.room.vatService,t.isContain(n)||(t.subBookings.push(n),t.getTotalPayable(),t.subBookings.sort(t.utilService.dynamicSortObject("date")),t.subBookings.sort(t.utilService.dynamicSortObject("room.roomNumber")))})})},e.prototype.onModeChange=function(e){this.mode=e},e.prototype.onCreateUser=function(e){var t=Lt({id:0},e);this.createBooking(t)},e.prototype.createBooking=function(e){var t=this,o=new i.a(e,this.subBookings),n=Lt({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue,refBy:this.refBy,complementaryBreakfast:this.booking.complementaryBreakfast,paymentMethod:this.booking.paymentMethod,paymentRef:this.booking.paymentRef,sendCustomerSMS:this.sendCustomerSMS,sendHotelSMS:this.sendHotelSMS},o);switch(n.paymentMethod=this.paymentMethod,this.message="generating booking",this.sendingInfo=!0,this.mode){case"Sell":this.bookingService.createAdminBooking(n).subscribe(function(e){t.message="Booking generated, Thank you.",t.sendingInfo=!1,t.userGlobal.balance=e.createdBy.balance,t.userGlobal.payable=e.createdBy.payable,t.booking.subBookingList=[],t.subBookings=[],t.ngOnInit(),t.reloadRoomList=!t.reloadRoomList,t.toastrService.info("Booking generated, Thank you.","Success!"),t.router.navigate(["/dashboard/printTicket",e.id])},function(e){t.toastrService.error(e.error,"Error")});break;case"Reserve":this.bookingService.reserveAdminBooking(n).subscribe(function(e){t.message="Booking complete, Thank you.",t.sendingInfo=!1,t.reloadRoomList=!t.reloadRoomList,t.ngOnInit(),t.toastrService.info("Booking complete, Thank you.","Success!"),t.router.navigate(["/dashboard/printTicket",e.id])},function(e){t.toastrService.error(e.error,"Error")})}},e.prototype.isContain=function(e){return this.subBookings.find(function(t){return t.room.id===e.room.id&&t.date===e.date&&t.room.category.hotel.id===e.room.category.hotel.id})},e.prototype.onRemove=function(e){var t=this.subBookings[e];this.unSelect=t.room.id,t.room.available=!0,t.room.selected=!1,this.subBookings.splice(e,1),this.subBookings.length>0&&(this.getTotalPayable(),this.getTotalDues())},e.prototype.onRoomSelectFromRoomStatus=function(e){return Ot(this,void 0,void 0,function(){var t=this;return At(this,function(o){switch(o.label){case 0:return[4,this.bookingService.getAdminBooking(e.bookingId).subscribe(function(e){t.reservation=e})];case 1:return o.sent(),[2]}})})},e.prototype.onConfirmRerservation=function(e){return Ot(this,void 0,void 0,function(){var t=this;return At(this,function(o){switch(o.label){case 0:return confirm("Are you sure to confirm reservation with id : "+e.id)?(e.createdBy=null,[4,this.bookingService.confirmAdminReservation(e).subscribe(function(e){t.reservation=null,t.toastrService.info("Confirm Reservation Done.","Success!")})]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.onCancelRerservation=function(e){return Ot(this,void 0,void 0,function(){var t=this;return At(this,function(o){switch(o.label){case 0:return this.cancelFee<0?(this.toastrService.error("Cancel fee can not be negative","Error"),[2]):confirm("Are you sure to cancel reservation with id : "+e)?[4,this.bookingService.cancelAdminReservation(e,this.cancelFee).subscribe(function(e){t.reservation=null,t.toastrService.info("Cancel Reservation done.","Success!"),t.active=1})]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.onCancelBooking=function(e){return Ot(this,void 0,void 0,function(){var t=this;return At(this,function(o){return this.cancelFee<0?(this.toastrService.error("Cancel fee can not be negative","Error"),[2]):(this.bookingService.cancelAdminBooking(e,this.cancelFee,this.paymentMethodCancelFee).subscribe(function(e){var o=e;t.userGlobal.balance=o.balance,t.userGlobal.payable=o.payable,t.reservation=null,t.toastrService.info("Cancel Booking done.","Success!"),t.active=1}),[2])})})},e.prototype.updateSubAdvance=function(){var e,t;return Ot(this,void 0,void 0,function(){var o,n;return At(this,function(r){return(o=this.round((null===(e=this.booking)||void 0===e?void 0:e.total)+(null===(t=this.booking)||void 0===t?void 0:t.totalVatService)))<this.booking.totalAdvance&&(this.booking.totalAdvance=o),this.subBookings.forEach((n=this.booking.totalAdvance)<=0?function(e){e.advance=0}:function(e){e.advance=e.payablePrice<=n?e.payablePrice:n,n-=e.advance,e.payablePrice=Math.round((e.room.price-e.discount)*(1+e.room.vatService/100)),e.due=e.payablePrice-e.advance}),this.booking.totalDue=o-this.booking.totalAdvance,[2]})})},e.prototype.getTotalPayable=function(){var e=0;return this.subBookings.forEach(function(t){e+=t.payablePrice}),this.booking.totalVatService=e*this.editedVatAndServiceCharge/100,this.booking.total=e+this.booking.totalVatService,this.booking.total},e.prototype.getTotalDues=function(){var e,t=this.round(null===(e=this.booking)||void 0===e?void 0:e.total)-this.booking.totalAdvance;return this.booking.totalDue=t,t},e.prototype.getMySells=function(){return Ot(this,void 0,void 0,function(){return At(this,function(e){return[2]})})},e.prototype.updatePayable=function(e){this.changeSimilar?this.subBookings.forEach(function(t){e.room.category.id===t.room.category.id&&(t.discount=e.discount,t.discount>t.room.price&&(t.discount=t.room.price),t.payablePrice=t.room.price-t.discount)}):(e.discount>e.room.price&&(e.discount=e.room.price),e.payablePrice=e.room.price-e.discount),this.getTotalPayable()},e.prototype.open=function(e){var t=this;this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(function(e){t.onCancelBooking(e)},function(e){t.closeResult="Dismissed "+t.getDismissReason(e)})},e.prototype.getDismissReason=function(e){return e===u.a.ESC?"by pressing ESC":e===u.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: "+e},e.\u0275fac=function(t){return new(t||e)(d.Lb(r.a),d.Lb(n.a),d.Lb(b.a),d.Lb(a.a),d.Lb(m.b),d.Lb(s.a),d.Lb(u.l),d.Lb(l.a),d.Lb(f.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-service-sell-room"]],decls:12,vars:4,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavItem",4,"ngIf"],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","m-0","py-2"],[1,"col-md-4","p-0"],[3,"hotel",4,"ngIf"],[3,"hotel","unSelect","reloadRoomList","showHotels","roomSelected",4,"ngIf"],["class","col-md-8",4,"ngIf"],[3,"hotel"],[3,"hotel","unSelect","reloadRoomList","showHotels","roomSelected"],[1,"col-md-8"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],["type","button","class","btn btn-sm",3,"ngClass","click",4,"ngIf"],[1,"text-center"],[1,"form-inline"],[1,"form-group","form-check"],["type","checkbox","id","sendHotelSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendHotelSMS",1,"form-check-label"],[1,"form-group","form-check","mx-4"],["type","checkbox","id","sendCustomerSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendCustomerSMS",1,"form-check-label"],[1,"form-check"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"ml-auto","input-group","input-group-sm","mb-3"],[1,"input-group-prepend"],["id","inputGroup-sizing-sm",1,"input-group-text"],["type","text","id","refBy",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-12","bg-primary","text-white","text-center"],["class","table mb-4 border table-hover table-responsive-sm",4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"user",4,"ngIf"],[1,"table","mb-4","border","table-hover","table-responsive-sm"],[1,"text-right"],[1,"text-right",2,"display","none"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",1,"text-right"],["class","form-group form-check",4,"ngIf"],["colspan","3",1,"text-right"],["type","number","max","0","maxlength","2","placeholder","Edit in %",1,"form-control","sized-form","float-right","text-right",3,"ngModel","change","ngModelChange"],["colspan","5",1,"text-right"],["type","number","min","0","name","totalDiscount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],["type","number","class","form-control sized-form float-right text-right","name","discount",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control sized-form float-right text-right","readonly","readonly","name","discount",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","name","advance",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","discount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],["type","number","readonly","readonly","name","discount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],["type","number","name","commission",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],["type","checkbox","id","complementaryBreakfast",1,"form-check-input",3,"ngModel","ngModelChange"],["for","complementaryBreakfast",1,"form-check-label"],[1,"form-row"],[1,"form-group","col-md-3"],["for","paymentMethod",1,"col-form-label","col-form-label-sm"],["id","paymentMethod",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","reference",1,"col-form-label","col-form-label-sm"],["type","text","id","reference",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","note",1,"col-form-label","col-form-label-sm"],["type","text","id","note",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value"],[3,"user"],[1,"mt-2","row"],[1,"col-md-4"],[3,"roomSelected"],[1,"p-3","mb-2","text-white",3,"ngClass"],[3,"booking","systemShow",4,"ngIf"],["class","d-flex flex-row-reverse bd-highlight mb-4",4,"ngIf"],[3,"booking","onBooking","cancelBooking",4,"ngIf"],[3,"booking","systemShow"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-sm","btn-primary","mx-1",3,"routerLink"],[1,"fa","fa-print"],["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",2,"color","red",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"modal-body"],[1,"mb-3"],["for","cancelFee"],[1,"input-group"],["type","number","id","cancelFee","placeholder","Cancel Fee",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","paymentMethod"],["id","paymentMethodCancelFee",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"booking","onBooking","cancelBooking"]],template:function(e,t){if(1&e&&(d.Qb(0,"div",0),d.Qb(1,"span",1),d.Lc(2,"Sell room"),d.Pb(),d.Pb(),d.Qb(3,"div",2),d.Qb(4,"ul",3,4),d.bc("activeIdChange",function(e){return t.active=e}),d.Qb(6,"li",5),d.Qb(7,"a",6),d.Lc(8,"Sell room"),d.Pb(),d.Jc(9,Ut,5,3,"ng-template",7),d.Pb(),d.Jc(10,no,4,1,"li",8),d.Pb(),d.Mb(11,"div",9),d.Pb()),2&e){var o=d.xc(5);d.zb(4),d.mc("activeId",t.active),d.zb(2),d.mc("ngbNavItem",1),d.zb(4),d.mc("ngIf",t.authService.hasRole("B2B_COUNTER")||t.authService.hasRole("ROLE_ADMIN")||t.authService.hasRole("OFFICE_COUNTER")||t.authService.hasRole("SERVICE_COUNTER_HOTEL")),d.zb(1),d.mc("ngbNavOutlet",o)}},directives:[u.n,u.p,u.q,u.o,g.p,u.s,pt.a,C,g.n,L.a,L.n,L.q,L.b,g.o,L.s,L.k,L.v,L.r,L.x,R,Ct,F.a,m.c,L.y,L.o,L.p,U],pipes:[g.g],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control.sized-form[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}.bg-reserved[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important;color:#000!important}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{padding:.5rem;margin:-.5rem -.5rem -.5rem auto}"]}),e}(),io=function(){function e(e){this.dataSource=e,this.serviceTypeUrl="api/v1/service-type-manual-bookings",this.serviceUrl="api/v1/service-name-manual-bookings",this.serviceCategoryUrl="api/v1/service-category-manual-bookings",this.createUrl=this.serviceTypeUrl+"/create",this.createServiceUrl=this.serviceUrl+"/create",this.createServiceCategoryUrl=this.serviceCategoryUrl+"/create"}return e.prototype.create=function(e){return this.dataSource.sendAuthenticatePostRequestObserver(this.createUrl,null,e)},e.prototype.createService=function(e){return this.dataSource.sendAuthenticatePostRequestObserver(null!=e.serviceNameId&&e.serviceNameId>0?this.createServiceCategoryUrl:this.createServiceUrl,null,e)},e.\u0275fac=function(t){return new(t||e)(d.Yb(a.a))},e.\u0275prov=d.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),co=function(){return(co=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ao(e,t){1&e&&(d.Qb(0,"small",12),d.Lc(1,"Service type required"),d.Pb())}function so(e,t){if(1&e&&(d.Qb(0,"span",12),d.Lc(1),d.Pb()),2&e){var o=d.ec();d.zb(1),d.Nc(" ",o.getFormValidationErrors()," ")}}var lo=function(e,t,o){return{disabled:e,"btn-warning":t,"btn-success":o}},bo=function(){function e(e,t,o){this.fb=e,this.calendar=t,this.create=new d.n,this.edit=!1,this.mouseoverShifting=!1,o.spinners=!1,this.createForm()}return e.prototype.createForm=function(){this.form=this.fb.group({serviceType:["",L.w.required]})},e.prototype.submit=function(){if(this.form.valid){if(this.edit){var e=co({id:this.serviceType.id},this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.edit=!1,this.form.reset(),this.createForm()}},e.prototype.getFormValidationErrors=function(){return""+this.getFormGroupValidationErrors(this.form)},e.prototype.getFormGroupValidationErrors=function(e){var t="";return Object.keys(e.controls).forEach(function(o){var n=e.get(o).errors;null!=n&&Object.keys(n).forEach(function(e){t+=o+" : "+e+"; "})}),t},e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)(d.Lb(L.d),d.Lb(u.b),d.Lb(u.x))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-service-type-form"]],inputs:{serviceType:"serviceType"},outputs:{create:"create"},decls:17,vars:9,consts:[[1,"form-head"],[1,"container-fluid"],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],["for","serviceType"],[1,"required-indicator"],["type","text","id","serviceType","formControlName","serviceType","placeholder","Method Name",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight",2,"padding-top","20px"],[3,"mouseenter"],["type","submit","type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[1,"text-danger"]],template:function(e,t){1&e&&(d.Qb(0,"div",0),d.Lc(1," Create Service\n"),d.Pb(),d.Qb(2,"div",1),d.Qb(3,"form",2),d.bc("ngSubmit",function(){return t.submit()}),d.Qb(4,"div",3),d.Qb(5,"div",4),d.Qb(6,"label",5),d.Lc(7,"Service Type"),d.Qb(8,"span",6),d.Lc(9,"*"),d.Pb(),d.Pb(),d.Mb(10,"input",7),d.Jc(11,ao,2,0,"small",8),d.Pb(),d.Pb(),d.Qb(12,"div",9),d.Qb(13,"span",10),d.bc("mouseenter",function(){return t.mouseoverShifting=!0}),d.Qb(14,"button",11),d.Lc(15),d.Pb(),d.Pb(),d.Jc(16,so,2,1,"span",8),d.Pb(),d.Pb(),d.Pb()),2&e&&(d.zb(3),d.mc("formGroup",t.form),d.zb(8),d.mc("ngIf",(null==t.form.controls.serviceType.errors?null:t.form.controls.serviceType.errors.required)&&t.form.controls.serviceType.dirty),d.zb(3),d.mc("ngClass",d.sc(5,lo,t.form.invalid,t.edit,!t.edit)),d.zb(1),d.Nc(" ",t.edit?"Update":"Create"," Service Type "),d.zb(1),d.mc("ngIf",t.mouseoverShifting))},directives:[L.y,L.o,L.h,L.b,L.n,L.g,g.p,g.n],styles:[".btn-web[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]{color:#fff;background-color:#0e893f}.hotel-button-reverse[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]:hover{background-color:#f7a71a}.hotel-button-reverse[_ngcontent-%COMP%]{color:#fff}.form-head[_ngcontent-%COMP%], .hotel-button-reverse[_ngcontent-%COMP%]:hover, td.form-head[_ngcontent-%COMP%]{background-color:#0e893f}.form-head[_ngcontent-%COMP%], td.form-head[_ngcontent-%COMP%]{width:inherit;font-size:20px!important;line-height:22px;padding:5px;color:#fff}.form-head-link[_ngcontent-%COMP%], td.form-head-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-size:16px}"]}),e}(),uo=o("XNiG"),mo=o("oTcB");function fo(e,t){if(1&e){var o=d.Rb();d.Qb(0,"tr"),d.Qb(1,"td"),d.Lc(2),d.Pb(),d.Qb(3,"td"),d.Qb(4,"button",8),d.bc("click",function(){d.Ac(o);var e=t.$implicit;return d.ec().deleteServiceType(e.id)}),d.Mb(5,"i",9),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit;d.zb(2),d.Mc(n.serviceType)}}var go=function(){function e(e,t){this.restDataService=e,this.toastrService=t,this.dtOptions={},this.dtTrigger=new uo.a}return e.prototype.ngOnInit=function(){this.dtOptions={pagingType:"full_numbers"},this.getPaymentMethodList()},e.prototype.getPaymentMethodList=function(){var e=this;this.restDataService.sendAuthenticateGetRequestObserver("api/v1/service-type-manual-bookings/list","").subscribe(function(t){e.responseModel=t,e.serviceTypes=e.responseModel.content,e.dtTrigger.next()})},e.prototype.deleteServiceType=function(e){var t=this;confirm("Are you sure to delete this service type?")&&this.restDataService.sendAuthenticateDeleteRequestObserver("api/v1/service-type-manual-bookings/"+e,null).subscribe(function(e){t.responseModel=e,t.responseModel.statusCode<400?t.toastrService.success(t.responseModel.message,"Success"):t.toastrService.error(t.responseModel.message,"Error")})},e.\u0275fac=function(t){return new(t||e)(d.Lb(a.a),d.Lb(f.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-service-type-list"]],inputs:{serviceTypes:"serviceTypes"},decls:15,vars:3,consts:[["datatable","",1,"table","table-hover","table-responsive-sm","border",3,"dtOptions","dtTrigger"],[2,"background-color","#f8f9fa"],["colspan","2"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"pl-3"],[4,"ngFor","ngForOf"],[1,"btn-danger","btn",3,"click"],[1,"fa","fa-trash-o",2,"font-size","20px"]],template:function(e,t){1&e&&(d.Qb(0,"table",0),d.Qb(1,"thead"),d.Qb(2,"tr",1),d.Qb(3,"td",2),d.Qb(4,"div",3),d.Qb(5,"div",4),d.Qb(6,"h5",5),d.Lc(7,"List of Service Type"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(8,"tr"),d.Qb(9,"th",6),d.Lc(10,"Service Type"),d.Pb(),d.Qb(11,"th"),d.Lc(12,"Action"),d.Pb(),d.Pb(),d.Pb(),d.Qb(13,"tbody"),d.Jc(14,fo,6,1,"tr",7),d.Pb(),d.Pb()),2&e&&(d.mc("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),d.zb(14),d.mc("ngForOf",t.serviceTypes))},directives:[mo.a,g.o],styles:[""]}),e}(),ho=function(){return(ho=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function po(e,t){if(1&e&&(d.Qb(0,"option",16),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Nc(" ",o.serviceType," ")}}function vo(e,t){1&e&&(d.Qb(0,"small",17),d.Lc(1,"Service Type required"),d.Pb())}function yo(e,t){1&e&&(d.Qb(0,"small",17),d.Lc(1,"Service Name required"),d.Pb())}function Po(e,t){if(1&e&&(d.Qb(0,"span",17),d.Lc(1),d.Pb()),2&e){var o=d.ec();d.zb(1),d.Nc(" ",o.getFormValidationErrors()," ")}}var ko=function(e,t,o){return{disabled:e,"btn-warning":t,"btn-success":o}},Qo=function(){function e(e,t,o,n){this.fb=e,this.calendar=t,this.dataSource=o,this.create=new d.n,this.edit=!1,this.mouseoverShifting=!1,n.spinners=!1,this.createForm()}return e.prototype.createForm=function(){this.form=this.fb.group({serviceTypeId:["",L.w.required],serviceName:["",L.w.required]})},e.prototype.submit=function(){if(this.form.valid){if(this.edit){var e=ho({id:this.serviceAdminPageData.id},this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.edit=!1,this.form.reset(),this.createForm()}},e.prototype.getFormValidationErrors=function(){return""+this.getFormGroupValidationErrors(this.form)},e.prototype.getFormGroupValidationErrors=function(e){var t="";return Object.keys(e.controls).forEach(function(o){var n=e.get(o).errors;null!=n&&Object.keys(n).forEach(function(e){t+=o+" : "+e+"; "})}),t},e.prototype.ngOnInit=function(){this.getServiceTypeList()},e.prototype.getServiceTypeList=function(){var e=this;this.dataSource.sendAuthenticateGetRequestObserver("api/v1/service-type-manual-bookings/list","").subscribe(function(t){e.responseModel=t,e.serviceTypes=e.responseModel.content})},e.\u0275fac=function(t){return new(t||e)(d.Lb(L.d),d.Lb(u.b),d.Lb(a.a),d.Lb(u.x))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-service-name-form"]],inputs:{serviceAdminPageData:"serviceAdminPageData"},outputs:{create:"create"},decls:27,vars:11,consts:[[1,"form-head"],[1,"container-fluid"],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],["for","serviceTypeId"],[1,"required-indicator"],["type","text","id","serviceTypeId","formControlName","serviceTypeId",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["for","serviceName"],["type","text","id","serviceName","formControlName","serviceName","placeholder","Service Name",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight",2,"padding-top","20px"],[3,"mouseenter"],["type","submit","type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[3,"value"],[1,"text-danger"]],template:function(e,t){1&e&&(d.Qb(0,"div",0),d.Lc(1," Create Service\n"),d.Pb(),d.Qb(2,"div",1),d.Qb(3,"form",2),d.bc("ngSubmit",function(){return t.submit()}),d.Qb(4,"div",3),d.Qb(5,"div",4),d.Qb(6,"label",5),d.Lc(7,"Service Type"),d.Qb(8,"span",6),d.Lc(9,"*"),d.Pb(),d.Pb(),d.Qb(10,"select",7),d.Qb(11,"option",8),d.Lc(12,"--Select One--"),d.Pb(),d.Jc(13,po,2,2,"option",9),d.Pb(),d.Jc(14,vo,2,0,"small",10),d.Pb(),d.Qb(15,"div",4),d.Qb(16,"label",11),d.Lc(17,"Service Name"),d.Qb(18,"span",6),d.Lc(19,"*"),d.Pb(),d.Pb(),d.Mb(20,"input",12),d.Jc(21,yo,2,0,"small",10),d.Pb(),d.Pb(),d.Qb(22,"div",13),d.Qb(23,"span",14),d.bc("mouseenter",function(){return t.mouseoverShifting=!0}),d.Qb(24,"button",15),d.Lc(25),d.Pb(),d.Pb(),d.Jc(26,Po,2,1,"span",10),d.Pb(),d.Pb(),d.Pb()),2&e&&(d.zb(3),d.mc("formGroup",t.form),d.zb(10),d.mc("ngForOf",t.serviceTypes),d.zb(1),d.mc("ngIf",(null==t.form.controls.serviceTypeId.errors?null:t.form.controls.serviceTypeId.errors.required)&&t.form.controls.serviceTypeId.dirty),d.zb(7),d.mc("ngIf",(null==t.form.controls.serviceName.errors?null:t.form.controls.serviceName.errors.required)&&t.form.controls.serviceName.dirty),d.zb(3),d.mc("ngClass",d.sc(7,ko,t.form.invalid,t.edit,!t.edit)),d.zb(1),d.Nc(" ",t.edit?"Update":"Create"," Service "),d.zb(1),d.mc("ngIf",t.mouseoverShifting))},directives:[L.y,L.o,L.h,L.v,L.n,L.g,L.r,L.x,g.o,g.p,L.b,g.n],styles:[".btn-web[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]{color:#fff;background-color:#0e893f}.hotel-button-reverse[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]:hover{background-color:#f7a71a}.hotel-button-reverse[_ngcontent-%COMP%]{color:#fff}.form-head[_ngcontent-%COMP%], .hotel-button-reverse[_ngcontent-%COMP%]:hover, td.form-head[_ngcontent-%COMP%]{background-color:#0e893f}.form-head[_ngcontent-%COMP%], td.form-head[_ngcontent-%COMP%]{width:inherit;font-size:20px!important;line-height:22px;padding:5px;color:#fff}.form-head-link[_ngcontent-%COMP%], td.form-head-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-size:16px}"]}),e}();function So(e,t){if(1&e){var o=d.Rb();d.Qb(0,"tr"),d.Qb(1,"td"),d.Lc(2),d.Pb(),d.Qb(3,"td"),d.Lc(4),d.Pb(),d.Qb(5,"td"),d.Qb(6,"button",8),d.bc("click",function(){d.Ac(o);var e=t.$implicit;return d.ec().deleteServiceName(e.id)}),d.Mb(7,"i",9),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit;d.zb(2),d.Mc(n.serviceType),d.zb(2),d.Mc(n.serviceName)}}var Mo=function(){function e(e,t){this.restDataService=e,this.toastrService=t,this.dtOptions={},this.dtTrigger=new uo.a}return e.prototype.ngOnInit=function(){this.dtOptions={pagingType:"full_numbers"},this.getPaymentMethodList()},e.prototype.getPaymentMethodList=function(){var e=this;this.restDataService.sendAuthenticateGetRequestObserver("api/v1/service-name-manual-bookings/list","").subscribe(function(t){e.responseModel=t,e.serviceNames=e.responseModel.content,e.dtTrigger.next()})},e.prototype.deleteServiceName=function(e){var t=this;confirm("Are you sure to delete this service?")&&this.restDataService.sendAuthenticateDeleteRequestObserver("api/v1/service-name-manual-bookings/"+e,null).subscribe(function(e){t.responseModel=e,t.responseModel.statusCode<400?t.toastrService.success(t.responseModel.message,"Success"):t.toastrService.error(t.responseModel.message,"Error")})},e.\u0275fac=function(t){return new(t||e)(d.Lb(a.a),d.Lb(f.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-service-name-list"]],inputs:{serviceNames:"serviceNames"},decls:17,vars:3,consts:[["datatable","",1,"table","table-hover","table-responsive-sm","border",3,"dtOptions","dtTrigger"],[2,"background-color","#f8f9fa"],["colspan","3"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"pl-3"],[4,"ngFor","ngForOf"],[1,"btn-danger","btn",3,"click"],[1,"fa","fa-trash-o",2,"font-size","20px"]],template:function(e,t){1&e&&(d.Qb(0,"table",0),d.Qb(1,"thead"),d.Qb(2,"tr",1),d.Qb(3,"td",2),d.Qb(4,"div",3),d.Qb(5,"div",4),d.Qb(6,"h5",5),d.Lc(7,"List of Service"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(8,"tr"),d.Qb(9,"th",6),d.Lc(10,"Service Type"),d.Pb(),d.Qb(11,"th"),d.Lc(12,"Service Name"),d.Pb(),d.Qb(13,"th"),d.Lc(14,"Action"),d.Pb(),d.Pb(),d.Pb(),d.Qb(15,"tbody"),d.Jc(16,So,8,2,"tr",7),d.Pb(),d.Pb()),2&e&&(d.mc("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),d.zb(16),d.mc("ngForOf",t.serviceNames))},directives:[mo.a,g.o],styles:[""]}),e}(),Co=function(){return(Co=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Lo(e,t){if(1&e&&(d.Qb(0,"option",17),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Nc(" ",o.serviceType," ")}}function Oo(e,t){1&e&&(d.Qb(0,"small",18),d.Lc(1,"Service Type required"),d.Pb())}function Ao(e,t){if(1&e&&(d.Qb(0,"option",17),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.id),d.zb(1),d.Nc(" ",o.serviceName," ")}}function Do(e,t){1&e&&(d.Qb(0,"small",18),d.Lc(1,"Service Name required"),d.Pb())}function Ro(e,t){if(1&e&&(d.Qb(0,"div",4),d.Qb(1,"label",19),d.Lc(2,"Service Name"),d.Qb(3,"span",6),d.Lc(4,"*"),d.Pb(),d.Pb(),d.Qb(5,"select",20),d.Qb(6,"option",8),d.Lc(7,"--Select One--"),d.Pb(),d.Jc(8,Ao,2,2,"option",9),d.Pb(),d.Jc(9,Do,2,0,"small",10),d.Pb()),2&e){var o=d.ec();d.zb(8),d.mc("ngForOf",o.serviceNames),d.zb(1),d.mc("ngIf",(null==o.form.controls.serviceNameId.errors?null:o.form.controls.serviceNameId.errors.required)&&o.form.controls.serviceNameId.dirty)}}function Io(e,t){1&e&&(d.Qb(0,"small",18),d.Lc(1,"Category Name required"),d.Pb())}function wo(e,t){if(1&e&&(d.Qb(0,"span",18),d.Lc(1),d.Pb()),2&e){var o=d.ec();d.zb(1),d.Nc(" ",o.getFormValidationErrors()," ")}}var xo=function(e,t,o){return{disabled:e,"btn-warning":t,"btn-success":o}},Bo=function(){function e(e,t,o,n){this.fb=e,this.calendar=t,this.dataSource=o,this.create=new d.n,this.edit=!1,this.mouseoverShifting=!1,this.isSelectedType=!1,n.spinners=!1,this.createForm()}return e.prototype.createForm=function(){this.form=this.fb.group({serviceTypeId:["",L.w.required],categoryName:["",L.w.required],serviceNameId:["",L.w.required]})},e.prototype.submit=function(){if(this.form.valid){if(this.edit){var e=Co({id:this.serviceAdminPageData.id},this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.edit=!1,this.form.reset(),this.createForm()}},e.prototype.getFormValidationErrors=function(){return""+this.getFormGroupValidationErrors(this.form)},e.prototype.getFormGroupValidationErrors=function(e){var t="";return Object.keys(e.controls).forEach(function(o){var n=e.get(o).errors;null!=n&&Object.keys(n).forEach(function(e){t+=o+" : "+e+"; "})}),t},e.prototype.ngOnInit=function(){this.getServiceTypeList()},e.prototype.getServiceTypeList=function(){var e=this;this.dataSource.sendAuthenticateGetRequestObserver("api/v1/service-type-manual-bookings/list","").subscribe(function(t){e.responseModel=t,e.serviceTypes=e.responseModel.content})},e.prototype.showServiceName=function(e){var t=this;null!=e&&""!==e?this.dataSource.sendAuthenticateGetRequestObserver("api/v1/service-name-manual-bookings/list-by-type/"+e,"").subscribe(function(e){t.responseModel=e,t.serviceNames=t.responseModel.content,t.isSelectedType=!0}):this.isSelectedType=!1},e.\u0275fac=function(t){return new(t||e)(d.Lb(L.d),d.Lb(u.b),d.Lb(a.a),d.Lb(u.x))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-service-category-form"]],inputs:{serviceAdminPageData:"serviceAdminPageData"},outputs:{create:"create"},decls:29,vars:12,consts:[[1,"form-head"],[1,"container-fluid"],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],["for","serviceTypeId"],[1,"required-indicator"],["type","text","id","serviceTypeId","formControlName","serviceTypeId",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["class","col-sm-6",4,"ngIf"],["for","categoryName"],["type","text","id","categoryName","formControlName","categoryName","placeholder","Category Name",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight",2,"padding-top","20px"],[3,"mouseenter"],["type","submit","type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[3,"value"],[1,"text-danger"],["for","serviceNameId"],["type","text","id","serviceNameId","formControlName","serviceNameId",1,"form-control"]],template:function(e,t){1&e&&(d.Qb(0,"div",0),d.Lc(1," Create Service Category\n"),d.Pb(),d.Qb(2,"div",1),d.Qb(3,"form",2),d.bc("ngSubmit",function(){return t.submit()}),d.Qb(4,"div",3),d.Qb(5,"div",4),d.Qb(6,"label",5),d.Lc(7,"Service Type"),d.Qb(8,"span",6),d.Lc(9,"*"),d.Pb(),d.Pb(),d.Qb(10,"select",7),d.bc("change",function(e){return t.showServiceName(e.target.value)}),d.Qb(11,"option",8),d.Lc(12,"--Select One--"),d.Pb(),d.Jc(13,Lo,2,2,"option",9),d.Pb(),d.Jc(14,Oo,2,0,"small",10),d.Pb(),d.Jc(15,Ro,10,2,"div",11),d.Pb(),d.Qb(16,"div",3),d.Qb(17,"div",4),d.Qb(18,"label",12),d.Lc(19,"Category Name"),d.Qb(20,"span",6),d.Lc(21,"*"),d.Pb(),d.Pb(),d.Mb(22,"input",13),d.Jc(23,Io,2,0,"small",10),d.Pb(),d.Pb(),d.Qb(24,"div",14),d.Qb(25,"span",15),d.bc("mouseenter",function(){return t.mouseoverShifting=!0}),d.Qb(26,"button",16),d.Lc(27),d.Pb(),d.Pb(),d.Jc(28,wo,2,1,"span",10),d.Pb(),d.Pb(),d.Pb()),2&e&&(d.zb(3),d.mc("formGroup",t.form),d.zb(10),d.mc("ngForOf",t.serviceTypes),d.zb(1),d.mc("ngIf",(null==t.form.controls.serviceTypeId.errors?null:t.form.controls.serviceTypeId.errors.required)&&t.form.controls.serviceTypeId.dirty),d.zb(1),d.mc("ngIf",t.isSelectedType),d.zb(8),d.mc("ngIf",(null==t.form.controls.categoryName.errors?null:t.form.controls.categoryName.errors.required)&&t.form.controls.categoryName.dirty),d.zb(3),d.mc("ngClass",d.sc(8,xo,t.form.invalid,t.edit,!t.edit)),d.zb(1),d.Nc(" ",t.edit?"Update":"Create"," Service Category "),d.zb(1),d.mc("ngIf",t.mouseoverShifting))},directives:[L.y,L.o,L.h,L.v,L.n,L.g,L.r,L.x,g.o,g.p,L.b,g.n],styles:[".btn-web[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]{color:#fff;background-color:#0e893f}.hotel-button-reverse[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]:hover{background-color:#f7a71a}.hotel-button-reverse[_ngcontent-%COMP%]{color:#fff}.form-head[_ngcontent-%COMP%], .hotel-button-reverse[_ngcontent-%COMP%]:hover, td.form-head[_ngcontent-%COMP%]{background-color:#0e893f}.form-head[_ngcontent-%COMP%], td.form-head[_ngcontent-%COMP%]{width:inherit;font-size:20px!important;line-height:22px;padding:5px;color:#fff}.form-head-link[_ngcontent-%COMP%], td.form-head-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-size:16px}"]}),e}();function No(e,t){if(1&e){var o=d.Rb();d.Qb(0,"tr"),d.Qb(1,"td"),d.Lc(2),d.Pb(),d.Qb(3,"td"),d.Lc(4),d.Pb(),d.Qb(5,"td"),d.Lc(6),d.Pb(),d.Qb(7,"td"),d.Qb(8,"button",8),d.bc("click",function(){d.Ac(o);var e=t.$implicit;return d.ec().deleteServiceCategory(e.id)}),d.Mb(9,"i",9),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit;d.zb(2),d.Mc(n.serviceType),d.zb(2),d.Mc(n.serviceName),d.zb(2),d.Mc(n.categoryName)}}var zo=function(){function e(e,t){this.restDataService=e,this.toastrService=t,this.dtOptions={},this.dtTrigger=new uo.a}return e.prototype.ngOnInit=function(){this.dtOptions={pagingType:"full_numbers"},this.getPaymentMethodList()},e.prototype.getPaymentMethodList=function(){var e=this;this.restDataService.sendAuthenticateGetRequestObserver("api/v1/service-category-manual-bookings/list","").subscribe(function(t){e.responseModel=t,e.serviceNames=e.responseModel.content,e.dtTrigger.next()})},e.prototype.deleteServiceCategory=function(e){var t=this;confirm("Are you sure to delete this service category?")&&this.restDataService.sendAuthenticateDeleteRequestObserver("api/v1/service-category-manual-bookings/"+e,null).subscribe(function(e){t.responseModel=e,t.responseModel.statusCode<400?t.toastrService.success(t.responseModel.message,"Success"):t.toastrService.error(t.responseModel.message,"Error")})},e.\u0275fac=function(t){return new(t||e)(d.Lb(a.a),d.Lb(f.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-service-category-list"]],inputs:{serviceNames:"serviceNames"},decls:19,vars:3,consts:[["datatable","",1,"table","table-hover","table-responsive-sm","border",3,"dtOptions","dtTrigger"],[2,"background-color","#f8f9fa"],["colspan","4"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"pl-3"],[4,"ngFor","ngForOf"],[1,"btn-danger","btn",3,"click"],[1,"fa","fa-trash-o",2,"font-size","20px"]],template:function(e,t){1&e&&(d.Qb(0,"table",0),d.Qb(1,"thead"),d.Qb(2,"tr",1),d.Qb(3,"td",2),d.Qb(4,"div",3),d.Qb(5,"div",4),d.Qb(6,"h5",5),d.Lc(7,"List of Service Category"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(8,"tr"),d.Qb(9,"th",6),d.Lc(10,"Service Type"),d.Pb(),d.Qb(11,"th"),d.Lc(12,"Service Name"),d.Pb(),d.Qb(13,"th"),d.Lc(14,"Service Category"),d.Pb(),d.Qb(15,"th"),d.Lc(16,"Action"),d.Pb(),d.Pb(),d.Pb(),d.Qb(17,"tbody"),d.Jc(18,No,10,3,"tr",7),d.Pb(),d.Pb()),2&e&&(d.mc("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),d.zb(18),d.mc("ngForOf",t.serviceNames))},directives:[mo.a,g.o],styles:[""]}),e}();function To(e,t){if(1&e){var o=d.Rb();d.Qb(0,"app-service-type-form",7),d.bc("create",function(e){return d.Ac(o),d.ec().onCreate(e)}),d.Pb()}if(2&e){var n=d.ec();d.mc("serviceType",n.serviceType)}}function Eo(e,t){1&e&&(d.Ob(0),d.Mb(1,"app-service-type-list"),d.Nb())}function _o(e,t){if(1&e){var o=d.Rb();d.Ob(0),d.Qb(1,"app-service-name-form",8),d.bc("create",function(e){return d.Ac(o),d.ec().onCreateService(e)}),d.Pb(),d.Nb()}if(2&e){var n=d.ec();d.zb(1),d.mc("serviceAdminPageData",n.serviceAdminPageData)}}function Fo(e,t){1&e&&(d.Ob(0),d.Mb(1,"app-service-name-list"),d.Nb())}function Jo(e,t){if(1&e){var o=d.Rb();d.Ob(0),d.Qb(1,"app-service-category-form",8),d.bc("create",function(e){return d.Ac(o),d.ec().onCreateService(e)}),d.Pb(),d.Nb()}if(2&e){var n=d.ec();d.zb(1),d.mc("serviceAdminPageData",n.serviceAdminPageData)}}function Vo(e,t){1&e&&(d.Ob(0),d.Mb(1,"app-service-category-list"),d.Nb())}var Go=function(){function e(e,t,o){this.serviceTypeService=e,this.activeRoute=t,this.toastrService=o,this.activeNav=1,this.id=t.snapshot.params.id}return e.prototype.ngOnInit=function(){},e.prototype.onCreate=function(e){var t=this;return this.serviceTypeService.create(e).subscribe(function(e){e.statusCode<400?t.toastrService.success(e.message,"Success"):t.toastrService.error(e.message,"Error")})},e.prototype.onCreateService=function(e){var t=this;return this.serviceTypeService.createService(e).subscribe(function(e){e.statusCode<400?t.toastrService.success(e.message,"Success"):t.toastrService.error(e.message,"Error")})},e.\u0275fac=function(t){return new(t||e)(d.Lb(io),d.Lb(m.a),d.Lb(f.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-add-service-type"]],decls:28,vars:8,consts:[[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[3,"serviceType","create"],[3,"serviceAdminPageData","create"]],template:function(e,t){if(1&e&&(d.Qb(0,"div",0),d.Qb(1,"ul",1,2),d.bc("activeIdChange",function(e){return t.activeNav=e}),d.Qb(3,"li",3),d.Qb(4,"a",4),d.Lc(5,"Service Type Create"),d.Pb(),d.Jc(6,To,1,1,"ng-template",5),d.Pb(),d.Qb(7,"li",3),d.Qb(8,"a",4),d.Lc(9,"Service Type List"),d.Pb(),d.Jc(10,Eo,2,0,"ng-template",5),d.Pb(),d.Qb(11,"li",3),d.Qb(12,"a",4),d.Lc(13,"Create Service"),d.Pb(),d.Jc(14,_o,2,1,"ng-template",5),d.Pb(),d.Qb(15,"li",3),d.Qb(16,"a",4),d.Lc(17,"Service List"),d.Pb(),d.Jc(18,Fo,2,0,"ng-template",5),d.Pb(),d.Qb(19,"li",3),d.Qb(20,"a",4),d.Lc(21,"Service Category Create"),d.Pb(),d.Jc(22,Jo,2,1,"ng-template",5),d.Pb(),d.Qb(23,"li",3),d.Qb(24,"a",4),d.Lc(25,"Service Category List"),d.Pb(),d.Jc(26,Vo,2,0,"ng-template",5),d.Pb(),d.Pb(),d.Mb(27,"div",6),d.Pb()),2&e){var o=d.xc(2);d.zb(1),d.mc("activeId",t.activeNav),d.zb(2),d.mc("ngbNavItem",1),d.zb(4),d.mc("ngbNavItem",2),d.zb(4),d.mc("ngbNavItem",3),d.zb(4),d.mc("ngbNavItem",4),d.zb(4),d.mc("ngbNavItem",5),d.zb(4),d.mc("ngbNavItem",6),d.zb(4),d.mc("ngbNavOutlet",o)}},directives:[u.n,u.p,u.q,u.o,u.s,bo,go,Qo,Mo,Bo,zo],styles:[""]}),e}(),Ho=function(){return(Ho=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function qo(e,t){if(1&e){var o=d.Rb();d.Qb(0,"admin-hotel-list",7),d.bc("hotel",function(e){return d.Ac(o),d.ec().onHotel(e)}),d.Pb()}}function jo(e,t){if(1&e){var o=d.Rb();d.Qb(0,"app-own-hotel-list",7),d.bc("hotel",function(e){return d.Ac(o),d.ec().onHotel(e)}),d.Pb()}}function $o(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",8),d.Qb(1,"div",9),d.Qb(2,"div",10),d.Qb(3,"div",11),d.bc("click",function(){return d.Ac(o),d.xc(7).toggle()}),d.Qb(4,"div",12),d.Mb(5,"i",13),d.Pb(),d.Pb(),d.Qb(6,"input",14,15),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec().dd=e})("dateSelect",function(){d.Ac(o);var e=d.ec();return e.getAdminBookingList(e.hotelId,e.dd)})("click",function(){return d.Ac(o),d.xc(7).toggle()}),d.Pb(),d.Pb(),d.Pb(),d.Pb()}if(2&e){var n=d.ec();d.zb(6),d.mc("ngModel",n.dd)("minDate",n.minDate)("maxDate",n.maxDate)}}function Uo(e,t){if(1&e&&(d.Qb(0,"div",16),d.Qb(1,"div",17),d.Qb(2,"h4"),d.Lc(3),d.Pb(),d.Pb(),d.Pb()),2&e){var o=d.ec();d.zb(3),d.Mc(o.hotel.name)}}var Ko=function(e,t,o,n,r,i){return{"bg-lightgray":e,"bg-yellow":t,"bg-reserved":o,"bg-red":n,"bg-green":r,"bg-white":i}};function Yo(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",18),d.Qb(1,"div",19),d.bc("click",function(){d.Ac(o);var e=t.$implicit,n=d.ec();return n.onRoomClick(e.id,e.bookingId,n.dd)}),d.Lc(2),d.Mb(3,"br"),d.Pb(),d.Pb()}if(2&e){var n=t.$implicit;d.zb(1),d.mc("ngClass",d.vc(2,Ko,"ROOM_BLOCKED"===n.status,"ROOM_BOOKED"===n.status,"ROOM_RESERVED"===n.status,"ROOM_SOLD"===n.status&&n.hasDue,"ROOM_SOLD"===n.status&&!n.hasDue,"ROOM_FREE"===n.status)),d.zb(1),d.Nc(" ",n.roomNumber," ")}}function Wo(e,t){1&e&&(d.Qb(0,"div",20),d.Qb(1,"div",21),d.Mb(2,"div",22),d.Lc(3," Blocked "),d.Pb(),d.Qb(4,"div",21),d.Mb(5,"div",23),d.Lc(6," Reserved "),d.Pb(),d.Qb(7,"div",21),d.Mb(8,"div",24),d.Lc(9," Sold "),d.Pb(),d.Qb(10,"div",21),d.Mb(11,"div",25),d.Lc(12," Free "),d.Pb(),d.Pb())}function Xo(e,t){if(1&e){var o=d.Rb();d.Qb(0,"button",26),d.bc("click",function(){return d.Ac(o),d.ec().onHotelList()}),d.Mb(1,"i",27),d.Lc(2," Back to hotel list\n"),d.Pb()}}var Zo=function(){function e(e,t,o){this.roomService=e,this.authService=t,this.utilService=o,this.roomSelected=new d.n,this.loading=!1,this.showRoomList=!1}return e.prototype.ngOnChanges=function(e){e.reload&&this.dd&&this.getAdminBookingList(this.hotelId,this.dd)},e.prototype.ngOnInit=function(){var e=new Date;this.dd=null!=localStorage.getItem("selectedDate")?JSON.parse(localStorage.getItem("selectedDate")):{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.minDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()-60},this.maxDate={year:e.getFullYear(),month:e.getMonth()+4,day:e.getDate()},this.maxDate.month>12&&(this.maxDate.year+=1,this.maxDate.month-=12)},e.prototype.getAdminBookingList=function(e,t){return o=this,void 0,r=function(){var o=this;return function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,this.roomService.getAdminBookingList(e,this.utilService.makeDateString(t)).subscribe(function(e){o.roomList=e,o.loading=!1})];case 1:return n.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(e,t){function i(e){try{a(r.next(e))}catch(o){t(o)}}function c(e){try{a(r.throw(e))}catch(o){t(o)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n(function(e){e(o)})).then(i,c)}a((r=r.apply(o,[])).next())});var o,n,r},e.prototype.onRoomClick=function(e,t,o){if(t>0){localStorage.selectedDate=JSON.stringify(o);var n=this.roomList.find(function(t){return t.id===e});this.status=n.status;var r=Ho({date:o.year+"-"+(o.month+1)+"-"+o.day},n);this.roomSelected.emit(r)}},e.prototype.onHotel=function(e){this.hotelId=e.id,this.hotel=e,this.getAdminBookingList(e.id,this.dd),this.showRoomList=!0},e.prototype.onHotelList=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},e.\u0275fac=function(t){return new(t||e)(d.Lb(b.a),d.Lb(s.a),d.Lb(r.a))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-collect-due-room-status"]],inputs:{reload:"reload"},outputs:{roomSelected:"roomSelected"},features:[d.xb],decls:8,vars:7,consts:[[3,"hotel",4,"ngIf"],["class","row my-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","m-0","mb-3"],["class","col-md-2 col-3 p-0",4,"ngFor","ngForOf"],["class","row border m-0 py-2",4,"ngIf"],["class","btn btn-sm btn-info mt-1",3,"click",4,"ngIf"],[3,"hotel"],[1,"row","my-2"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"row"],[1,"col-12"],[1,"col-md-2","col-3","p-0"],[1,"room-map-box",3,"ngClass","click"],[1,"row","border","m-0","py-2"],[1,"col-3"],[1,"foo","bg-lightgray"],[1,"foo","bg-reserved"],[1,"foo","bg-red"],[1,"foo","bg-white"],[1,"btn","btn-sm","btn-info","mt-1",3,"click"],[1,"fa","fa-chevron-left"]],template:function(e,t){1&e&&(d.Jc(0,qo,1,0,"admin-hotel-list",0),d.Jc(1,jo,1,0,"app-own-hotel-list",0),d.Jc(2,$o,8,3,"div",1),d.Jc(3,Uo,4,1,"div",2),d.Qb(4,"div",3),d.Jc(5,Yo,4,9,"div",4),d.Pb(),d.Jc(6,Wo,13,0,"div",5),d.Jc(7,Xo,3,0,"button",6)),2&e&&(d.mc("ngIf",!t.showRoomList&&(t.authService.hasRole("ROLE_ADMIN")||t.authService.hasRole("OFFICE_COUNTER"))),d.zb(1),d.mc("ngIf",!t.showRoomList&&t.authService.hasRole("SERVICE_COUNTER_HOTEL")),d.zb(1),d.mc("ngIf",t.showRoomList),d.zb(1),d.mc("ngIf",t.showRoomList),d.zb(2),d.mc("ngForOf",t.roomList),d.zb(1),d.mc("ngIf",null==t.roomList?null:t.roomList.length),d.zb(1),d.mc("ngIf",t.showRoomList))},directives:[g.p,g.o,h.a,pt.a,u.k,L.b,L.n,L.q,g.n],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin:10px 10px 0 0;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-reserved[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important;border-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important;border-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),e}(),en=function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},tn=function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function on(e,t){if(1&e&&d.Mb(0,"booking-info",16),2&e){var o=d.ec(4);d.mc("booking",o.reservation)("systemShow",!0)}}function nn(e,t){if(1&e&&(d.Qb(0,"option",42),d.Lc(1),d.Pb()),2&e){var o=t.$implicit;d.mc("value",o.methodName),d.zb(1),d.Nc(" ",o.methodName," ")}}function rn(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",22),d.Qb(1,"h4",23),d.Lc(2,"Collect Due"),d.Pb(),d.Qb(3,"button",24),d.bc("click",function(){return t.$implicit.dismiss("Cross click")}),d.Mb(4,"i",25),d.Pb(),d.Pb(),d.Qb(5,"div",26),d.Qb(6,"form"),d.Qb(7,"div",27),d.Qb(8,"label",28),d.Lc(9,"Total Due"),d.Pb(),d.Qb(10,"div",29),d.Qb(11,"div",29),d.Qb(12,"label",30),d.Lc(13),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(14,"div",27),d.Qb(15,"label",28),d.Lc(16,"Collection Date"),d.Pb(),d.Qb(17,"div",29),d.Qb(18,"div",29),d.Qb(19,"input",31,32),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(5).collectionDate=e}),d.Pb(),d.Qb(21,"button",33),d.bc("click",function(){return d.Ac(o),d.xc(20).toggle()}),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(22,"div",27),d.Qb(23,"label",34),d.Lc(24,"Collected Amount"),d.Pb(),d.Qb(25,"div",29),d.Qb(26,"input",35),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(5).collectedAmount=e})("keyup",function(){return d.Ac(o),d.ec(5).validateCollectedAmount()}),d.Pb(),d.Pb(),d.Pb(),d.Qb(27,"div",27),d.Qb(28,"label",34),d.Lc(29,"Suspended Amount"),d.Pb(),d.Qb(30,"div",29),d.Qb(31,"label",36),d.Lc(32),d.Pb(),d.Pb(),d.Pb(),d.Qb(33,"div",27),d.Qb(34,"label",37),d.Lc(35,"Payment Method *"),d.Pb(),d.Qb(36,"div",29),d.Qb(37,"select",38),d.bc("ngModelChange",function(e){return d.Ac(o),d.ec(5).paymentMethodDueCollectionFee=e}),d.Jc(38,nn,2,2,"option",39),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(39,"div",40),d.Qb(40,"button",41),d.bc("click",function(){d.Ac(o);var e=t.$implicit,n=d.ec(5);return e.close(n.reservation.id)}),d.Lc(41,"Confirm"),d.Pb(),d.Pb()}if(2&e){var n=d.ec(5);d.zb(13),d.Nc("",n.reservation.totalDue," BDT"),d.zb(6),d.mc("ngModel",n.collectionDate),d.zb(7),d.mc("ngModel",n.collectedAmount),d.zb(6),d.Nc("",n.reservation.totalDue-n.collectedAmount," BDT"),d.zb(5),d.mc("ngModel",n.paymentMethodDueCollectionFee),d.zb(1),d.mc("ngForOf",n.paymentMethods)}}function cn(e,t){if(1&e){var o=d.Rb();d.Qb(0,"button",43),d.bc("click",function(){d.Ac(o),d.ec();var e=d.xc(5);return d.ec(4).open1(e)}),d.Lc(1,"Collect Due"),d.Pb()}}function an(e,t){if(1&e&&(d.Qb(0,"div",17),d.Qb(1,"a",18),d.Mb(2,"i",19),d.Lc(3," Print"),d.Pb(),d.Jc(4,rn,42,6,"ng-template",null,20,d.Kc),d.Lc(6," \xa0"),d.Jc(7,cn,2,0,"button",21),d.Mb(8,"hr"),d.Pb()),2&e){var o=d.ec(4);d.zb(1),d.oc("routerLink","/dashboard/printTicket/",o.reservation.id,""),d.zb(6),d.mc("ngIf",o.reservation.totalDue>0&&!o.reservation.isPaid)}}var sn=function(e,t){return{"bg-danger":e,"bg-reserved":t}};function ln(e,t){if(1&e&&(d.Qb(0,"div",12),d.Qb(1,"div",13),d.Lc(2),d.Pb(),d.Jc(3,on,1,2,"booking-info",14),d.Jc(4,an,9,2,"div",15),d.Pb()),2&e){var o=d.ec(3);d.zb(1),d.mc("ngClass",d.rc(4,sn,"ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus),"ROOM_RESERVED"==(null==o.reservation?null:o.reservation.bookingStatus))),d.zb(1),d.Nc(" ","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus)?"Booking Details":"Reservation Details"," "),d.zb(1),d.mc("ngIf","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus)),d.zb(1),d.mc("ngIf","ROOM_SOLD"==(null==o.reservation?null:o.reservation.bookingStatus))}}function bn(e,t){if(1&e){var o=d.Rb();d.Qb(0,"div",8),d.Qb(1,"div",9),d.Qb(2,"app-collect-due-room-status",10),d.bc("roomSelected",function(e){return d.Ac(o),d.ec(2).onRoomSelectFromRoomStatus(e)}),d.Pb(),d.Pb(),d.Jc(3,ln,5,7,"div",11),d.Pb()}if(2&e){var n=d.ec(2);d.zb(3),d.mc("ngIf",n.reservation)}}function un(e,t){1&e&&(d.Qb(0,"li",5),d.Qb(1,"a",6),d.Lc(2,"Collect Due"),d.Pb(),d.Jc(3,bn,4,1,"ng-template",7),d.Pb()),2&e&&d.mc("ngbNavItem",1)}var dn=[{path:"sell-rooms",component:Oe},{path:"collect-due",component:function(){function e(e,t,o,n,r,i,c){this.bookingService=e,this.utilService=t,this.dataSource=o,this.userGlobal=n,this.authService=r,this.modalService=i,this.toastrService=c,this.closeResult="",this.collectedAmount=0,this.active=1,this.paymentMethodDueCollectionFee="CASH"}return e.prototype.ngOnInit=function(){this.getPaymentMethodList()},e.prototype.getPaymentMethodList=function(){var e=this;this.dataSource.sendAuthenticateGetRequestObserver("api/v1/payment-methods/list","").subscribe(function(t){e.responseModel=t,e.paymentMethods=e.responseModel.content})},e.prototype.onRoomSelectFromRoomStatus=function(e){return en(this,void 0,void 0,function(){var t=this;return tn(this,function(o){switch(o.label){case 0:return[4,this.bookingService.getAdminBooking(e.bookingId).subscribe(function(e){t.reservation=e,t.collectedAmount=e.totalDue})];case 1:return o.sent(),[2]}})})},e.prototype.collectDue=function(e){return en(this,void 0,void 0,function(){var t,o=this;return tn(this,function(n){return null===this.reservation?(this.toastrService.error("Invalid Booking","Error!"),this.collectedAmount=0,[2]):this.reservation.isPaid?(this.toastrService.error("Customer already paid the due","Error!"),this.collectedAmount=0,[2]):0===this.reservation.totalDue?(this.toastrService.error("Customer has no due","Error!"),this.collectedAmount=0,[2]):null===this.collectionDate||""===this.utilService.makeDateString(this.collectionDate)?(this.toastrService.error("Invalid collection date","Error!"),this.collectedAmount=0,[2]):(t=0,this.collectedAmount<this.reservation.totalDue&&(t=this.reservation.totalDue-this.collectedAmount),confirm("Are you sure to continue with suspend amount = "+t+" BDT & Collected Amount = "+this.collectedAmount+" BDT ?")&&this.bookingService.collectDue(e,this.collectedAmount,this.paymentMethodDueCollectionFee,this.utilService.makeDateString(this.collectionDate)).subscribe(function(e){o.reservation=null;var t=e;o.userGlobal.balance=t.balance,o.userGlobal.payable=t.payable,o.ngOnInit(),o.toastrService.info("Due collection successful.","Success!"),o.active=1}),[2])})})},e.prototype.open1=function(e){var t=this;this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(function(e){t.collectDue(e)},function(e){t.closeResult="Dismissed "+t.getDismissReason(e)})},e.prototype.getDismissReason=function(e){return e===u.a.ESC?"by pressing ESC":e===u.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: "+e},e.prototype.validateCollectedAmount=function(){return this.collectedAmount<0?(this.toastrService.error("Collected amount can not be negative","Error"),void(this.collectedAmount=0)):this.reservation.totalDue<this.collectedAmount?(this.toastrService.error("Collected amount can not be greater than total due amount.","Error!"),void(this.collectedAmount=this.reservation.totalDue)):void 0},e.\u0275fac=function(t){return new(t||e)(d.Lb(n.a),d.Lb(r.a),d.Lb(a.a),d.Lb(l.a),d.Lb(s.a),d.Lb(u.l),d.Lb(f.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-collect-due"]],decls:5,vars:3,consts:[[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngIf"],[1,"mt-2",3,"ngbNavOutlet"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2","row"],[1,"col-md-4"],[3,"roomSelected"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],[1,"p-3","mb-2","text-white",3,"ngClass"],[3,"booking","systemShow",4,"ngIf"],["class","d-flex flex-row-reverse bd-highlight mb-4",4,"ngIf"],[3,"booking","systemShow"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-sm","btn-primary","mx-1",3,"routerLink"],[1,"fa","fa-print"],["content1",""],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],[1,"modal-header"],["id","modal1-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",2,"color","red",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"modal-body"],[1,"mb-3"],["for","collectionDate"],[1,"input-group"],["id","totalDue",1,"form-control"],["id","collectionDate","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange"],["dp","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","calendar",3,"click"],["for","collectedAmount"],["type","number","id","collectedAmount","placeholder","Collected Amount",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup"],["id","suspendedAmount","placeholder","Collected Amount",1,"form-control","form-control-sm"],["for","paymentMethodDueCollection"],["id","paymentMethodDueCollection",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"value"],[1,"btn","btn-sm","btn-success",3,"click"]],template:function(e,t){if(1&e&&(d.Qb(0,"div",0),d.Qb(1,"ul",1,2),d.bc("activeIdChange",function(e){return t.active=e}),d.Jc(3,un,4,1,"li",3),d.Pb(),d.Mb(4,"div",4),d.Pb()),2&e){var o=d.xc(2);d.zb(1),d.mc("activeId",t.active),d.zb(2),d.mc("ngIf",t.authService.hasRole("ROLE_ADMIN")||t.authService.hasRole("OFFICE_COUNTER")||t.authService.hasRole("SERVICE_COUNTER_HOTEL")),d.zb(1),d.mc("ngbNavOutlet",o)}},directives:[u.n,g.p,u.s,u.p,u.q,u.o,Zo,g.n,F.a,m.c,L.y,L.o,L.p,u.k,L.b,L.n,L.q,L.s,L.v,g.o,L.r,L.x],styles:['.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{padding:.5rem;margin:-.5rem -.5rem -.5rem auto}button.calendar[_ngcontent-%COMP%], button.calendar[_ngcontent-%COMP%]:active{width:2.75rem;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEUSURBVEiJ7ZQxToVAEIY/YCHGxN6XGOIpnpaEsBSeQC9ArZbm9TZ6ADyBNzAhQGGl8Riv4BLAWAgmkpBYkH1b8FWT2WK/zJ8ZJ4qiI6XUI3ANnGKWBnht2/ZBDRK3hgVGNsCd7/ui+JkEIrKtqurLpEWaphd933+IyI3LEIdpCYCiKD6HcuOa/nwOa0ScJEnk0BJg0UTUWJRl6RxCYEzEmomsIlPU3IPW+grIAbquy+q6fluy/28RIBeRMwDXdXMgXLj/B2uimRXpui4D9sBeRLKl+1N+L+t6RwbWrZliTTTr1oxYtzVWiTQAcRxvTX+eJMnlUDaO1vpZRO5NS0x48sIwfPc87xg4B04MCzQi8hIEwe4bl1DnFMCN2zsAAAAASUVORK5CYII=")!important;background-repeat:no-repeat;background-size:23px;background-position:50%}']}),e}()},{path:"sell-rooms-own",component:ro},{path:"create-service-utils",component:Go},{path:"manual-bookings",component:ht}],mn=function(){function e(){}return e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({factory:function(t){return new(t||e)},imports:[[Ae.a,m.d.forChild(dn),mo.b]]}),e}()}}]);