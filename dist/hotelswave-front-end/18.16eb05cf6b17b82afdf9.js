(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"3whx":function(t,e,o){"use strict";o.d(e,"a",function(){return c});var n=o("KZX/"),i=o("oTcB"),r=o("8Y7J"),c=function(){function t(){}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[n.a,i.b],n.a]}),t}()},YTJ0:function(t,e,o){"use strict";o.r(e),o.d(e,"ROUTES",function(){return xe}),o.d(e,"RoomsModule",function(){return Re});var n=o("iInd"),i=o("3whx"),r=o("3M1h"),c=o("d26D"),a=o("yBZE"),s=o("8Y7J"),l=o("EApP"),b=o("SVse"),u=o("HF3I"),m=o("s7LF"),f=function(){return(f=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function d(t,e){1&t&&(s.Qb(0,"small",67),s.Lc(1," Room Number required "),s.Pb())}function h(t,e){1&t&&(s.Qb(0,"small",67),s.Lc(1," Floor Number required "),s.Pb())}function p(t,e){1&t&&(s.Qb(0,"small",67),s.Lc(1," Number of Beds required "),s.Pb())}function g(t,e){1&t&&(s.Qb(0,"small",67),s.Lc(1," Room Size required "),s.Pb())}function v(t,e){1&t&&(s.Qb(0,"small",67),s.Lc(1," Price required "),s.Pb())}function P(t,e){1&t&&(s.Qb(0,"small",67),s.Lc(1," Discount required "),s.Pb())}var y=function(t,e,o){return{disabled:t,"btn-warning":e,"btn-success":o}},Q=function(){function t(t){this.builder=t,this.create=new s.n,this.update=new s.n,this.exists=!1,this.mouseoverShifting=!1,this.createForm()}return t.prototype.ngOnChanges=function(t){if(t.hotel&&t.hotel.currentValue.id&&this.form.patchValue({hotel:{id:this.hotel.id}}),t.category&&t.category.currentValue.id&&this.form.patchValue({category:{id:this.category.id}}),t.room&&this.room&&this.room.id){this.exists=!0;var e=f({},this.room);this.form.patchValue(e)}},t.prototype.createForm=function(){this.form=this.builder.group({category:this.builder.group({id:["",m.w.required]}),hotel:this.builder.group({id:["",m.w.required]}),roomNumber:["",m.w.required],floorNumber:["",m.w.required],price:["",m.w.required],numberOfBed:["",m.w.required],roomSize:["",m.w.required],discount:["",m.w.required],agentDiscount:[""],discounted:!1,facilities:this.builder.group({frontFace:!1,highCommode:!1,breakfast:!1,internet:!1,airConditioned:!1,tv:!1,geyser:!1,hillView:!1,seaView:!1,telephone:!1,bathTowel:!1,tableAndChair:!1,inMiddle:!1,backFace:!1,kitchen:!1,bathTub:!1,balcony:!1,extraBeds:!1,petsAllowed:!1,hasPaymentMethod:!1})})},t.prototype.submit=function(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.exists=!1,this.form.reset(),this.hotel&&this.hotel.id&&this.form.patchValue({hotel:{id:this.hotel.id}}))},t.\u0275fac=function(e){return new(e||t)(s.Lb(m.d))},t.\u0275cmp=s.Fb({type:t,selectors:[["room-form"]],inputs:{hotel:"hotel",category:"category",room:"room"},outputs:{create:"create",update:"update"},features:[s.xb],decls:154,vars:17,consts:[[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","categoryName"],[1,"form-row"],[1,"form-group","col-md-6"],["for","roomNumber"],["id","roomNumber","formControlName","roomNumber",1,"form-control"],["class","text-danger",4,"ngIf"],["for","floorNumber"],["id","floorNumber","type","number","formControlName","floorNumber",1,"form-control"],["id","numberOfBed","type","number","formControlName","numberOfBed",1,"form-control"],["id","roomSize","type","number","formControlName","roomSize",1,"form-control"],[1,"form-group","col-md-4"],["for","price"],["id","price","type","number","formControlName","price",1,"form-control"],["for","discount"],["id","discount","type","number","min","0","max","100","formControlName","discount",1,"form-control",3,"ngModel","ngModelChange"],["formGroupName","facilities",1,"border","p-2","my-3"],[1,"form-row","align-items-center"],[1,"col-6","col-md-3"],[1,"form-check","mb-2"],["type","checkbox","id","frontFace","formControlName","frontFace",1,"form-check-input"],["for","frontFace",1,"form-check-label"],["type","checkbox","id","backFace","formControlName","backFace",1,"form-check-input"],["for","backFace",1,"form-check-label"],["type","checkbox","id","highCommode","formControlName","highCommode",1,"form-check-input"],["for","highCommode",1,"form-check-label"],["type","checkbox","id","breakfast","formControlName","breakfast",1,"form-check-input"],["for","breakfast",1,"form-check-label"],["type","checkbox","id","internet","formControlName","internet",1,"form-check-input"],["for","internet",1,"form-check-label"],["type","checkbox","id","airConditioned","formControlName","airConditioned",1,"form-check-input"],["for","airConditioned",1,"form-check-label"],["type","checkbox","id","tv","formControlName","tv",1,"form-check-input"],["for","tv",1,"form-check-label"],["type","checkbox","id","geyser","formControlName","geyser",1,"form-check-input"],["for","geyser",1,"form-check-label"],["type","checkbox","id","hillView","formControlName","hillView",1,"form-check-input"],["for","hillView",1,"form-check-label"],["type","checkbox","id","seaView","formControlName","seaView",1,"form-check-input"],["for","seaView",1,"form-check-label"],["type","checkbox","id","telephone","formControlName","telephone",1,"form-check-input"],["for","telephone",1,"form-check-label"],["type","checkbox","id","bathTowel","formControlName","bathTowel",1,"form-check-input"],["for","bathTowel",1,"form-check-label"],["type","checkbox","id","tableAndChair","formControlName","tableAndChair",1,"form-check-input"],["for","tableAndChair",1,"form-check-label"],["type","checkbox","id","inMiddle","formControlName","inMiddle",1,"form-check-input"],["for","inMiddle",1,"form-check-label"],["type","checkbox","id","kitchen","formControlName","kitchen",1,"form-check-input"],["for","kitchen",1,"form-check-label"],["type","checkbox","id","bathTub","formControlName","bathTub",1,"form-check-input"],["for","bathTub",1,"form-check-label"],["type","checkbox","id","balcony","formControlName","balcony",1,"form-check-input"],["for","balcony",1,"form-check-label"],["type","checkbox","id","extraBeds","formControlName","extraBeds",1,"form-check-input"],["for","extraBeds",1,"form-check-label"],["type","checkbox","id","petsAllowed","formControlName","petsAllowed",1,"form-check-input"],["for","petsAllowed",1,"form-check-label"],["type","checkbox","id","hasPaymentMethod","formControlName","hasPaymentMethod",1,"form-check-input"],["for","hasPaymentMethod",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[1,"text-danger"]],template:function(t,e){1&t&&(s.Qb(0,"h3",0),s.Lc(1),s.Pb(),s.Qb(2,"form",1),s.bc("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),s.Qb(3,"div",2),s.Qb(4,"label",3),s.Lc(5,"Hotel Name"),s.Pb(),s.Qb(6,"label",4),s.Lc(7),s.Pb(),s.Pb(),s.Qb(8,"div",2),s.Qb(9,"label",5),s.Lc(10,"Category Name"),s.Pb(),s.Qb(11,"label",4),s.Lc(12),s.Pb(),s.Pb(),s.Qb(13,"div",6),s.Qb(14,"div",7),s.Qb(15,"label",8),s.Lc(16,"Room Number *"),s.Pb(),s.Mb(17,"input",9),s.Jc(18,d,2,0,"small",10),s.Pb(),s.Qb(19,"div",7),s.Qb(20,"label",11),s.Lc(21,"Floor Number *"),s.Pb(),s.Mb(22,"input",12),s.Jc(23,h,2,0,"small",10),s.Pb(),s.Pb(),s.Qb(24,"div",6),s.Qb(25,"div",7),s.Qb(26,"label",8),s.Lc(27,"Number Beds *"),s.Pb(),s.Mb(28,"input",13),s.Jc(29,p,2,0,"small",10),s.Pb(),s.Qb(30,"div",7),s.Qb(31,"label",11),s.Lc(32,"Room Size (Square feet)*"),s.Pb(),s.Mb(33,"input",14),s.Jc(34,g,2,0,"small",10),s.Pb(),s.Pb(),s.Qb(35,"div",6),s.Qb(36,"div",15),s.Qb(37,"label",16),s.Lc(38,"Price *"),s.Pb(),s.Mb(39,"input",17),s.Jc(40,v,2,0,"small",10),s.Pb(),s.Qb(41,"div",15),s.Qb(42,"label",18),s.Lc(43,"Discount amount (%) *"),s.Pb(),s.Qb(44,"input",19),s.bc("ngModelChange",function(t){return e.category.discount=t}),s.Pb(),s.Jc(45,P,2,0,"small",10),s.Pb(),s.Pb(),s.Qb(46,"div",20),s.Qb(47,"h3",0),s.Lc(48,"Facilities"),s.Pb(),s.Qb(49,"div",21),s.Qb(50,"div",22),s.Qb(51,"div",23),s.Mb(52,"input",24),s.Qb(53,"label",25),s.Lc(54," Front Face "),s.Pb(),s.Pb(),s.Pb(),s.Qb(55,"div",22),s.Qb(56,"div",23),s.Mb(57,"input",26),s.Qb(58,"label",27),s.Lc(59," Back Face "),s.Pb(),s.Pb(),s.Pb(),s.Qb(60,"div",22),s.Qb(61,"div",23),s.Mb(62,"input",28),s.Qb(63,"label",29),s.Lc(64," High Commode"),s.Pb(),s.Pb(),s.Pb(),s.Qb(65,"div",22),s.Qb(66,"div",23),s.Mb(67,"input",30),s.Qb(68,"label",31),s.Lc(69," Breakfast "),s.Pb(),s.Pb(),s.Pb(),s.Qb(70,"div",22),s.Qb(71,"div",23),s.Mb(72,"input",32),s.Qb(73,"label",33),s.Lc(74," Internet "),s.Pb(),s.Pb(),s.Pb(),s.Qb(75,"div",22),s.Qb(76,"div",23),s.Mb(77,"input",34),s.Qb(78,"label",35),s.Lc(79," Air Conditioned "),s.Pb(),s.Pb(),s.Pb(),s.Qb(80,"div",22),s.Qb(81,"div",23),s.Mb(82,"input",36),s.Qb(83,"label",37),s.Lc(84," TV "),s.Pb(),s.Pb(),s.Pb(),s.Qb(85,"div",22),s.Qb(86,"div",23),s.Mb(87,"input",38),s.Qb(88,"label",39),s.Lc(89," Geyser "),s.Pb(),s.Pb(),s.Pb(),s.Qb(90,"div",22),s.Qb(91,"div",23),s.Mb(92,"input",40),s.Qb(93,"label",41),s.Lc(94," HillView "),s.Pb(),s.Pb(),s.Pb(),s.Qb(95,"div",22),s.Qb(96,"div",23),s.Mb(97,"input",42),s.Qb(98,"label",43),s.Lc(99," Sea View "),s.Pb(),s.Pb(),s.Pb(),s.Qb(100,"div",22),s.Qb(101,"div",23),s.Mb(102,"input",44),s.Qb(103,"label",45),s.Lc(104," Telephone "),s.Pb(),s.Pb(),s.Pb(),s.Qb(105,"div",22),s.Qb(106,"div",23),s.Mb(107,"input",46),s.Qb(108,"label",47),s.Lc(109," Bath Towel "),s.Pb(),s.Pb(),s.Pb(),s.Qb(110,"div",22),s.Qb(111,"div",23),s.Mb(112,"input",48),s.Qb(113,"label",49),s.Lc(114," Table And Chair "),s.Pb(),s.Pb(),s.Pb(),s.Qb(115,"div",22),s.Qb(116,"div",23),s.Mb(117,"input",50),s.Qb(118,"label",51),s.Lc(119," In Middle "),s.Pb(),s.Pb(),s.Pb(),s.Qb(120,"div",22),s.Qb(121,"div",23),s.Mb(122,"input",52),s.Qb(123,"label",53),s.Lc(124," Kitchen "),s.Pb(),s.Pb(),s.Pb(),s.Qb(125,"div",22),s.Qb(126,"div",23),s.Mb(127,"input",54),s.Qb(128,"label",55),s.Lc(129," Bath Tub "),s.Pb(),s.Pb(),s.Pb(),s.Qb(130,"div",22),s.Qb(131,"div",23),s.Mb(132,"input",56),s.Qb(133,"label",57),s.Lc(134," Balcony "),s.Pb(),s.Pb(),s.Pb(),s.Qb(135,"div",22),s.Qb(136,"div",23),s.Mb(137,"input",58),s.Qb(138,"label",59),s.Lc(139," Extra Beds "),s.Pb(),s.Pb(),s.Pb(),s.Qb(140,"div",22),s.Qb(141,"div",23),s.Mb(142,"input",60),s.Qb(143,"label",61),s.Lc(144," Pets Allowed "),s.Pb(),s.Pb(),s.Pb(),s.Qb(145,"div",22),s.Qb(146,"div",23),s.Mb(147,"input",62),s.Qb(148,"label",63),s.Lc(149," Has Payment Method "),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(150,"div",64),s.Qb(151,"span",65),s.bc("mouseenter",function(){return e.mouseoverShifting=!0}),s.Qb(152,"button",66),s.Lc(153),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(1),s.Nc("",e.exists?"Update":"Create"," Room form"),s.zb(1),s.mc("formGroup",e.form),s.zb(5),s.Nc(" ",null==e.hotel?null:e.hotel.name," "),s.zb(5),s.Nc(" ",null==e.category?null:e.category.name," "),s.zb(6),s.mc("ngIf",(null==e.form.controls.roomNumber.errors?null:e.form.controls.roomNumber.errors.required)&&(e.form.controls.roomNumber.dirty||e.mouseoverShifting)),s.zb(5),s.mc("ngIf",(null==e.form.controls.floorNumber.errors?null:e.form.controls.floorNumber.errors.required)&&(e.form.controls.floorNumber.dirty||e.mouseoverShifting)),s.zb(6),s.mc("ngIf",(null==e.form.controls.numberOfBed.errors?null:e.form.controls.numberOfBed.errors.required)&&(e.form.controls.numberOfBed.dirty||e.mouseoverShifting)),s.zb(5),s.mc("ngIf",(null==e.form.controls.roomSize.errors?null:e.form.controls.roomSize.errors.required)&&(e.form.controls.roomSize.dirty||e.mouseoverShifting)),s.zb(6),s.mc("ngIf",(null==e.form.controls.price.errors?null:e.form.controls.price.errors.required)&&(e.form.controls.price.dirty||e.mouseoverShifting)),s.zb(4),s.mc("ngModel",e.category.discount),s.zb(1),s.mc("ngIf",(null==e.form.controls.discount.errors?null:e.form.controls.discount.errors.required)&&(e.form.controls.discount.dirty||e.mouseoverShifting)),s.zb(107),s.mc("ngClass",s.sc(13,y,e.form.invalid,e.exists,!e.exists)),s.zb(1),s.Nc(" ",e.exists?"Update":"Create"," "))},directives:[m.y,m.o,m.h,m.b,m.n,m.g,b.p,m.s,m.i,m.a,b.n],styles:[""],changeDetection:0}),t}(),L=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},w=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function k(t,e){if(1&t&&(s.Qb(0,"li",7),s.Mb(1,"loading",10),s.Pb()),2&t){var o=s.ec(2);s.zb(1),s.mc("message",o.message)}}function C(t,e){if(1&t){var o=s.Rb();s.Qb(0,"a",11),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onSelectCategory(t.id)}),s.Mb(1,"i",12),s.Lc(2),s.Pb()}if(2&t){var n=e.$implicit;s.zb(2),s.Nc(" ",n.name," ")}}function z(t,e){if(1&t&&(s.Qb(0,"ul",6),s.Qb(1,"li",7),s.Qb(2,"h5"),s.Lc(3,"Category list"),s.Pb(),s.Qb(4,"small"),s.Lc(5,"Choose a category from below list"),s.Pb(),s.Pb(),s.Jc(6,k,2,1,"li",8),s.Jc(7,C,3,1,"a",9),s.Pb()),2&t){var o=s.ec();s.zb(6),s.mc("ngIf",o.showCategoryLoading),s.zb(1),s.mc("ngForOf",o.categories)}}function S(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",13),s.Qb(1,"room-form",14),s.bc("create",function(t){return s.Ac(o),s.ec().onCreate(t)})("update",function(t){return s.Ac(o),s.ec().onUpdate(t)}),s.Pb(),s.Pb()}if(2&t){var n=s.ec();s.zb(1),s.mc("hotel",n.hotel)("category",n.category)("room",n.room)}}var M=function(){function t(t,e,o,n,i,r){this.hotelService=t,this.categoryService=e,this.roomService=o,this.router=n,this.toastrService=i,this.activeRoute=r,this.showCategory=!1,this.showCategoryLoading=!1,this.hotelId=r.snapshot.params.hotelId}return t.prototype.ngOnInit=function(){this.hotelId&&(this.getAdminCategories(this.hotelId),this.getAdminHotel(this.hotelId))},t.prototype.getAdminHotel=function(t){return L(this,void 0,void 0,function(){var t=this;return w(this,function(e){return this.hotelService.getAdminHotel(this.hotelId).subscribe(function(e){t.hotel=e}),[2]})})},t.prototype.getAdminCategories=function(t){return L(this,void 0,void 0,function(){var e=this;return w(this,function(o){switch(o.label){case 0:return this.message="Category list loading",this.showCategoryLoading=!0,[4,this.categoryService.getCategoryListByHotelId(t).subscribe(function(t){e.categories=t,e.showCategory=!0,e.showCategoryLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var e=this.categories.find(function(e){return e.id===t});this.category=e},t.prototype.onCreate=function(t){var e=this;this.roomService.saveAdminRoom(t,this.hotel.id).subscribe(function(t){e.toastrService.success("Room created successfully","Success"),e.router.navigate(["/dashboard/admin/rooms"])})},t.prototype.onUpdate=function(t){var e=this;this.roomService.updateAdminRoom(this.hotel.id,t.id,t).subscribe(function(t){e.toastrService.success("Room updated successfully","Success"),e.router.navigate(["/dashboard/admin/rooms"])})},t.\u0275fac=function(e){return new(e||t)(s.Lb(c.a),s.Lb(r.a),s.Lb(a.a),s.Lb(n.b),s.Lb(l.b),s.Lb(n.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-add-by-hotel-id"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Lc(2,"Add Rooms"),s.Pb(),s.Pb(),s.Qb(3,"div",0),s.Qb(4,"div",2),s.Qb(5,"div",3),s.Jc(6,z,8,2,"ul",4),s.Pb(),s.Jc(7,S,2,3,"div",5),s.Pb(),s.Pb()),2&t&&(s.zb(6),s.mc("ngIf",e.showCategory),s.zb(1),s.mc("ngIf",null!=e.hotel&&e.hotel.id&&e.category&&e.category.id))},directives:[b.p,b.o,u.a,Q],styles:[""]}),t}(),I=o("G0yt"),x=o("/YPm"),R=o("YXrq"),D=o("uEz7"),A=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},N=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function F(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",12),s.Lc(1),s.Qb(2,"button",13),s.bc("click",function(){return s.Ac(o),s.ec().clear()}),s.Lc(3,"Clear"),s.Pb(),s.Pb()}if(2&t){var n=s.ec();s.zb(1),s.Nc(" ",n.message," ")}}function O(t,e){if(1&t){var o=s.Rb();s.Qb(0,"tr"),s.Qb(1,"td"),s.Qb(2,"a",19),s.Lc(3),s.Pb(),s.Pb(),s.Qb(4,"td"),s.Lc(5),s.Pb(),s.Qb(6,"td"),s.Lc(7),s.Pb(),s.Qb(8,"td"),s.Lc(9),s.Pb(),s.Qb(10,"td"),s.Lc(11),s.Pb(),s.Qb(12,"td"),s.Lc(13),s.Pb(),s.Qb(14,"td"),s.Lc(15),s.Pb(),s.Qb(16,"td"),s.Lc(17),s.Pb(),s.Qb(18,"td"),s.Qb(19,"div",20),s.Qb(20,"a",21),s.Lc(21,"Images"),s.Pb(),s.Qb(22,"a",21),s.Lc(23,"Edit"),s.Pb(),s.Qb(24,"button",22),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onDelete(t.id,t.roomNumber)}),s.Lc(25," Delete "),s.Pb(),s.Pb(),s.Pb(),s.Pb()}if(2&t){var n=e.$implicit,i=s.ec(2);s.zb(2),s.oc("routerLink","/dashboard/admin/rooms/details/",n.id,""),s.zb(1),s.Nc(" ",n.roomNumber," "),s.zb(2),s.Mc(n.category.name),s.zb(2),s.Mc(n.floorNumber),s.zb(2),s.Nc("",n.price," BDT"),s.zb(2),s.Nc("",n.currentDiscount," BDT"),s.zb(2),s.Nc("",i.hotel.hotelswavePercentage," %"),s.zb(2),s.Nc("",0!=i.hotel.hotelswavePercentage?(n.price-n.currentDiscount)*i.hotel.hotelswavePercentage/100:n.price-n.currentDiscount," BDT"),s.zb(2),s.Nc("",n.price-n.currentDiscount," BDT"),s.zb(3),s.oc("routerLink","/dashboard/admin/rooms/details/",n.id,""),s.zb(2),s.oc("routerLink","/dashboard/admin/rooms/add/",n.id,"")}}function H(t,e){if(1&t){var o=s.Rb();s.Qb(0,"pagination",23),s.bc("getPage",function(t){s.Ac(o);var e=s.ec(2);return e.getAdminRoomPage(e.hotel.id,t)}),s.Pb()}if(2&t){var n=s.ec(2);s.mc("page",n.roomPage)}}function J(t,e){if(1&t&&(s.Qb(0,"table",14),s.Qb(1,"thead"),s.Qb(2,"tr"),s.Qb(3,"td",15),s.Qb(4,"h5"),s.Lc(5),s.Pb(),s.Pb(),s.Pb(),s.Qb(6,"tr"),s.Qb(7,"th"),s.Lc(8,"Room no."),s.Pb(),s.Qb(9,"th"),s.Lc(10,"Category"),s.Pb(),s.Qb(11,"th"),s.Lc(12,"Floor"),s.Pb(),s.Qb(13,"th"),s.Lc(14,"Price"),s.Pb(),s.Qb(15,"th"),s.Lc(16,"Discount"),s.Pb(),s.Qb(17,"th"),s.Lc(18,"ITA Com. (%)"),s.Pb(),s.Qb(19,"th"),s.Lc(20,"ITA Com. BDT"),s.Pb(),s.Qb(21,"th"),s.Lc(22,"Payable"),s.Pb(),s.Mb(23,"th"),s.Pb(),s.Pb(),s.Qb(24,"tbody"),s.Jc(25,O,26,11,"tr",16),s.Pb(),s.Qb(26,"tfoot"),s.Qb(27,"tr"),s.Qb(28,"td",17),s.Jc(29,H,1,1,"pagination",18),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t){var o=s.ec();s.zb(5),s.Nc(" ",null==o.hotel?null:o.hotel.name," - Room List "),s.zb(20),s.mc("ngForOf",null==o.roomPage?null:o.roomPage.content),s.zb(4),s.mc("ngIf",null!=o.roomPage)}}function q(t,e){if(1&t&&(s.Qb(0,"div"),s.Mb(1,"loading",24),s.Pb()),2&t){var o=s.ec();s.zb(1),s.mc("message",o.message)}}var B=function(){function t(t,e){this.hotelService=t,this.roomService=e,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0,this.myDate=new Date}return t.prototype.ngOnInit=function(){this.getAdminHotelPage()},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),A(this,void 0,void 0,function(){var e=this;return N(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1,e.message=""})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.getAdminRoomPage(t.id)},t.prototype.getAdminRoomPage=function(t,e){return void 0===e&&(e=0),A(this,void 0,void 0,function(){var o=this;return N(this,function(n){switch(n.label){case 0:return this.message="Room list loading",this.showRoomLoading=!0,[4,this.roomService.getAdminRoomPageByHotelId(t,e).subscribe(function(t){o.roomPage=t,o.showRoomLoading=!1,o.message=""})];case 1:return n.sent(),[2]}})})},t.prototype.onDelete=function(t,e){return A(this,void 0,void 0,function(){var o=this;return N(this,function(n){switch(n.label){case 0:return confirm('Are you sure to delete room number "'+e+'" with id '+t)?[4,this.roomService.deleteAdminRoom(t).subscribe(function(t){"success"===t.response?(o.message="Room deleted successfully",o.getAdminRoomPage(o.hotel.id)):o.message="Room deleted Failed"})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.clear=function(){this.message=""},t.\u0275fac=function(e){return new(e||t)(s.Lb(c.a),s.Lb(a.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-list"]],decls:14,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel"],["routerLink","/dashboard/admin/rooms/add",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-plus"],[1,"col-md-9","px-0","px-md-3","mt-3","mt-md-0"],["class","alert alert-success","role","alert",4,"ngIf"],["class","table border table-responsive-sm",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"table","border","table-responsive-sm"],["colspan","8",2,"background-color","#e9ecef"],[4,"ngFor","ngForOf"],["colspan","8"],[3,"page","getPage",4,"ngIf"],[2,"text-decoration","none",3,"routerLink"],["role","group","aria-label","Basic example",1,"btn-group","btn-group-sm"],[1,"btn","btn-sm","btn-secondary",3,"routerLink"],[1,"btn","btn-sm","btn-secondary",3,"click"],[3,"page","getPage"],[3,"message"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Lc(2,"Room List"),s.Pb(),s.Pb(),s.Qb(3,"div",2),s.Qb(4,"div",3),s.Qb(5,"div",4),s.Qb(6,"admin-hotel-list",5),s.bc("hotel",function(t){return e.onSelectHotel(t)}),s.Pb(),s.Qb(7,"a",6),s.Mb(8,"i",7),s.Lc(9," Add room "),s.Pb(),s.Pb(),s.Qb(10,"div",8),s.Jc(11,F,4,1,"div",9),s.Jc(12,J,30,3,"table",10),s.Jc(13,q,2,1,"div",11),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(11),s.mc("ngIf",e.message.length>0),s.zb(1),s.mc("ngIf",null!=(null==e.roomPage?null:e.roomPage.content)),s.zb(1),s.mc("ngIf",e.showRoomLoading))},directives:[x.a,n.c,b.p,b.o,D.a,u.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem .15rem .15rem 10px}"]}),t}(),T=o("/e7+");function E(t,e){if(1&t&&(s.Qb(0,"option",24),s.Lc(1),s.Pb()),2&t){var o=e.$implicit;s.mc("value",o.key),s.zb(1),s.Nc(" ",o.value," ")}}var _=function(t){return{disabled:t}},V=function(){function t(t){this.builder=t,this.create=new s.n,this.close=new s.n,this.mouseoverShifting=!1,this.statusEnum=R.a,this.createForm()}return t.prototype.ngOnChanges=function(){this.room&&this.room.id&&this.form.patchValue({roomId:this.room.id})},t.prototype.createForm=function(){this.form=this.builder.group({roomId:["",m.w.required],startDate:["",m.w.required],endDate:["",m.w.required],satus:["",m.w.required],changeSimilar:!1})},t.prototype.submit=function(){this.form.valid&&(this.create.emit(this.form.value),this.form.reset(),this.form.patchValue({roomId:this.room.id}))},t.prototype.onClose=function(){this.close.emit(!0)},t.\u0275fac=function(e){return new(e||t)(s.Lb(m.d))},t.\u0275cmp=s.Fb({type:t,selectors:[["status-form"]],inputs:{room:"room"},outputs:{create:"create",close:"close"},features:[s.xb],decls:37,vars:8,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","satus"],["id","satus","formControlName","satus",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","form-check"],["type","checkbox","id","changeSimilar","formControlName","changeSimilar",1,"form-check-input"],["for","changeSimilar",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-warning","btn-success","mx-1",3,"ngClass"],[1,"btn","btn-sm","btn-light",3,"click"],[3,"value"]],template:function(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"h3",3),s.Lc(4,"Adjust room status map"),s.Pb(),s.Qb(5,"form",4),s.bc("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),s.Qb(6,"div",5),s.Qb(7,"label",6),s.Lc(8,"Room number"),s.Pb(),s.Qb(9,"label",7),s.Lc(10),s.Pb(),s.Pb(),s.Qb(11,"div",5),s.Qb(12,"label",8),s.Lc(13,"Start date"),s.Pb(),s.Qb(14,"input",9,10),s.bc("click",function(){return s.Ac(o),s.xc(15).toggle()}),s.Pb(),s.Pb(),s.Qb(16,"div",5),s.Qb(17,"label",11),s.Lc(18,"End date"),s.Pb(),s.Qb(19,"input",12,13),s.bc("click",function(){return s.Ac(o),s.xc(20).toggle()}),s.Pb(),s.Pb(),s.Qb(21,"div",5),s.Qb(22,"label",14),s.Lc(23,"Status"),s.Pb(),s.Qb(24,"select",15),s.Jc(25,E,2,2,"option",16),s.fc(26,"keyvalue"),s.Pb(),s.Pb(),s.Qb(27,"div",17),s.Mb(28,"input",18),s.Qb(29,"label",19),s.Lc(30," Change similar "),s.Pb(),s.Pb(),s.Qb(31,"div",20),s.Qb(32,"span",21),s.bc("mouseenter",function(){return e.mouseoverShifting=!0}),s.Qb(33,"button",22),s.Lc(34," Submit "),s.Pb(),s.Pb(),s.Qb(35,"button",23),s.bc("click",function(){return e.onClose()}),s.Lc(36,"Close"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()}2&t&&(s.zb(5),s.mc("formGroup",e.form),s.zb(5),s.Nc(" ",null==e.room?null:e.room.roomNumber," "),s.zb(15),s.mc("ngForOf",s.gc(26,4,e.statusEnum)),s.zb(8),s.mc("ngClass",s.qc(6,_,e.form.invalid)))},directives:[m.y,m.o,m.h,m.b,I.k,m.n,m.g,m.v,b.o,m.a,b.n,m.r,m.x],pipes:[b.j],styles:[""]}),t}(),$=o("53Co"),U=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},j=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function G(t,e){if(1&t){var o=s.Rb();s.Qb(0,"admin-hotel-list",11),s.bc("hotel",function(t){return s.Ac(o),s.ec().onSelectHotel(t)}),s.Pb()}}function Y(t,e){if(1&t){var o=s.Rb();s.Qb(0,"span"),s.Qb(1,"a",18),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onSelectCategory(t)}),s.Lc(2),s.Pb(),s.Pb()}if(2&t){var n=e.$implicit,i=s.ec(2);s.zb(1),s.mc("ngClass",n==i.category?"btn-primary":"btn-outline-info"),s.zb(1),s.Nc(" ",n," ")}}function K(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",19),s.Qb(1,"div",20),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onSelectRoom(t.id)}),s.Lc(2),s.Pb(),s.Pb()}if(2&t){var n=e.$implicit;s.zb(2),s.Nc(" ",n.roomNumber," ")}}function X(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",12),s.Qb(1,"h4"),s.Lc(2),s.Pb(),s.Qb(3,"div",13),s.Jc(4,Y,3,2,"span",14),s.Pb(),s.Qb(5,"div",15),s.Qb(6,"h4"),s.Lc(7),s.Pb(),s.Pb(),s.Jc(8,K,3,1,"div",16),s.Qb(9,"a",17),s.bc("click",function(){return s.Ac(o),s.ec().onBacktoHotel()}),s.Lc(10," <<< Hotel list "),s.Pb(),s.Pb()}if(2&t){var n=s.ec();s.zb(2),s.Nc(" ",n.hotel.name," "),s.zb(2),s.mc("ngForOf",n.categoryList),s.zb(3),s.Nc("",n.category," Room list"),s.zb(1),s.mc("ngForOf",n.filteredRoomList)}}function Z(t,e){if(1&t){var o=s.Rb();s.Qb(0,"status-form",21),s.bc("create",function(t){return s.Ac(o),s.ec().onCreate(t)})("close",function(){return s.Ac(o),s.ec().showForm=!1}),s.Pb()}if(2&t){var n=s.ec();s.mc("room",n.room)}}function W(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",30),s.Qb(1,"button",31),s.bc("click",function(){return s.Ac(o),s.ec(2).onAdjustStatusMap()}),s.Lc(2," Edit "),s.Pb(),s.Pb()}}function tt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",22),s.Qb(1,"div",23),s.Qb(2,"div",24),s.Qb(3,"div",25),s.Qb(4,"div",26),s.Mb(5,"i",27),s.Pb(),s.Pb(),s.Qb(6,"input",28),s.bc("selected",function(t){return s.Ac(o),s.ec().selectedDate(t)}),s.Pb(),s.Pb(),s.Pb(),s.Jc(7,W,3,0,"div",29),s.Pb()}if(2&t){var n=s.ec();s.zb(6),s.mc("options",n.options),s.zb(1),s.mc("ngIf",n.room)}}function et(t,e){if(1&t&&(s.Qb(0,"tr"),s.Qb(1,"td"),s.Lc(2),s.fc(3,"date"),s.Pb(),s.Qb(4,"td"),s.Lc(5),s.Pb(),s.Pb()),2&t){var o=e.$implicit;s.zb(2),s.Mc(s.hc(3,2,o.key,"d MMM,yy : EEE")),s.zb(3),s.Mc(o.value)}}function ot(t,e){if(1&t&&(s.Qb(0,"tbody"),s.Jc(1,et,6,5,"tr",14),s.fc(2,"keyvalue"),s.Pb()),2&t){var o=s.ec(2);s.zb(1),s.mc("ngForOf",s.gc(2,1,o.statusMap))}}function nt(t,e){1&t&&(s.Qb(0,"tr"),s.Qb(1,"td",34),s.Mb(2,"i",35),s.Lc(3," Status map loading "),s.Pb(),s.Pb())}function it(t,e){if(1&t&&(s.Qb(0,"div"),s.Qb(1,"table",32),s.Qb(2,"thead"),s.Qb(3,"tr"),s.Qb(4,"td",33),s.Qb(5,"h5"),s.Lc(6),s.Pb(),s.Pb(),s.Pb(),s.Qb(7,"tr"),s.Qb(8,"th"),s.Lc(9,"Date"),s.Pb(),s.Qb(10,"th"),s.Lc(11,"Room Satus"),s.Pb(),s.Pb(),s.Pb(),s.Jc(12,ot,3,3,"tbody",10),s.Jc(13,nt,4,0,"tr",10),s.Pb(),s.Pb()),2&t){var o=s.ec();s.zb(6),s.Nc("Status map for Room number : ",o.room.roomNumber,""),s.zb(6),s.mc("ngIf",o.statusMap),s.zb(1),s.mc("ngIf",!o.statusMap)}}var rt=function(){function t(t,e,o){this.hotelService=t,this.roomService=e,this.util=o,this.showForm=!1,this.showRoomList=!1,this.showHotelLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30),this.setDateRanges()},t.prototype.setDateRanges=function(){this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),U(this,void 0,void 0,function(){var e=this;return j(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.hotelId=t.id,this.getAdminRoomList(t.id)},t.prototype.getAdminRoomList=function(t){return U(this,void 0,void 0,function(){var e=this;return j(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoomListByHotelId(t).subscribe(function(t){e.roomList=t,e.showRoomList=!0,e.filteredRoomList=t,e.category="All",e.categoryList=["All"],e.roomList.forEach(function(t){e.categoryList.includes(t.category.name)||e.categoryList.push(t.category.name)})})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"===t?this.roomList:this.roomList.filter(function(e){return e.category.name===t})},t.prototype.onBacktoHotel=function(){this.showRoomList=!1,this.room=null,this.statusMap=null,localStorage.removeItem("hotelId")},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.room&&this.room.id&&this.onSelectRoom(this.room.id)},t.prototype.onSelectRoom=function(t){var e=this;this.room=this.roomList.find(function(e){return e.id===t}),this.statusMap=null,this.roomService.getAdminStatusMap(t,this.util.getDateString(this.startDate),this.util.getDateString(this.endDate)).subscribe(function(t){e.statusMap=t})},t.prototype.onAdjustStatusMap=function(){this.showForm=!0},t.prototype.onCreate=function(t){var e=this;this.roomService.updateAdminStatusMap(t.roomId,this.util.makeDateString(t.startDate),this.util.makeDateString(t.endDate),t.satus,t.changeSimilar).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(s.Lb(c.a),s.Lb(a.a),s.Lb(T.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-status-map"]],decls:12,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","row m-0 mt-2",4,"ngIf"],[1,"col-md-9"],[3,"room","create","close",4,"ngIf"],["class","form-row",4,"ngIf"],[4,"ngIf"],[3,"hotel"],[1,"row","m-0","mt-2"],[1,"col-12","p-0","mt-1"],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],["class","col-md-2 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-block","btn-info","text-center",3,"click"],[1,"btn","btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"],[3,"room","create","close"],[1,"form-row"],[1,"form-group","col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"table","border"],["colspan","2",2,"background-color","#e9ecef"],["colspan","4",1,"text-center"],[1,"fa","fa-refresh"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Lc(2,"Room status map"),s.Pb(),s.Pb(),s.Qb(3,"div",2),s.Qb(4,"div",3),s.Qb(5,"div",4),s.Jc(6,G,1,0,"admin-hotel-list",5),s.Jc(7,X,11,4,"div",6),s.Pb(),s.Qb(8,"div",7),s.Jc(9,Z,1,1,"status-form",8),s.Jc(10,tt,8,2,"div",9),s.Jc(11,it,14,3,"div",10),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(6),s.mc("ngIf",!e.showRoomList),s.zb(1),s.mc("ngIf",e.showRoomList),s.zb(2),s.mc("ngIf",e.showForm),s.zb(1),s.mc("ngIf",!e.showForm),s.zb(1),s.mc("ngIf",e.room&&!e.showForm))},directives:[b.p,x.a,b.o,b.n,V,$.b],pipes:[b.j,b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.2rem}.room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:5px;padding:3px 5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}(),ct=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},at=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function st(t,e){if(1&t){var o=s.Rb();s.Qb(0,"admin-hotel-list",13),s.bc("hotel",function(t){return s.Ac(o),s.ec(2).onSelectHotel(t)}),s.Pb()}}function lt(t,e){1&t&&(s.Qb(0,"a",14),s.Mb(1,"i",15),s.Lc(2," Room list "),s.Pb())}function bt(t,e){if(1&t&&(s.Qb(0,"li",17),s.Mb(1,"loading",22),s.Pb()),2&t){var o=s.ec(3);s.zb(1),s.mc("message",o.message)}}var ut=function(t){return{active:t}};function mt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"a",23),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(3).onSelectCategory(t.id)}),s.Mb(1,"i",24),s.Lc(2),s.Pb()}if(2&t){var n=e.$implicit,i=s.ec(3);s.mc("ngClass",s.qc(2,ut,n.id==(null==i.category?null:i.category.id))),s.zb(2),s.Nc(" ",n.name," ")}}function ft(t,e){if(1&t){var o=s.Rb();s.Qb(0,"ul",16),s.Qb(1,"li",17),s.Qb(2,"h5"),s.Lc(3),s.Pb(),s.Qb(4,"small"),s.Lc(5,"Choose a category from below list"),s.Pb(),s.Pb(),s.Jc(6,bt,2,1,"li",18),s.Jc(7,mt,3,4,"a",19),s.Qb(8,"a",20),s.bc("click",function(){return s.Ac(o),s.ec(2).onBacktoHotel()}),s.Mb(9,"i",21),s.Lc(10," Hotel list "),s.Pb(),s.Pb()}if(2&t){var n=s.ec(2);s.zb(3),s.Nc("",null==n.hotel?null:n.hotel.name," Category list"),s.zb(3),s.mc("ngIf",n.showCategoryLoading),s.zb(1),s.mc("ngForOf",n.categories)}}function dt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",25),s.Qb(1,"room-form",26),s.bc("create",function(t){return s.Ac(o),s.ec(2).onCreate(t)})("update",function(t){return s.Ac(o),s.ec(2).onUpdate(t)}),s.Pb(),s.Pb()}if(2&t){var n=s.ec(2);s.zb(1),s.mc("hotel",n.hotel)("category",n.category)("room",n.room)}}function ht(t,e){if(1&t&&(s.Qb(0,"div",0),s.Qb(1,"div",7),s.Qb(2,"div",8),s.Jc(3,st,1,0,"admin-hotel-list",9),s.Jc(4,lt,3,0,"a",10),s.Jc(5,ft,11,3,"ul",11),s.Pb(),s.Jc(6,dt,2,3,"div",12),s.Pb(),s.Pb()),2&t){var o=s.ec();s.zb(3),s.mc("ngIf",!o.showCategory),s.zb(1),s.mc("ngIf",!o.showCategory),s.zb(1),s.mc("ngIf",o.showCategory),s.zb(1),s.mc("ngIf",null!=o.hotel&&o.hotel.id&&o.category&&o.category.id)}}function pt(t,e){1&t&&(s.Ob(0),s.Mb(1,"app-list"),s.Nb())}function gt(t,e){1&t&&(s.Ob(0),s.Mb(1,"app-status-map"),s.Nb())}var vt=function(){function t(t,e,o,n,i,r){this.hotelService=t,this.categoryService=e,this.roomService=o,this.activeRoute=n,this.router=i,this.toastrService=r,this.activeNav=1,this.showCategory=!1,this.showCategoryLoading=!1,this.showHotelLoading=!1,this.short=!0,this.id=n.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&this.getAdminRoom(this.id)},t.prototype.getAdminRoom=function(t){return ct(this,void 0,void 0,function(){var e=this;return at(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoom(t).subscribe(function(t){e.room=t,e.category=e.room.category,e.hotel=e.room.category.hotel})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminCategories=function(t){return ct(this,void 0,void 0,function(){var e=this;return at(this,function(o){switch(o.label){case 0:return this.message="Category list loading",this.showCategoryLoading=!0,[4,this.categoryService.getCategoryListByHotelId(t).subscribe(function(t){e.categories=t,e.showCategory=!0,e.showCategoryLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.getAdminCategories(t.id),this.getAdminHotel(t.id)},t.prototype.getAdminHotel=function(t){return ct(this,void 0,void 0,function(){var e=this;return at(this,function(o){switch(o.label){case 0:return[4,this.hotelService.getAdminHotel(t).subscribe(function(t){e.hotel=t})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var e=this.categories.find(function(e){return e.id===t});this.category=e},t.prototype.onBacktoHotel=function(){this.categories=null,this.category=null,this.showCategory=!1,localStorage.removeItem("hotelId")},t.prototype.onCreate=function(t){var e=this;t.discountPercent=t.discount,t.discount=Math.floor(t.price*t.discount/100),this.roomService.saveAdminRoom(t,this.hotel.id).subscribe(function(t){e.toastrService.success("Room created successfully","Success"),e.router.navigate(["/dashboard/admin/rooms"])})},t.prototype.onUpdate=function(t){var e=this;t.discountPercent=t.discount,t.discount=Math.floor(t.price*t.discount/100),this.roomService.updateAdminRoom(this.hotel.id,this.room.id,t).subscribe(function(t){e.toastrService.success("Room updated successfully","Success"),e.router.navigate(["/dashboard/admin/rooms"])})},t.\u0275fac=function(e){return new(e||t)(s.Lb(c.a),s.Lb(r.a),s.Lb(a.a),s.Lb(n.a),s.Lb(n.b),s.Lb(l.b))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-add"]],decls:16,vars:5,consts:[[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","list-group-item list-group-item-action list-group-item-info text-center","routerLink","/dashboard/admin/rooms",4,"ngIf"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[3,"hotel"],["routerLink","/dashboard/admin/rooms",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-list"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"click"],[1,"fa","fa-chevron-left"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"ngClass","click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,e){if(1&t&&(s.Qb(0,"div",0),s.Qb(1,"ul",1,2),s.bc("activeIdChange",function(t){return e.activeNav=t}),s.Qb(3,"li",3),s.Qb(4,"a",4),s.Lc(5,"Create"),s.Pb(),s.Jc(6,ht,7,4,"ng-template",5),s.Pb(),s.Qb(7,"li",3),s.Qb(8,"a",4),s.Lc(9,"List"),s.Pb(),s.Jc(10,pt,2,0,"ng-template",5),s.Pb(),s.Qb(11,"li",3),s.Qb(12,"a",4),s.Lc(13,"Status Map"),s.Pb(),s.Jc(14,gt,2,0,"ng-template",5),s.Pb(),s.Pb(),s.Mb(15,"div",6),s.Pb()),2&t){var o=s.xc(2);s.zb(1),s.mc("activeId",e.activeNav),s.zb(2),s.mc("ngbNavItem",1),s.zb(4),s.mc("ngbNavItem",2),s.zb(4),s.mc("ngbNavItem",4),s.zb(4),s.mc("ngbNavOutlet",o)}},directives:[I.n,I.p,I.q,I.o,I.s,b.p,x.a,n.c,b.o,u.a,b.n,Q,B,rt],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;padding:.25rem 1.25rem}"]}),t}(),Pt=o("LLt/"),yt=o("R/zX"),Qt=o("eIep"),Lt=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},wt=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function kt(t,e){if(1&t&&s.Mb(0,"img",38),2&t){var o=s.ec();s.mc("src",o.imageUrl,s.Dc)}}function Ct(t,e){if(1&t&&(s.Qb(0,"div",39),s.Lc(1),s.Pb()),2&t){var o=s.ec();s.zb(1),s.Nc(" ",o.errorMessage," ")}}function zt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"p"),s.Qb(1,"input",40),s.bc("change",function(t){return s.Ac(o),s.ec().fileChange(t)}),s.Pb(),s.Pb()}}function St(t,e){1&t&&(s.Qb(0,"div"),s.Lc(1," Uploaded "),s.Mb(2,"i",41),s.Pb())}function Mt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"button",42),s.bc("click",function(){return s.Ac(o),s.ec().startUpload()}),s.Lc(1," Upload "),s.Pb()}}function It(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div"),s.Qb(1,"button",44),s.bc("click",function(){s.Ac(o);var t=s.ec().$implicit;return s.ec().deleteImage(t)}),s.Qb(2,"span"),s.Lc(3,"\xd7"),s.Pb(),s.Pb(),s.Qb(4,"div",45),s.Mb(5,"img",38),s.Pb(),s.Pb()}if(2&t){var n=s.ec().$implicit;s.zb(5),s.mc("src",n,s.Dc)}}function xt(t,e){if(1&t&&(s.Qb(0,"div",43),s.Jc(1,It,6,1,"div",32),s.Pb()),2&t){var o=e.$implicit;s.zb(1),s.mc("ngIf",o.length)}}var Rt=function(){function t(t,e,o,n){this.roomService=t,this.auth=e,this.activatedRoute=o,this.ng2ImgMax=n,this.errorMessage="",this.roomImagesUrl=[],this.id=o.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&(this.getAdminRoom(this.id),this.loadRoomImages())},t.prototype.getAdminRoom=function(t){return Lt(this,void 0,void 0,function(){var e=this;return wt(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoom(t).subscribe(function(t){e.room=t})];case 1:return o.sent(),[2]}})})},t.prototype.loadRoomImages=function(){return Lt(this,void 0,void 0,function(){var t=this;return wt(this,function(e){switch(e.label){case 0:return[4,this.roomService.getRoomImageUrls(this.id).subscribe(function(e){t.roomImagesUrl=[],null!==e&&null!==e?e.forEach(function(e){t.roomImagesUrl.push(t.roomService.imageUrl+e)}):alert("Didn't find any image")},function(t){console.log(t)})];case 1:return e.sent(),[2]}})})},t.prototype.previewFile=function(t){var e=this,o=new FileReader;o.onload=function(t){e.imageUrl=t.target.result},o.readAsDataURL(t.target.files[0])},t.prototype.fileChange=function(t){this.previewFile(t),this.fileList=t.target.files,this.progressPercentage=0,this.errorMessage=""},t.prototype.startUpload=function(){var t=this;if(this.fileList.length>0){var e=new FormData,o=this.fileList[0];this.ng2ImgMax.resizeImage(o,800,600).pipe(Object(Qt.a)(function(n){return console.log("size : ",n.size),e.append("image",n,o.name),t.roomService.uploadRoomImage(t.id,e)})).subscribe(function(e){t.imageUrl="",t.fileList=null,t.progressPercentage=100,t.loadRoomImages()},function(e){console.log(e),t.errorMessage=e._body})}},t.prototype.deleteImage=function(t){var e=this,o=new URL(t).pathname.split("/"),n=parseInt(o[o.length-1]);this.roomService.deleteRoomImage(o[o.length-3],n).subscribe(function(t){e.roomImagesUrl.splice(n,1,"")},function(t){console.log("Image could not delete")})},t.prototype.resizeImage=function(t,e,o){return this.ng2ImgMax.resizeImage(t,e,o)},t.\u0275fac=function(e){return new(e||t)(s.Lb(a.a),s.Lb(Pt.a),s.Lb(n.a),s.Lb(yt.b))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-details"]],decls:161,vars:36,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","categoryName"],[1,"form-row"],[1,"form-group","col-md-6"],["for","roomNumber"],["for","floorNumber"],[1,"form-group","col-md-3"],["for","price"],["for","discount"],["for","agentDiscount"],["for","vatService"],["id","vatService",1,"form-control"],[1,"border","p-2","my-3"],[1,"text-center"],[1,"form-row","align-items-center"],[1,"col-6","col-md-4"],[1,"form-check-label"],[1,"fa",3,"ngClass"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"form-row","uploadbox"],[1,"col-md-4"],["class","img-thumbnail","alt","",3,"src",4,"ngIf"],[1,"col-md-8","border","p-2","rounded"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-dark btn-sm mr-1",3,"click",4,"ngIf"],["routerLink","/dashboard/admin/rooms",1,"btn","btn-outline-dark","btn-sm"],[1,"col-md-10","offset-md-1","my-2","raised"],[1,"row","py-3"],["class","col-md-3 pb-3",4,"ngFor","ngForOf"],["alt","",1,"img-thumbnail",3,"src"],[1,"alert","alert-danger"],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],[1,"fa","fa-check-square-o","text-success"],["type","button",1,"btn","btn-outline-dark","btn-sm","mr-1",3,"click"],[1,"col-md-3","pb-3"],["type","button",1,"delete",3,"click"],[1,"image-panel"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Lc(2,"Room details"),s.Pb(),s.Pb(),s.Qb(3,"div",2),s.Qb(4,"div",3),s.Qb(5,"div",4),s.Qb(6,"div",5),s.Qb(7,"label",6),s.Lc(8,"Hotel Name"),s.Pb(),s.Qb(9,"label",7),s.Lc(10),s.Pb(),s.Pb(),s.Qb(11,"div",5),s.Qb(12,"label",8),s.Lc(13,"Category Name"),s.Pb(),s.Qb(14,"label",7),s.Lc(15),s.Pb(),s.Pb(),s.Qb(16,"div",9),s.Qb(17,"div",10),s.Qb(18,"label",11),s.Lc(19,"Room Number *"),s.Pb(),s.Qb(20,"label",7),s.Lc(21),s.Pb(),s.Pb(),s.Qb(22,"div",10),s.Qb(23,"label",12),s.Lc(24,"Floor Number *"),s.Pb(),s.Qb(25,"label",7),s.Lc(26),s.Pb(),s.Pb(),s.Pb(),s.Qb(27,"div",9),s.Qb(28,"div",10),s.Qb(29,"label",11),s.Lc(30,"Number of Beds *"),s.Pb(),s.Qb(31,"label",7),s.Lc(32),s.Pb(),s.Pb(),s.Qb(33,"div",10),s.Qb(34,"label",12),s.Lc(35,"Room Size (Square feet) *"),s.Pb(),s.Qb(36,"label",7),s.Lc(37),s.Pb(),s.Pb(),s.Pb(),s.Qb(38,"div",9),s.Qb(39,"div",13),s.Qb(40,"label",14),s.Lc(41,"Price *"),s.Pb(),s.Qb(42,"label",7),s.Lc(43),s.Pb(),s.Pb(),s.Qb(44,"div",13),s.Qb(45,"label",15),s.Lc(46,"Discount *"),s.Pb(),s.Qb(47,"label",7),s.Lc(48),s.Pb(),s.Pb(),s.Qb(49,"div",13),s.Qb(50,"label",16),s.Lc(51,"Agent Discount *"),s.Pb(),s.Qb(52,"label",7),s.Lc(53),s.Pb(),s.Pb(),s.Qb(54,"div",13),s.Qb(55,"label",17),s.Lc(56,"VatService charge *"),s.Pb(),s.Qb(57,"label",18),s.Lc(58),s.Pb(),s.Pb(),s.Pb(),s.Qb(59,"div",19),s.Qb(60,"h3",20),s.Lc(61,"Facilities"),s.Pb(),s.Qb(62,"div",21),s.Qb(63,"div",22),s.Qb(64,"label",23),s.Mb(65,"i",24),s.Lc(66," Front Face "),s.Pb(),s.Pb(),s.Qb(67,"div",22),s.Qb(68,"label",23),s.Mb(69,"i",24),s.Lc(70," Back Face "),s.Pb(),s.Pb(),s.Qb(71,"div",22),s.Qb(72,"label",23),s.Mb(73,"i",24),s.Lc(74," High Commode "),s.Pb(),s.Pb(),s.Qb(75,"div",22),s.Qb(76,"label",23),s.Mb(77,"i",24),s.Lc(78," Breakfast "),s.Pb(),s.Pb(),s.Qb(79,"div",22),s.Qb(80,"label",23),s.Mb(81,"i",24),s.Lc(82," Internet "),s.Pb(),s.Pb(),s.Qb(83,"div",22),s.Qb(84,"label",23),s.Mb(85,"i",24),s.Lc(86," Air Condition "),s.Pb(),s.Pb(),s.Qb(87,"div",22),s.Qb(88,"label",23),s.Mb(89,"i",24),s.Lc(90," TV "),s.Pb(),s.Pb(),s.Qb(91,"div",22),s.Qb(92,"label",23),s.Mb(93,"i",24),s.Lc(94," Geyser "),s.Pb(),s.Pb(),s.Qb(95,"div",22),s.Qb(96,"label",23),s.Mb(97,"i",24),s.Lc(98," HillView "),s.Pb(),s.Pb(),s.Qb(99,"div",22),s.Qb(100,"label",23),s.Mb(101,"i",24),s.Lc(102," Sea View "),s.Pb(),s.Pb(),s.Qb(103,"div",22),s.Qb(104,"label",23),s.Mb(105,"i",24),s.Lc(106," Telephone "),s.Pb(),s.Pb(),s.Qb(107,"div",22),s.Qb(108,"label",23),s.Mb(109,"i",24),s.Lc(110," Bath Towel "),s.Pb(),s.Pb(),s.Qb(111,"div",22),s.Qb(112,"label",23),s.Mb(113,"i",24),s.Lc(114," Table And Chair "),s.Pb(),s.Pb(),s.Qb(115,"div",22),s.Qb(116,"label",23),s.Mb(117,"i",24),s.Lc(118," In Middle "),s.Pb(),s.Pb(),s.Qb(119,"div",22),s.Qb(120,"label",23),s.Mb(121,"i",24),s.Lc(122," Kitchen "),s.Pb(),s.Pb(),s.Qb(123,"div",22),s.Qb(124,"label",23),s.Mb(125,"i",24),s.Lc(126," BathTub "),s.Pb(),s.Pb(),s.Qb(127,"div",22),s.Qb(128,"label",23),s.Mb(129,"i",24),s.Lc(130," Balcony "),s.Pb(),s.Pb(),s.Qb(131,"div",22),s.Qb(132,"label",23),s.Mb(133,"i",24),s.Lc(134," Extra Beds "),s.Pb(),s.Pb(),s.Qb(135,"div",22),s.Qb(136,"label",23),s.Mb(137,"i",24),s.Lc(138," Pets Allowed "),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(139,"div",25),s.Qb(140,"a",26),s.Lc(141,"Edit"),s.Pb(),s.Pb(),s.Pb(),s.Qb(142,"div",4),s.Qb(143,"div",27),s.Qb(144,"div",28),s.Jc(145,kt,1,1,"img",29),s.Pb(),s.Qb(146,"div",30),s.Jc(147,Ct,2,1,"div",31),s.Qb(148,"div"),s.Lc(149," Please select a image to upload "),s.Mb(150,"br"),s.Lc(151," Image ratio should be 16:9 (i.e. height:450px, width:800px) "),s.Pb(),s.Jc(152,zt,2,0,"p",32),s.Jc(153,St,3,0,"div",32),s.Qb(154,"div"),s.Jc(155,Mt,2,0,"button",33),s.Qb(156,"a",34),s.Lc(157," Back "),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(158,"div",35),s.Qb(159,"div",36),s.Jc(160,xt,2,1,"div",37),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(10),s.Nc(" ",null==e.room||null==e.room.category||null==e.room.category.hotel?null:e.room.category.hotel.name," "),s.zb(5),s.Nc(" ",null==e.room||null==e.room.category?null:e.room.category.name," "),s.zb(6),s.Mc(null==e.room?null:e.room.roomNumber),s.zb(5),s.Mc(null==e.room?null:e.room.floorNumber),s.zb(6),s.Mc(null==e.room?null:e.room.numberOfBed),s.zb(5),s.Mc(null==e.room?null:e.room.roomSize),s.zb(6),s.Mc(null==e.room?null:e.room.price),s.zb(5),s.Mc(null==e.room?null:e.room.discount),s.zb(5),s.Mc(null==e.room?null:e.room.agentDiscount),s.zb(5),s.Mc(null==e.room?null:e.room.vatService),s.zb(7),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.frontFace?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.backFace?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.highCommode?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.breakfast?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.internet?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.airConditioned?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.tv?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.geyser?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.hillView?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.seaView?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.telephone?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.bathTowel?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.tableAndChair?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.inMiddle?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.kitchen?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.bathTub?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.balcony?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.extraBeds?"fa-check-square-o":"fa-square-o"),s.zb(4),s.mc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.petsAllowed?"fa-check-square-o":"fa-square-o"),s.zb(3),s.oc("routerLink","/dashboard/admin/rooms/add/",null==e.room?null:e.room.id,""),s.zb(5),s.mc("ngIf",e.imageUrl),s.zb(2),s.mc("ngIf",e.errorMessage.length>0),s.zb(5),s.mc("ngIf",e.roomImagesUrl.length<5),s.zb(1),s.mc("ngIf",100==e.progressPercentage),s.zb(2),s.mc("ngIf",e.fileList),s.zb(5),s.mc("ngForOf",e.roomImagesUrl))},directives:[b.n,n.c,b.p,b.o],styles:[".delete[_ngcontent-%COMP%]{cursor:pointer!important;font-size:20px;position:absolute;color:#fff;border:none;background:none;right:10px;top:0;line-height:1;z-index:99;padding:0}.delete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:20px;width:20px;background-color:red;border-radius:50%;display:block}.uploadbox[_ngcontent-%COMP%]{font-size:18px;min-height:230px}.img-thumbnail[_ngcontent-%COMP%]{margin:0 5px;width:100%}"]}),t}();function Dt(t,e){if(1&t&&(s.Qb(0,"div",24),s.Lc(1),s.Pb()),2&t){var o=s.ec();s.zb(1),s.Nc(" ",o.message," ")}}var At=function(t){return{disabled:t}},Nt=function(){function t(t,e){this.builder=t,this.util=e,this.create=new s.n,this.close=new s.n,this.mouseoverShifting=!1,this.message="",this.createForm()}return t.prototype.ngOnChanges=function(){this.room&&this.room.id&&this.form.patchValue({roomId:this.room.id})},t.prototype.createForm=function(){this.form=this.builder.group({roomId:["",m.w.required],startDate:["",m.w.required],endDate:["",m.w.required],amount:["",m.w.required],changeSimilar:!1})},t.prototype.submit=function(){var t=this.util.getDateFromDateObj(this.form.controls.startDate.value),e=this.util.getDateFromDateObj(this.form.controls.endDate.value);this.message=t>e?"Date error, Start date cannot be after end date":"",this.form.valid&&e>t&&(this.create.emit(this.form.value),this.form.reset(),this.form.patchValue({roomId:this.room.id}))},t.prototype.onClose=function(){this.close.emit(!0)},t.\u0275fac=function(e){return new(e||t)(s.Lb(m.d),s.Lb(T.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["discount-form"]],inputs:{room:"room"},outputs:{create:"create",close:"close"},features:[s.xb],decls:36,vars:6,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[1,"form-group","form-check"],["type","checkbox","id","changeSimilar","formControlName","changeSimilar",1,"form-check-input"],["for","changeSimilar",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-success","mx-1",3,"ngClass"],[1,"btn","btn-sm","btn-light",3,"click"],["role","alert",1,"alert","alert-warning"]],template:function(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"h3",3),s.Lc(4,"Adjust room discount map"),s.Pb(),s.Jc(5,Dt,2,1,"div",4),s.Qb(6,"form",5),s.bc("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),s.Qb(7,"div",6),s.Qb(8,"label",7),s.Lc(9,"Room number"),s.Pb(),s.Qb(10,"label",8),s.Lc(11),s.Pb(),s.Pb(),s.Qb(12,"div",6),s.Qb(13,"label",9),s.Lc(14,"Start date"),s.Pb(),s.Qb(15,"input",10,11),s.bc("click",function(){return s.Ac(o),s.xc(16).toggle()}),s.Pb(),s.Pb(),s.Qb(17,"div",6),s.Qb(18,"label",12),s.Lc(19,"End date"),s.Pb(),s.Qb(20,"input",13,14),s.bc("click",function(){return s.Ac(o),s.xc(21).toggle()}),s.Pb(),s.Pb(),s.Qb(22,"div",6),s.Qb(23,"label",15),s.Lc(24,"Amount"),s.Pb(),s.Mb(25,"input",16),s.Pb(),s.Qb(26,"div",17),s.Mb(27,"input",18),s.Qb(28,"label",19),s.Lc(29," Change similar "),s.Pb(),s.Pb(),s.Qb(30,"div",20),s.Qb(31,"span",21),s.bc("mouseenter",function(){return e.mouseoverShifting=!0}),s.Qb(32,"button",22),s.Lc(33," Submit "),s.Pb(),s.Pb(),s.Qb(34,"button",23),s.bc("click",function(){return e.onClose()}),s.Lc(35,"Close"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()}2&t&&(s.zb(5),s.mc("ngIf",e.message.length),s.zb(1),s.mc("formGroup",e.form),s.zb(5),s.Nc(" ",null==e.room?null:e.room.roomNumber," "),s.zb(21),s.mc("ngClass",s.qc(4,At,e.form.invalid)))},directives:[b.p,m.y,m.o,m.h,m.b,I.k,m.n,m.g,m.s,m.a,b.n],styles:[""],changeDetection:0}),t}(),Ft=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},Ot=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function Ht(t,e){if(1&t){var o=s.Rb();s.Qb(0,"admin-hotel-list",11),s.bc("hotel",function(t){return s.Ac(o),s.ec().onSelectHotel(t)}),s.Pb()}}function Jt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"span"),s.Qb(1,"a",18),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onSelectCategory(t)}),s.Lc(2),s.Pb(),s.Pb()}if(2&t){var n=e.$implicit,i=s.ec(2);s.zb(1),s.mc("ngClass",n==i.category?"btn-primary":"btn-outline-info"),s.zb(1),s.Nc(" ",n," ")}}function qt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",19),s.Qb(1,"div",20),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onSelectRoom(t.id)}),s.Lc(2),s.Pb(),s.Pb()}if(2&t){var n=e.$implicit;s.zb(2),s.Nc(" ",n.roomNumber," ")}}function Bt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",12),s.Qb(1,"h4"),s.Lc(2),s.Pb(),s.Qb(3,"div",13),s.Jc(4,Jt,3,2,"span",14),s.Pb(),s.Qb(5,"div",15),s.Qb(6,"h4"),s.Lc(7),s.Pb(),s.Pb(),s.Jc(8,qt,3,1,"div",16),s.Qb(9,"a",17),s.bc("click",function(){return s.Ac(o),s.ec().onBacktoHotel()}),s.Lc(10," <<< Hotel list "),s.Pb(),s.Pb()}if(2&t){var n=s.ec();s.zb(2),s.Nc(" ",n.hotel.name," "),s.zb(2),s.mc("ngForOf",n.categoryList),s.zb(3),s.Nc("",n.category," room list"),s.zb(1),s.mc("ngForOf",n.filteredRoomList)}}function Tt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"discount-form",21),s.bc("create",function(t){return s.Ac(o),s.ec().onCreate(t)})("close",function(){s.Ac(o);var t=s.ec();return t.showForm=t.flase}),s.Pb()}if(2&t){var n=s.ec();s.mc("room",n.room)}}function Et(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",30),s.Qb(1,"button",31),s.bc("click",function(){return s.Ac(o),s.ec(2).onAdjustDiscountMap()}),s.Lc(2," Edit "),s.Pb(),s.Pb()}}function _t(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",22),s.Qb(1,"div",23),s.Qb(2,"div",24),s.Qb(3,"div",25),s.Qb(4,"div",26),s.Mb(5,"i",27),s.Pb(),s.Pb(),s.Qb(6,"input",28),s.bc("selected",function(t){return s.Ac(o),s.ec().selectedDate(t)}),s.Pb(),s.Pb(),s.Pb(),s.Jc(7,Et,3,0,"div",29),s.Pb()}if(2&t){var n=s.ec();s.zb(6),s.mc("options",n.options),s.zb(1),s.mc("ngIf",n.room)}}function Vt(t,e){if(1&t&&(s.Qb(0,"tr"),s.Qb(1,"td"),s.Lc(2),s.fc(3,"date"),s.Pb(),s.Qb(4,"td"),s.Lc(5),s.Pb(),s.Qb(6,"td"),s.Lc(7),s.Pb(),s.Qb(8,"td"),s.Lc(9),s.Pb(),s.Pb()),2&t){var o=e.$implicit,n=s.ec(3);s.zb(2),s.Mc(s.hc(3,4,o.key,"d MMM,yy : EEE")),s.zb(3),s.Mc(n.room.price),s.zb(2),s.Mc(null==o.value||0==o.value?n.room.discount:o.value),s.zb(2),s.Mc(n.room.price-(null==o.value||0==o.value?n.room.discount:o.value))}}function $t(t,e){if(1&t&&(s.Qb(0,"tbody"),s.Jc(1,Vt,10,7,"tr",14),s.fc(2,"keyvalue"),s.Pb()),2&t){var o=s.ec(2);s.zb(1),s.mc("ngForOf",s.gc(2,1,o.discountMap))}}function Ut(t,e){1&t&&(s.Qb(0,"tr"),s.Qb(1,"td",34),s.Mb(2,"i",35),s.Lc(3," Discount map loading "),s.Pb(),s.Pb())}function jt(t,e){if(1&t&&(s.Qb(0,"div"),s.Qb(1,"table",32),s.Qb(2,"thead"),s.Qb(3,"tr"),s.Qb(4,"td",33),s.Qb(5,"h5"),s.Lc(6),s.Pb(),s.Pb(),s.Pb(),s.Qb(7,"tr"),s.Qb(8,"th"),s.Lc(9,"Date"),s.Pb(),s.Qb(10,"th"),s.Lc(11,"Room Price"),s.Pb(),s.Qb(12,"th"),s.Lc(13,"Discount"),s.Pb(),s.Qb(14,"th"),s.Lc(15,"Payable"),s.Pb(),s.Pb(),s.Pb(),s.Jc(16,$t,3,3,"tbody",10),s.Jc(17,Ut,4,0,"tr",10),s.Pb(),s.Pb()),2&t){var o=s.ec();s.zb(6),s.Nc("Discount map for Room number : ",o.room.roomNumber,""),s.zb(10),s.mc("ngIf",o.discountMap),s.zb(1),s.mc("ngIf",!o.discountMap)}}var Gt=function(){function t(t,e,o){this.hotelService=t,this.roomService=e,this.util=o,this.showForm=!1,this.showRoomList=!1,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30),this.setDateRanges()},t.prototype.setDateRanges=function(){this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),Ft(this,void 0,void 0,function(){var e=this;return Ot(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.hotelId=t.id,this.getAdminRoomList(t.id)},t.prototype.getAdminRoomList=function(t){return Ft(this,void 0,void 0,function(){var e=this;return Ot(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoomListByHotelId(t).subscribe(function(t){e.roomList=t,e.showRoomList=!0,e.filteredRoomList=t,e.category="All",e.categoryList=["All"],e.roomList.forEach(function(t){e.categoryList.includes(t.category.name)||e.categoryList.push(t.category.name)})})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onBacktoHotel=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.room&&this.room.id&&this.onSelectRoom(this.room.id)},t.prototype.onSelectRoom=function(t){var e=this;this.room=this.roomList.find(function(e){return e.id===t}),this.discountMap=null,this.roomService.getAdminDiscountMap(t,this.util.getDateString(this.startDate),this.util.getDateString(this.endDate)).subscribe(function(t){e.discountMap=t})},t.prototype.onAdjustDiscountMap=function(){this.showForm=!0},t.prototype.onCreate=function(t){var e=this;this.roomService.updateAdminDiscountMap(t.roomId,this.util.makeDateString(t.startDate),this.util.makeDateString(t.endDate),t.amount,t.changeSimilar).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(s.Lb(c.a),s.Lb(a.a),s.Lb(T.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-discount-map"]],decls:12,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","row m-0 mt-2",4,"ngIf"],[1,"col-md-9"],[3,"room","create","close",4,"ngIf"],["class","form-row",4,"ngIf"],[4,"ngIf"],[3,"hotel"],[1,"row","m-0","mt-2"],[1,"col-12","p-0","mt-1"],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],["class","col-md-2 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-block","btn-info","text-center",3,"click"],[1,"btn","btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"],[3,"room","create","close"],[1,"form-row"],[1,"form-group","col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],["class","col",4,"ngIf"],[1,"col"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"table","border","table-hover"],["colspan","4",2,"background-color","#e9ecef"],["colspan","4",1,"text-center"],[1,"fa","fa-refresh"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Lc(2,"Room discount map"),s.Pb(),s.Pb(),s.Qb(3,"div",2),s.Qb(4,"div",3),s.Qb(5,"div",4),s.Jc(6,Ht,1,0,"admin-hotel-list",5),s.Jc(7,Bt,11,4,"div",6),s.Pb(),s.Qb(8,"div",7),s.Jc(9,Tt,1,1,"discount-form",8),s.Jc(10,_t,8,2,"div",9),s.Jc(11,jt,18,3,"div",10),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(6),s.mc("ngIf",!e.showRoomList),s.zb(1),s.mc("ngIf",e.showRoomList),s.zb(2),s.mc("ngIf",e.showForm),s.zb(1),s.mc("ngIf",!e.showForm),s.zb(1),s.mc("ngIf",e.room&&!e.showForm))},directives:[b.p,x.a,b.o,b.n,Nt,$.b],pipes:[b.j,b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.2rem}.room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:5px;padding:3px 5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}(),Yt=o("VZT5"),Kt=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},Xt=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function Zt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",10),s.Lc(1),s.Qb(2,"button",11),s.bc("click",function(){return s.Ac(o),s.ec().clear()}),s.Lc(3,"Clear"),s.Pb(),s.Pb()}if(2&t){var n=s.ec();s.zb(1),s.Nc(" ",n.message," ")}}function Wt(t,e){if(1&t){var o=s.Rb();s.Qb(0,"tr"),s.Qb(1,"td"),s.Qb(2,"a",17),s.Lc(3),s.Pb(),s.Pb(),s.Qb(4,"td"),s.Lc(5),s.Pb(),s.Qb(6,"td"),s.Lc(7),s.Pb(),s.Qb(8,"td"),s.Lc(9),s.Pb(),s.Qb(10,"td"),s.Lc(11),s.Pb(),s.Qb(12,"td"),s.Lc(13),s.Pb(),s.Qb(14,"td"),s.Lc(15),s.Pb(),s.Qb(16,"td"),s.Qb(17,"div",18),s.Qb(18,"a",19),s.Lc(19,"Images"),s.Pb(),s.Qb(20,"a",19),s.Lc(21,"Edit"),s.Pb(),s.Qb(22,"button",20),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onDelete(t.id,t.roomNumber)}),s.Lc(23," Delete "),s.Pb(),s.Pb(),s.Pb(),s.Pb()}if(2&t){var n=e.$implicit,i=s.ec(2);s.zb(2),s.oc("routerLink","/dashboard/admin/rooms/details/",n.id,""),s.zb(1),s.Nc(" ",n.roomNumber," "),s.zb(2),s.Mc(n.category.name),s.zb(2),s.Mc(n.floorNumber),s.zb(2),s.Nc("",n.price," BDT"),s.zb(2),s.Nc("",n.currentDiscount," BDT"),s.zb(2),s.Nc("",i.hotel.hotelswavePercentage," %"),s.zb(2),s.Nc("",0!=i.hotel.hotelswavePercentage?(n.price-n.currentDiscount)*i.hotel.hotelswavePercentage/100:n.price-n.currentDiscount," BDT"),s.zb(3),s.oc("routerLink","/dashboard/admin/rooms/details/",n.id,""),s.zb(2),s.oc("routerLink","/dashboard/admin/rooms/add/",n.id,"")}}function te(t,e){if(1&t){var o=s.Rb();s.Qb(0,"pagination",21),s.bc("getPage",function(t){s.Ac(o);var e=s.ec(2);return e.getAdminRoomPage(e.hotel.id,t)}),s.Pb()}if(2&t){var n=s.ec(2);s.mc("page",n.roomPage)}}function ee(t,e){if(1&t&&(s.Qb(0,"table",12),s.Qb(1,"thead"),s.Qb(2,"tr"),s.Qb(3,"td",13),s.Qb(4,"h5"),s.Lc(5),s.Pb(),s.Pb(),s.Pb(),s.Qb(6,"tr"),s.Qb(7,"th"),s.Lc(8,"Room no."),s.Pb(),s.Qb(9,"th"),s.Lc(10,"Category"),s.Pb(),s.Qb(11,"th"),s.Lc(12,"Floor"),s.Pb(),s.Qb(13,"th"),s.Lc(14,"Price"),s.Pb(),s.Qb(15,"th"),s.Lc(16,"Discount"),s.Pb(),s.Qb(17,"th"),s.Lc(18,"HW Commission"),s.Pb(),s.Qb(19,"th"),s.Lc(20,"Payable"),s.Pb(),s.Mb(21,"th"),s.Pb(),s.Pb(),s.Qb(22,"tbody"),s.Jc(23,Wt,24,10,"tr",14),s.Pb(),s.Qb(24,"tfoot"),s.Qb(25,"tr"),s.Qb(26,"td",15),s.Jc(27,te,1,1,"pagination",16),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t){var o=s.ec();s.zb(5),s.Nc(" ",null==o.hotel?null:o.hotel.name," - Room List "),s.zb(18),s.mc("ngForOf",null==o.roomPage?null:o.roomPage.content),s.zb(4),s.mc("ngIf",null!=o.roomPage)}}function oe(t,e){if(1&t&&(s.Qb(0,"div"),s.Mb(1,"loading",22),s.Pb()),2&t){var o=s.ec();s.zb(1),s.mc("message",o.message)}}var ne=function(){function t(t,e){this.hotelService=t,this.roomService=e,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0,this.myDate=new Date}return t.prototype.ngOnInit=function(){this.getAdminHotelPage()},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),Kt(this,void 0,void 0,function(){var e=this;return Xt(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1,e.message=""})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.getAdminRoomPage(t.id)},t.prototype.getAdminRoomPage=function(t,e){return void 0===e&&(e=0),Kt(this,void 0,void 0,function(){var o=this;return Xt(this,function(n){switch(n.label){case 0:return this.message="Room list loading",this.showRoomLoading=!0,[4,this.roomService.getAdminRoomPageByHotelId(t,e).subscribe(function(t){o.roomPage=t,o.showRoomLoading=!1,o.message=""})];case 1:return n.sent(),[2]}})})},t.prototype.onDelete=function(t,e){return Kt(this,void 0,void 0,function(){var o=this;return Xt(this,function(n){switch(n.label){case 0:return confirm('Are you sure to delete room number "'+e+'" with id '+t)?[4,this.roomService.deleteAdminRoom(t).subscribe(function(t){"success"===t.response?(o.message="Room deleted successfully",o.getAdminRoomPage(o.hotel.id)):o.message="Room deleted Failed"})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.clear=function(){this.message=""},t.\u0275fac=function(e){return new(e||t)(s.Lb(c.a),s.Lb(a.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-list-own"]],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel"],[1,"col-md-9","px-0","px-md-3","mt-3","mt-md-0"],["class","alert alert-success","role","alert",4,"ngIf"],["class","table border table-responsive-sm",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"table","border","table-responsive-sm"],["colspan","8",2,"background-color","#e9ecef"],[4,"ngFor","ngForOf"],["colspan","8"],[3,"page","getPage",4,"ngIf"],[2,"text-decoration","none",3,"routerLink"],["role","group","aria-label","Basic example",1,"btn-group","btn-group-sm"],[1,"btn","btn-sm","btn-secondary",3,"routerLink"],[1,"btn","btn-sm","btn-secondary",3,"click"],[3,"page","getPage"],[3,"message"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Lc(2,"Room List"),s.Pb(),s.Pb(),s.Qb(3,"div",2),s.Qb(4,"div",3),s.Qb(5,"div",4),s.Qb(6,"app-own-hotel-list",5),s.bc("hotel",function(t){return e.onSelectHotel(t)}),s.Pb(),s.Pb(),s.Qb(7,"div",6),s.Jc(8,Zt,4,1,"div",7),s.Jc(9,ee,28,3,"table",8),s.Jc(10,oe,2,1,"div",9),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(8),s.mc("ngIf",e.message.length>0),s.zb(1),s.mc("ngIf",null!=(null==e.roomPage?null:e.roomPage.content)),s.zb(1),s.mc("ngIf",e.showRoomLoading))},directives:[Yt.a,b.p,b.o,n.c,D.a,u.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem .15rem .15rem 10px}"]}),t}(),ie=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},re=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function ce(t,e){if(1&t){var o=s.Rb();s.Qb(0,"app-own-hotel-list",11),s.bc("hotel",function(t){return s.Ac(o),s.ec().onSelectHotel(t)}),s.Pb()}}function ae(t,e){if(1&t){var o=s.Rb();s.Qb(0,"span"),s.Qb(1,"a",17),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onSelectCategory(t)}),s.Lc(2),s.Pb(),s.Pb()}if(2&t){var n=e.$implicit,i=s.ec(2);s.zb(1),s.mc("ngClass",n==i.category?"btn-primary":"btn-outline-info"),s.zb(1),s.Nc(" ",n," ")}}function se(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",18),s.Qb(1,"div",19),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(2).onSelectRoom(t.id)}),s.Lc(2),s.Pb(),s.Pb()}if(2&t){var n=e.$implicit;s.zb(2),s.Nc(" ",n.roomNumber," ")}}function le(t,e){if(1&t&&(s.Qb(0,"div",12),s.Qb(1,"h4"),s.Lc(2),s.Pb(),s.Qb(3,"div",13),s.Jc(4,ae,3,2,"span",14),s.Pb(),s.Qb(5,"div",15),s.Qb(6,"h4"),s.Lc(7),s.Pb(),s.Pb(),s.Jc(8,se,3,1,"div",16),s.Pb()),2&t){var o=s.ec();s.zb(2),s.Nc(" ",o.hotel.name," "),s.zb(2),s.mc("ngForOf",o.categoryList),s.zb(3),s.Nc("",o.category," Room list"),s.zb(1),s.mc("ngForOf",o.filteredRoomList)}}function be(t,e){if(1&t){var o=s.Rb();s.Qb(0,"status-form",20),s.bc("create",function(t){return s.Ac(o),s.ec().onCreate(t)})("close",function(){return s.Ac(o),s.ec().showForm=!1}),s.Pb()}if(2&t){var n=s.ec();s.mc("room",n.room)}}function ue(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",29),s.Qb(1,"button",30),s.bc("click",function(){return s.Ac(o),s.ec(2).onAdjustStatusMap()}),s.Lc(2," Edit "),s.Pb(),s.Pb()}}function me(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",21),s.Qb(1,"div",22),s.Qb(2,"div",23),s.Qb(3,"div",24),s.Qb(4,"div",25),s.Mb(5,"i",26),s.Pb(),s.Pb(),s.Qb(6,"input",27),s.bc("selected",function(t){return s.Ac(o),s.ec().selectedDate(t)}),s.Pb(),s.Pb(),s.Pb(),s.Jc(7,ue,3,0,"div",28),s.Pb()}if(2&t){var n=s.ec();s.zb(6),s.mc("options",n.options),s.zb(1),s.mc("ngIf",n.room)}}function fe(t,e){if(1&t&&(s.Qb(0,"tr"),s.Qb(1,"td"),s.Lc(2),s.fc(3,"date"),s.Pb(),s.Qb(4,"td"),s.Lc(5),s.Pb(),s.Pb()),2&t){var o=e.$implicit;s.zb(2),s.Mc(s.hc(3,2,o.key,"d MMM,yy : EEE")),s.zb(3),s.Mc(o.value)}}function de(t,e){if(1&t&&(s.Qb(0,"tbody"),s.Jc(1,fe,6,5,"tr",14),s.fc(2,"keyvalue"),s.Pb()),2&t){var o=s.ec(2);s.zb(1),s.mc("ngForOf",s.gc(2,1,o.statusMap))}}function he(t,e){1&t&&(s.Qb(0,"tr"),s.Qb(1,"td",33),s.Mb(2,"i",34),s.Lc(3," Status map loading "),s.Pb(),s.Pb())}function pe(t,e){if(1&t&&(s.Qb(0,"div"),s.Qb(1,"table",31),s.Qb(2,"thead"),s.Qb(3,"tr"),s.Qb(4,"td",32),s.Qb(5,"h5"),s.Lc(6),s.Pb(),s.Pb(),s.Pb(),s.Qb(7,"tr"),s.Qb(8,"th"),s.Lc(9,"Date"),s.Pb(),s.Qb(10,"th"),s.Lc(11,"Room Satus"),s.Pb(),s.Pb(),s.Pb(),s.Jc(12,de,3,3,"tbody",10),s.Jc(13,he,4,0,"tr",10),s.Pb(),s.Pb()),2&t){var o=s.ec();s.zb(6),s.Nc("Status map for Room number : ",o.room.roomNumber,""),s.zb(6),s.mc("ngIf",o.statusMap),s.zb(1),s.mc("ngIf",!o.statusMap)}}var ge=function(){function t(t,e,o){this.hotelService=t,this.roomService=e,this.util=o,this.showForm=!1,this.showRoomList=!1,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30),this.setDateRanges()},t.prototype.setDateRanges=function(){this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),ie(this,void 0,void 0,function(){var e=this;return re(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.hotelId=t.id,this.getAdminRoomList(t.id)},t.prototype.getAdminRoomList=function(t){return ie(this,void 0,void 0,function(){var e=this;return re(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoomListByHotelId(t).subscribe(function(t){e.roomList=t,e.showRoomList=!0,e.filteredRoomList=t,e.category="All",e.categoryList=["All"],e.roomList.forEach(function(t){e.categoryList.includes(t.category.name)||e.categoryList.push(t.category.name)})})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.room&&this.room.id&&this.onSelectRoom(this.room.id)},t.prototype.onSelectRoom=function(t){var e=this;this.room=this.roomList.find(function(e){return e.id==t}),this.statusMap=null,this.roomService.getAdminStatusMap(t,this.util.getDateString(this.startDate),this.util.getDateString(this.endDate)).subscribe(function(t){e.statusMap=t})},t.prototype.onAdjustStatusMap=function(){this.showForm=!0},t.prototype.onCreate=function(t){var e=this;this.roomService.updateAdminStatusMap(t.roomId,this.util.makeDateString(t.startDate),this.util.makeDateString(t.endDate),t.satus,t.changeSimilar).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(s.Lb(c.a),s.Lb(a.a),s.Lb(T.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-status-map-own"]],decls:12,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","row m-0 mt-2",4,"ngIf"],[1,"col-md-9"],[3,"room","create","close",4,"ngIf"],["class","form-row",4,"ngIf"],[4,"ngIf"],[3,"hotel"],[1,"row","m-0","mt-2"],[1,"col-12","p-0","mt-1"],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],["class","col-md-2 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"btn","btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"],[3,"room","create","close"],[1,"form-row"],[1,"form-group","col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"table","border"],["colspan","2",2,"background-color","#e9ecef"],["colspan","4",1,"text-center"],[1,"fa","fa-refresh"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Lc(2,"Room status map"),s.Pb(),s.Pb(),s.Qb(3,"div",2),s.Qb(4,"div",3),s.Qb(5,"div",4),s.Jc(6,ce,1,0,"app-own-hotel-list",5),s.Jc(7,le,9,4,"div",6),s.Pb(),s.Qb(8,"div",7),s.Jc(9,be,1,1,"status-form",8),s.Jc(10,me,8,2,"div",9),s.Jc(11,pe,14,3,"div",10),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(6),s.mc("ngIf",!e.showRoomList),s.zb(1),s.mc("ngIf",e.showRoomList),s.zb(2),s.mc("ngIf",e.showForm),s.zb(1),s.mc("ngIf",!e.showForm),s.zb(1),s.mc("ngIf",e.room&&!e.showForm))},directives:[b.p,Yt.a,b.o,b.n,V,$.b],pipes:[b.j,b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.2rem}.room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:5px;padding:3px 5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}(),ve=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},Pe=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function ye(t,e){if(1&t){var o=s.Rb();s.Qb(0,"app-own-hotel-list",13),s.bc("hotel",function(t){return s.Ac(o),s.ec(2).onSelectHotel(t)}),s.Pb()}}function Qe(t,e){1&t&&(s.Qb(0,"a",14),s.Mb(1,"i",15),s.Lc(2," Room list "),s.Pb())}function Le(t,e){if(1&t&&(s.Qb(0,"li",17),s.Mb(1,"loading",20),s.Pb()),2&t){var o=s.ec(3);s.zb(1),s.mc("message",o.message)}}var we=function(t){return{active:t}};function ke(t,e){if(1&t){var o=s.Rb();s.Qb(0,"a",21),s.bc("click",function(){s.Ac(o);var t=e.$implicit;return s.ec(3).onSelectCategory(t.id)}),s.Mb(1,"i",22),s.Lc(2),s.Pb()}if(2&t){var n=e.$implicit,i=s.ec(3);s.mc("ngClass",s.qc(2,we,n.id==(null==i.category?null:i.category.id))),s.zb(2),s.Nc(" ",n.name," ")}}function Ce(t,e){if(1&t&&(s.Qb(0,"ul",16),s.Qb(1,"li",17),s.Qb(2,"h5"),s.Lc(3),s.Pb(),s.Qb(4,"small"),s.Lc(5,"Choose a category from below list"),s.Pb(),s.Pb(),s.Jc(6,Le,2,1,"li",18),s.Jc(7,ke,3,4,"a",19),s.Pb()),2&t){var o=s.ec(2);s.zb(3),s.Nc("",null==o.hotel?null:o.hotel.name," Category list"),s.zb(3),s.mc("ngIf",o.showCategoryLoading),s.zb(1),s.mc("ngForOf",o.categories)}}function ze(t,e){if(1&t){var o=s.Rb();s.Qb(0,"div",23),s.Qb(1,"room-form",24),s.bc("create",function(t){return s.Ac(o),s.ec(2).onCreate(t)})("update",function(t){return s.Ac(o),s.ec(2).onUpdate(t)}),s.Pb(),s.Pb()}if(2&t){var n=s.ec(2);s.zb(1),s.mc("hotel",n.hotel)("category",n.category)("room",n.room)}}function Se(t,e){if(1&t&&(s.Qb(0,"div",0),s.Qb(1,"div",7),s.Qb(2,"div",8),s.Jc(3,ye,1,0,"app-own-hotel-list",9),s.Jc(4,Qe,3,0,"a",10),s.Jc(5,Ce,8,3,"ul",11),s.Pb(),s.Jc(6,ze,2,3,"div",12),s.Pb(),s.Pb()),2&t){var o=s.ec();s.zb(3),s.mc("ngIf",!o.showCategory),s.zb(1),s.mc("ngIf",!o.showCategory),s.zb(1),s.mc("ngIf",o.showCategory),s.zb(1),s.mc("ngIf",null!=o.hotel&&o.hotel.id&&o.category&&o.category.id)}}function Me(t,e){1&t&&(s.Ob(0),s.Mb(1,"app-list-own"),s.Nb())}function Ie(t,e){1&t&&(s.Ob(0),s.Mb(1,"app-status-map-own"),s.Nb())}var xe=[{path:"add",component:vt},{path:"add-own",component:function(){function t(t,e,o,n,i,r){this.hotelService=t,this.categoryService=e,this.roomService=o,this.activeRoute=n,this.toastrService=i,this.router=r,this.activeNav=1,this.showCategory=!1,this.showCategoryLoading=!1,this.showHotelLoading=!1,this.short=!0,this.id=n.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&this.getAdminRoom(this.id)},t.prototype.getAdminRoom=function(t){return ve(this,void 0,void 0,function(){var e=this;return Pe(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoom(t).subscribe(function(t){e.room=t,e.category=e.room.category,e.hotel=e.room.category.hotel})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminCategories=function(t){return ve(this,void 0,void 0,function(){var e=this;return Pe(this,function(o){switch(o.label){case 0:return this.message="Category list loading",this.showCategoryLoading=!0,[4,this.categoryService.getCategoryListByHotelId(t).subscribe(function(t){e.categories=t,e.showCategory=!0,e.showCategoryLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.getAdminCategories(t.id),this.getAdminHotel(t.id)},t.prototype.getAdminHotel=function(t){return ve(this,void 0,void 0,function(){var e=this;return Pe(this,function(o){switch(o.label){case 0:return[4,this.hotelService.getAdminHotel(t).subscribe(function(t){e.hotel=t})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var e=this.categories.find(function(e){return e.id===t});this.category=e},t.prototype.onBacktoHotel=function(){this.categories=null,this.category=null,this.showCategory=!1,localStorage.removeItem("hotelId")},t.prototype.onCreate=function(t){var e=this;t.discountPercent=t.discount,t.discount=Math.floor(t.price*t.discount/100),this.roomService.saveAdminRoom(t,this.hotel.id).subscribe(function(t){e.toastrService.success("Room created successfully","Success")})},t.prototype.onUpdate=function(t){var e=this;t.discountPercent=t.discount,t.discount=Math.floor(t.price*t.discount/100),this.roomService.updateAdminRoom(this.hotel.id,this.room.id,t).subscribe(function(t){e.toastrService.success("Room updated successfully","Success")})},t.\u0275fac=function(e){return new(e||t)(s.Lb(c.a),s.Lb(r.a),s.Lb(a.a),s.Lb(n.a),s.Lb(l.b),s.Lb(n.b))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-add-own"]],decls:16,vars:5,consts:[[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","list-group-item list-group-item-action list-group-item-info text-center","routerLink","/dashboard/admin/rooms",4,"ngIf"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[3,"hotel"],["routerLink","/dashboard/admin/rooms",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-list"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"ngClass","click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,e){if(1&t&&(s.Qb(0,"div",0),s.Qb(1,"ul",1,2),s.bc("activeIdChange",function(t){return e.activeNav=t}),s.Qb(3,"li",3),s.Qb(4,"a",4),s.Lc(5,"Create"),s.Pb(),s.Jc(6,Se,7,4,"ng-template",5),s.Pb(),s.Qb(7,"li",3),s.Qb(8,"a",4),s.Lc(9,"List"),s.Pb(),s.Jc(10,Me,2,0,"ng-template",5),s.Pb(),s.Qb(11,"li",3),s.Qb(12,"a",4),s.Lc(13,"Status Map"),s.Pb(),s.Jc(14,Ie,2,0,"ng-template",5),s.Pb(),s.Pb(),s.Mb(15,"div",6),s.Pb()),2&t){var o=s.xc(2);s.zb(1),s.mc("activeId",e.activeNav),s.zb(2),s.mc("ngbNavItem",1),s.zb(4),s.mc("ngbNavItem",2),s.zb(4),s.mc("ngbNavItem",4),s.zb(4),s.mc("ngbNavOutlet",o)}},directives:[I.n,I.p,I.q,I.o,I.s,b.p,Yt.a,n.c,b.o,u.a,b.n,Q,ne,ge],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;padding:.25rem 1.25rem}"]}),t}()},{path:"add/:id",component:vt},{path:"add/byHotelId/:hotelId",component:M},{path:"details/:id",component:Rt},{path:"discount-map",component:Gt},{path:"status-map",component:rt},{path:":id",component:B},{path:"",component:B}],Re=function(){function t(){}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[i.a,n.d.forChild(xe)]]}),t}()}}]);