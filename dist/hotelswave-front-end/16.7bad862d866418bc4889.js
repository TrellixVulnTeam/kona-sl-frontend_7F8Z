(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"3whx":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("KZX/"),c=n("oTcB"),o=n("8Y7J"),a=function(){function e(){}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},imports:[[i.a,c.b],i.a]}),e}()},U6ZW:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return Bt}),n.d(t,"AdminReportModule",function(){return Ht});var i=n("iInd"),c=n("3whx"),o=n("kU/X"),a=n("/e7+"),r=n("jgEc"),s=n("LLt/"),l=n("8Y7J"),b=n("G0yt"),d=n("s7LF"),h=n("UPO+"),u=n("SVse"),p=n("HF3I");function g(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Sale Date"),l.Pb())}function m(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"Advance"),l.Pb())}function v(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"Due"),l.Pb())}function f(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"Collected Due"),l.Pb())}function L(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"Suspended Amount"),l.Pb())}function M(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"Cancel Fee"),l.Pb())}function P(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"Cancel Fee Payment Method"),l.Pb())}function y(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"Due Collection Payment Method"),l.Pb())}function S(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"Agent Com."),l.Pb())}function Q(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"ITA Com"),l.Pb())}function D(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Ref"),l.Pb())}function z(e,t){1&e&&(l.Qb(0,"th",3),l.Lc(1,"ref. fee"),l.Pb())}function R(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Status"),l.Pb())}function C(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Note"),l.Pb())}function T(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.fc(2,"date"),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Nc(" ",l.hc(2,1,n.created,"d MMM,y")," ")}}function O(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.advance)}}function k(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.due)}}function N(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.dueCollectionAmount)}}function I(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.suspendAmount)}}function w(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.cancelFee)}}function A(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.paymentMethodCancelFee)}}function J(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.paymentMethodDueCollection)}}function x(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.commission-n.itaCommission)}}function E(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.itaCommission)}}function F(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.ref)}}function _(e,t){if(1&e&&(l.Qb(0,"td",3),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.refFee)}}var B=function(e,t){return{"bg-primary":e,"bg-danger":t}};function H(e,t){if(1&e&&(l.Qb(0,"td",14),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.mc("ngClass",l.rc(2,B,"Paid"==n.status,"Unpaid"==n.status)),l.zb(1),l.Nc(" ",n.status," ")}}function $(e,t){if(1&e&&(l.Qb(0,"td",15),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.note)}}function U(e,t){if(1&e&&(l.Qb(0,"td"),l.Qb(1,"a",16),l.Lc(2),l.Pb(),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.oc("routerLink","/dashboard/printTicket/",n.bookingId,""),l.zb(1),l.Nc(" ",n.bookingId,"")}}function G(e,t){if(1&e&&(l.Qb(0,"td"),l.Qb(1,"a",16),l.Lc(2),l.Pb(),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.oc("routerLink","/dashboard/ship-print-ticket/",n.bookingId,""),l.zb(1),l.Nc(" ",n.bookingId,"")}}function V(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.bookingId)}}var Y=function(e,t){return{"bg-warning":e,"bg-danger":t}};function q(e,t){if(1&e&&(l.Qb(0,"tr",11),l.Qb(1,"td"),l.Lc(2),l.Pb(),l.Qb(3,"td"),l.Lc(4),l.Pb(),l.Qb(5,"td"),l.Lc(6),l.Mb(7,"br"),l.Lc(8),l.Pb(),l.Qb(9,"td"),l.Lc(10),l.Pb(),l.Qb(11,"td"),l.Lc(12),l.Pb(),l.Jc(13,T,3,4,"td",2),l.Qb(14,"td"),l.Lc(15),l.fc(16,"date"),l.Pb(),l.Qb(17,"td",3),l.Lc(18),l.Pb(),l.Jc(19,O,2,1,"td",4),l.Jc(20,k,2,1,"td",4),l.Jc(21,N,2,1,"td",4),l.Jc(22,I,2,1,"td",4),l.Jc(23,w,2,1,"td",4),l.Jc(24,A,2,1,"td",4),l.Qb(25,"td",3),l.Lc(26),l.Pb(),l.Jc(27,J,2,1,"td",4),l.Qb(28,"td",3),l.Lc(29),l.Pb(),l.Jc(30,x,2,1,"td",4),l.Jc(31,E,2,1,"td",4),l.Jc(32,F,2,1,"td",2),l.Jc(33,_,2,1,"td",4),l.Jc(34,H,2,5,"td",12),l.Jc(35,$,2,1,"td",13),l.Jc(36,U,3,2,"td",2),l.Jc(37,G,3,2,"td",2),l.Jc(38,V,2,1,"td",2),l.Pb()),2&e){var n=t.$implicit,i=t.index,c=l.ec();l.mc("ngClass",l.rc(34,Y,"ROOM_RESERVED"==n.bookingStatus,"ROOM_CANCELED"==n.bookingStatus)),l.zb(2),l.Mc(i+1),l.zb(2),l.Mc(n.hotelName),l.zb(2),l.Oc(" ",n.company," ",n.role?"["+n.role+"]":""," "),l.zb(2),l.Nc(" ",n.updatedBy?"Canceled by : "+n.updatedBy:""," "),l.zb(2),l.Oc("",n.customerName,"[",n.customerPhone,"]"),l.zb(2),l.Oc("",n.roomNumber," [",n.category,"]"),l.zb(1),l.mc("ngIf","Ship"===c.serviceType),l.zb(2),l.Nc(" ",l.hc(16,31,n.date,"d MMM,y")," "),l.zb(3),l.Mc(n.price),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType&&"ROOM_SOLD"===c.status),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType&&"ROOM_SOLD"===c.status),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType&&"ROOM_CANCELED"===c.status),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType&&"ROOM_CANCELED"===c.status),l.zb(2),l.Mc(n.paymentMethod),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType&&"ROOM_SOLD"===c.status),l.zb(2),l.Mc(n.commission),l.zb(1),l.mc("ngIf",c.authService.hasRole("ROLE_ADMIN")||c.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",c.authService.hasRole("ROLE_ADMIN")||c.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType),l.zb(1),l.mc("ngIf","Hotel"===c.serviceType),l.zb(1),l.mc("ngIf","Ship"===c.serviceType&&!c.authService.isAgent()),l.zb(1),l.mc("ngIf","Ship"===c.serviceType&&c.authService.isAgent())}}function j(e,t){1&e&&l.Mb(0,"th")}function K(e,t){if(1&e&&(l.Qb(0,"th",7),l.Lc(1),l.Pb()),2&e){var n=l.ec();l.zb(1),l.Mc(n.total.totalAdvance)}}function X(e,t){if(1&e&&(l.Qb(0,"th",7),l.Lc(1),l.Pb()),2&e){var n=l.ec();l.zb(1),l.Mc(n.total.totalDue)}}function Z(e,t){if(1&e&&(l.Qb(0,"th",7),l.Lc(1),l.Pb()),2&e){var n=l.ec();l.zb(1),l.Mc(n.total.totalCollectedDue)}}function W(e,t){if(1&e&&(l.Qb(0,"th",7),l.Lc(1),l.Pb()),2&e){var n=l.ec();l.zb(1),l.Mc(n.total.totalSuspendAmount)}}function ee(e,t){if(1&e&&(l.Qb(0,"th",7),l.Lc(1),l.Pb()),2&e){var n=l.ec();l.zb(1),l.Mc(n.total.totalCancelFee)}}function te(e,t){1&e&&l.Mb(0,"th")}function ne(e,t){1&e&&l.Mb(0,"th")}function ie(e,t){if(1&e&&(l.Qb(0,"th",3),l.Lc(1),l.Pb()),2&e){var n=l.ec();l.zb(1),l.Mc(n.total.totalCommission-n.total.totalItaCommission)}}function ce(e,t){if(1&e&&(l.Qb(0,"th",3),l.Lc(1),l.Pb()),2&e){var n=l.ec();l.zb(1),l.Mc(n.total.totalItaCommission)}}function oe(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Agent Com."),l.Pb())}function ae(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"ITA Com."),l.Pb())}function re(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Advance"),l.Pb())}function se(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Due"),l.Pb())}function le(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Collected Due"),l.Pb())}function be(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Suspend Amount"),l.Pb())}function de(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Cancel Fee"),l.Pb())}function he(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit,i=l.ec(2);l.zb(1),l.Mc(i.totalCommissionMap.get(n.key)-i.totalItaCommissionMap.get(n.key))}}function ue(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit,i=l.ec(2);l.zb(1),l.Mc(i.totalItaCommissionMap.get(n.key))}}function pe(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit,i=l.ec(2);l.zb(1),l.Mc(i.advanceMap.get(n.key))}}function ge(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit,i=l.ec(2);l.zb(1),l.Mc(i.dueMap.get(n.key))}}function me(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit,i=l.ec(2);l.zb(1),l.Mc(i.dueCollectionMap.get(n.key))}}function ve(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit,i=l.ec(2);l.zb(1),l.Mc(i.suspendAmountMap.get(n.key))}}function fe(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit,i=l.ec(2);l.zb(1),l.Mc(i.cancelFeeMap.get(n.key))}}function Le(e,t){if(1&e&&(l.Qb(0,"tr"),l.Qb(1,"td"),l.Lc(2),l.Pb(),l.Qb(3,"td"),l.Lc(4),l.Pb(),l.Qb(5,"td"),l.Lc(6),l.Pb(),l.Qb(7,"td"),l.Lc(8),l.Pb(),l.Jc(9,he,2,1,"td",2),l.Jc(10,ue,2,1,"td",2),l.Jc(11,pe,2,1,"td",2),l.Jc(12,ge,2,1,"td",2),l.Jc(13,me,2,1,"td",2),l.Jc(14,ve,2,1,"td",2),l.Jc(15,fe,2,1,"td",2),l.Pb()),2&e){var n=t.$implicit,i=l.ec(2);l.zb(2),l.Mc(n.key),l.zb(2),l.Mc(i.totalSeatMap.get(n.key)),l.zb(2),l.Mc(i.rentMap.get(n.key)),l.zb(2),l.Mc(i.totalCommissionMap.get(n.key)),l.zb(1),l.mc("ngIf",i.authService.hasRole("ROLE_ADMIN")||i.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",i.authService.hasRole("ROLE_ADMIN")||i.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf","Hotel"===i.serviceType),l.zb(1),l.mc("ngIf","Hotel"===i.serviceType),l.zb(1),l.mc("ngIf","Hotel"===i.serviceType&&"ROOM_SOLD"===i.status),l.zb(1),l.mc("ngIf","Hotel"===i.serviceType&&"ROOM_SOLD"===i.status),l.zb(1),l.mc("ngIf","Hotel"===i.serviceType&&"ROOM_CANCELED"===i.status)}}function Me(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalCommission-n.total.totalItaCommission)}}function Pe(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalItaCommission)}}function ye(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalAdvance)}}function Se(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalDue)}}function Qe(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalCollectedDue)}}function De(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalSuspendAmount)}}function ze(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalCancelFee)}}function Re(e,t){if(1&e&&(l.Qb(0,"div",17),l.Qb(1,"div",18),l.Qb(2,"table",1),l.Qb(3,"tr"),l.Qb(4,"th"),l.Lc(5,"User Name"),l.Pb(),l.Qb(6,"th"),l.Lc(7),l.Pb(),l.Qb(8,"th"),l.Lc(9,"Rent"),l.Pb(),l.Qb(10,"th"),l.Lc(11,"Com."),l.Pb(),l.Jc(12,oe,2,0,"th",2),l.Jc(13,ae,2,0,"th",2),l.Jc(14,re,2,0,"th",2),l.Jc(15,se,2,0,"th",2),l.Jc(16,le,2,0,"th",2),l.Jc(17,be,2,0,"th",2),l.Jc(18,de,2,0,"th",2),l.Pb(),l.Jc(19,Le,16,11,"tr",19),l.fc(20,"keyvalue"),l.Qb(21,"tr"),l.Qb(22,"th"),l.Lc(23,"Total"),l.Pb(),l.Qb(24,"th"),l.Lc(25),l.Pb(),l.Qb(26,"th"),l.Lc(27),l.Pb(),l.Qb(28,"th"),l.Lc(29),l.Pb(),l.Jc(30,Me,2,1,"th",2),l.Jc(31,Pe,2,1,"th",2),l.Jc(32,ye,2,1,"th",2),l.Jc(33,Se,2,1,"th",2),l.Jc(34,Qe,2,1,"th",2),l.Jc(35,De,2,1,"th",2),l.Jc(36,ze,2,1,"th",2),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e){var n=l.ec();l.zb(7),l.Mc("Hotel"===n.serviceType?"No. of Room":"No. Of Seat"),l.zb(5),l.mc("ngIf",n.authService.hasRole("ROLE_ADMIN")||n.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",n.authService.hasRole("ROLE_ADMIN")||n.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType&&"ROOM_SOLD"===n.status),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType&&"ROOM_SOLD"===n.status),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType&&"ROOM_CANCELED"===n.status),l.zb(1),l.mc("ngForOf",l.gc(20,19,n.rentMap)),l.zb(6),l.Mc(n.total.totalSeatNumber),l.zb(2),l.Mc(n.total.totalrent),l.zb(2),l.Mc(n.total.totalCommission),l.zb(1),l.mc("ngIf",n.authService.hasRole("ROLE_ADMIN")||n.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",n.authService.hasRole("ROLE_ADMIN")||n.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType&&"ROOM_SOLD"===n.status),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType&&"ROOM_SOLD"===n.status),l.zb(1),l.mc("ngIf","Hotel"===n.serviceType&&"ROOM_CANCELED"===n.status)}}var Ce=function(){function e(e){this.authService=e,this.rentMap=new Map,this.advanceMap=new Map,this.dueCollectionMap=new Map,this.suspendAmountMap=new Map,this.cancelFeeMap=new Map,this.dueMap=new Map,this.totalSeatMap=new Map,this.totalCommissionMap=new Map,this.totalItaCommissionMap=new Map}return e.prototype.ngOnChanges=function(e){e.bookingList&&null!=this.bookingList&&this.calculateReportList()},e.prototype.calculateReportList=function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalCollectedDue:0,totalSuspendAmount:0,totalCancelFee:0,totalSeatNumber:0,totalCommission:0,totalItaCommission:0},this.rentMap=new Map,this.advanceMap=new Map,this.dueCollectionMap=new Map,this.suspendAmountMap=new Map,this.cancelFeeMap=new Map,this.dueMap=new Map,this.totalSeatMap=new Map,this.totalCommissionMap=new Map,this.totalItaCommissionMap=new Map,this.bookingList.forEach(function(t){e.total.totalrent+=t.price,e.total.totalAdvance+=t.advance,e.total.totalDue+=t.due,e.total.totalCollectedDue+=t.dueCollectionAmount,e.total.totalSuspendAmount+=t.suspendAmount,e.total.totalCancelFee+=t.cancelFee,e.total.totalCommission+=t.commission,e.total.totalItaCommission+=t.itaCommission,e.total.totalSeatNumber+=t.numberOfSeat,t.company&&(e.rentMap.set(t.company,e.rentMap.get(t.company)?e.rentMap.get(t.company)+t.price:t.price),e.advanceMap.set(t.company,e.advanceMap.get(t.company)?e.advanceMap.get(t.company)+t.advance:t.advance),e.dueCollectionMap.set(t.company,e.dueCollectionMap.get(t.company)?e.dueCollectionMap.get(t.company)+t.dueCollectionAmount:t.dueCollectionAmount),e.suspendAmountMap.set(t.company,e.suspendAmountMap.get(t.company)?e.suspendAmountMap.get(t.company)+t.suspendAmount:t.suspendAmount),e.cancelFeeMap.set(t.company,e.cancelFeeMap.get(t.company)?e.cancelFeeMap.get(t.company)+t.cancelFee:t.cancelFee),e.dueMap.set(t.company,e.dueMap.get(t.company)?e.dueMap.get(t.company)+t.due:t.due),e.totalSeatMap.set(t.company,e.totalSeatMap.get(t.company)?e.totalSeatMap.get(t.company)+t.numberOfSeat:t.numberOfSeat),e.totalCommissionMap.set(t.company,e.totalCommissionMap.get(t.company)?e.totalCommissionMap.get(t.company)+t.commission:t.commission),e.totalItaCommissionMap.set(t.company,e.totalItaCommissionMap.get(t.company)?e.totalItaCommissionMap.get(t.company)+t.itaCommission:t.itaCommission))})},e.\u0275fac=function(t){return new(t||e)(l.Lb(s.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["booking-report-list"]],inputs:{title:"title",bookingList:"bookingList",serviceType:"serviceType",status:"status"},features:[l.xb],decls:66,vars:33,consts:[[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngIf"],[1,"text-right"],["class","text-right",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],["colspan","3"],[2,"text-align","center"],["style","text-align: center;",4,"ngIf"],["colspan","5"],["class","row",4,"ngIf"],[3,"ngClass"],["class","text-white",3,"ngClass",4,"ngIf"],["class","text-white",4,"ngIf"],[1,"text-white",3,"ngClass"],[1,"text-white"],["target","_blank",3,"routerLink"],[1,"row"],[1,"col-auto"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(l.Qb(0,"h3",0),l.Lc(1),l.Pb(),l.Qb(2,"table",1),l.Qb(3,"thead"),l.Qb(4,"tr"),l.Qb(5,"th"),l.Lc(6,"#"),l.Pb(),l.Qb(7,"th"),l.Lc(8),l.Pb(),l.Qb(9,"th"),l.Lc(10,"Sold by"),l.Pb(),l.Qb(11,"th"),l.Lc(12,"Customer"),l.Pb(),l.Qb(13,"th"),l.Lc(14),l.Pb(),l.Jc(15,g,2,0,"th",2),l.Qb(16,"th",3),l.Lc(17),l.Pb(),l.Qb(18,"th",3),l.Lc(19,"Price"),l.Pb(),l.Jc(20,m,2,0,"th",4),l.Jc(21,v,2,0,"th",4),l.Jc(22,f,2,0,"th",4),l.Jc(23,L,2,0,"th",4),l.Jc(24,M,2,0,"th",4),l.Jc(25,P,2,0,"th",4),l.Qb(26,"th",3),l.Lc(27,"Payment Method"),l.Pb(),l.Jc(28,y,2,0,"th",4),l.Qb(29,"th",3),l.Lc(30,"Com."),l.Pb(),l.Jc(31,S,2,0,"th",4),l.Jc(32,Q,2,0,"th",4),l.Jc(33,D,2,0,"th",2),l.Jc(34,z,2,0,"th",4),l.Jc(35,R,2,0,"th",2),l.Jc(36,C,2,0,"th",2),l.Qb(37,"th"),l.Lc(38,"Id"),l.Pb(),l.Pb(),l.Pb(),l.Qb(39,"tbody"),l.Jc(40,q,39,37,"tr",5),l.Pb(),l.Qb(41,"tfoot"),l.Qb(42,"tr"),l.Mb(43,"td",6),l.Qb(44,"th"),l.Lc(45,"Total"),l.Pb(),l.Qb(46,"th",7),l.Lc(47),l.Pb(),l.Mb(48,"th"),l.Jc(49,j,1,0,"th",2),l.Qb(50,"th",7),l.Lc(51),l.Pb(),l.Jc(52,K,2,1,"th",8),l.Jc(53,X,2,1,"th",8),l.Jc(54,Z,2,1,"th",8),l.Jc(55,W,2,1,"th",8),l.Jc(56,ee,2,1,"th",8),l.Jc(57,te,1,0,"th",2),l.Mb(58,"th"),l.Jc(59,ne,1,0,"th",2),l.Qb(60,"th",7),l.Lc(61),l.Pb(),l.Jc(62,ie,2,1,"th",4),l.Jc(63,ce,2,1,"th",4),l.Mb(64,"th",9),l.Pb(),l.Pb(),l.Pb(),l.Jc(65,Re,37,21,"div",10)),2&e&&(l.zb(1),l.Nc(" ",t.title,"\n"),l.zb(7),l.Mc("Ship"===t.serviceType?"Ship Name":"Hotel Name"),l.zb(6),l.Mc("Ship"===t.serviceType?"Seat No.":"Room No."),l.zb(1),l.mc("ngIf","Ship"===t.serviceType),l.zb(2),l.Mc("Ship"===t.serviceType?"Journey Date":"Checkin Date"),l.zb(3),l.mc("ngIf","Hotel"===t.serviceType),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_SOLD"===t.status),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_SOLD"===t.status),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_CANCELED"===t.status),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_CANCELED"===t.status),l.zb(3),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_SOLD"===t.status),l.zb(3),l.mc("ngIf",t.authService.hasRole("ROLE_ADMIN")||t.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",t.authService.hasRole("ROLE_ADMIN")||t.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType),l.zb(4),l.mc("ngForOf",t.bookingList),l.zb(7),l.Mc(t.total.totalSeatNumber),l.zb(2),l.mc("ngIf","Ship"===t.serviceType),l.zb(2),l.Mc(t.total.totalrent),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_SOLD"===t.status),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_SOLD"===t.status),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_CANCELED"===t.status),l.zb(1),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_CANCELED"===t.status),l.zb(2),l.mc("ngIf","Hotel"===t.serviceType&&"ROOM_SOLD"===t.status),l.zb(2),l.Mc(t.total.totalCommission),l.zb(1),l.mc("ngIf",t.authService.hasRole("ROLE_ADMIN")||t.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",t.authService.hasRole("ROLE_ADMIN")||t.authService.hasRole("OFFICE_COUNTER")),l.zb(2),l.mc("ngIf",!t.authService.hasRole("SERVICE_AGENT_SHIP")&&!t.authService.hasRole("OFFICE_AGENT")))},directives:[u.p,u.o,u.n,i.c],pipes:[u.f,u.j],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),e}();function Te(e,t){if(1&e&&(l.Qb(0,"option",36),l.Lc(1),l.Pb()),2&e){var n=l.ec();l.zb(1),l.Nc("",n.checkinText," Date")}}function Oe(e,t){1&e&&(l.Qb(0,"div",6),l.Qb(1,"div",7),l.Lc(2,"Role"),l.Pb(),l.Pb())}function ke(e,t){if(1&e&&(l.Qb(0,"option",37),l.Lc(1),l.Pb()),2&e){var n=t.$implicit;l.mc("value",n.name),l.zb(1),l.Nc(" ",n.name," ")}}function Ne(e,t){1&e&&(l.Qb(0,"option",38),l.Lc(1," Reserved "),l.Pb())}function Ie(e,t){if(1&e&&(l.Qb(0,"div"),l.Mb(1,"loading",39),l.Pb()),2&e){var n=l.ec();l.zb(1),l.mc("message",n.message)}}function we(e,t){if(1&e&&l.Mb(0,"booking-report-list",41),2&e){var n=l.ec(2);l.mc("title",n.reportHead)("bookingList",n.serviceAdminBookingReportList)("serviceType",n.selectedList[0].id)("status",n.filterBookingStatus)}}function Ae(e,t){if(1&e&&(l.Ob(0),l.Jc(1,we,1,4,"booking-report-list",40),l.Nb()),2&e){var n=l.ec();l.zb(1),l.mc("ngIf",null!=n.selectedList&&n.selectedList.length>0)}}function Je(e,t){1&e&&(l.Qb(0,"h4",42),l.Mb(1,"i",43),l.Lc(2," No record yet "),l.Pb())}var xe=function(){function e(e,t,n,i){this.reportService=e,this.utilService=t,this.authService=n,this.restDataService=i,this.savedList=[],this.serviceAdminBookingReportList=[],this.reportType="Booking",this.checkinText="Checkin",this.allText="All",this.filterRole="All",this.filterBookingStatus="ROOM_SOLD",this.reportHead="",this.loading=!1,this.dropdownData=[],this.selectedList=[],this.serviceTypes=[],this.dropdownServiceNameData=[],this.selectedServiceNameList=[]}return e.prototype.ngOnInit=function(){this.dropdownSettings={singleSelection:!0,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.setDate(),this.getServiceTypeList(),this.loadRoleDropdown()},e.prototype.getServiceTypeList=function(){var e=this;try{this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/service-type","").subscribe(function(t){e.responseModel=t,e.serviceTypes=e.responseModel.content;for(var n=[],i=[],c=0;c<e.serviceTypes.length;c++)0===c&&i.push({id:e.serviceTypes[c],name:e.serviceTypes[c]}),n.push({id:e.serviceTypes[c],name:e.serviceTypes[c]});e.dropdownData=n,e.selectedList=i,e.onLoad(0)})}catch(t){console.log(t)}},e.prototype.setDate=function(){var e=new Date;this.date={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},e.prototype.getDate=function(){return this.date.day+"-"+this.date.month+"-"+this.date.year},e.prototype.onLoad=function(e){var t=null;if(null!==this.selectedList&&this.selectedList.length>0&&(t=this.selectedList[0].id),null!==t){var n=new Date(this.date.year,this.date.month-1,this.date.day+e);switch(this.date=this.utilService.convertJsDateToNgbDate(n),this.reportType){case"Reservation":this.getAdminBookingReport(this.date,t,0,0);break;case"Booking":this.getAdminBookingReport(this.date,t,1,0);break;case"Checkin":this.getAdminBookingReport(this.date,t,0,1)}}},e.prototype.onTypeChange=function(e){this.reportType=e,this.onLoad(0)},e.prototype.onPrint=function(){window.print()},e.prototype.onFilterChange=function(){var e=this;if(this.selectedServiceNameList.length>0){switch(this.filterRole){case"All":this.serviceAdminBookingReportList=this.savedList;break;default:this.serviceAdminBookingReportList=this.savedList.filter(function(t){return t.role===e.filterRole})}var t=this.selectedServiceNameList[0].name;if(this.filterBookingStatus&&(this.serviceAdminBookingReportList=this.serviceAdminBookingReportList.filter(function(t){return t.bookingStatus===e.filterBookingStatus})),t)switch(t){case"All":break;default:this.serviceAdminBookingReportList=this.serviceAdminBookingReportList.filter(function(e){return e.hotelName===t})}}},e.prototype.getAdminBookingReport=function(e,t,n,i){return c=this,void 0,a=function(){var c=this;return function(e,t){var n,i,c,o,a={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(c=2&o[0]?i.return:o[0]?i.throw||((c=i.return)&&c.call(i),0):i.next)&&!(c=c.call(i,o[1])).done)return c;switch(i=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((c=(c=a.trys).length>0&&c[c.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){a.label=o[1];break}if(6===o[0]&&a.label<c[1]){a.label=c[1],c=o;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(o);break}c[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(r){o=[6,r],i=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}}(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminBookingReport(this.utilService.makeDateString(e),t,n,i).subscribe(function(e){c.savedList=e,c.savedList.sort(c.utilService.dynamicSortObject("date")),c.savedList.sort(c.utilService.dynamicSortObject("roomNumber")),c.onFilterChange(),c.reportHead="Booking report for date of : "+c.getDate(),c.loading=!1})];case 1:return o.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{r(a.next(e))}catch(n){t(n)}}function i(e){try{r(a.throw(e))}catch(n){t(n)}}function r(t){var c;t.done?e(t.value):(c=t.value,c instanceof o?c:new o(function(e){e(c)})).then(n,i)}r((a=a.apply(c,[])).next())});var c,o,a},e.prototype.loadServiceNameDropdown=function(e){var t=this;if(null!=e&&e.length>0)try{"Ship"===e[0].id?(this.checkinText="Journey",this.allText=""):"Hotel"===e[0].id&&(this.checkinText="Checkin",this.allText="All"),this.selectedList=e,this.onLoad(0),this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/service-dropdown/"+e[0].id,"").subscribe(function(e){t.responseModel=e,t.serviceNames=t.responseModel.content;var n=[];n.push({id:"",name:"All"});for(var i=0;i<t.serviceNames.length;i++)n.push({id:t.serviceNames[i].id,name:t.serviceNames[i].serviceName});t.dropdownServiceNameData=n,t.selectedServiceNameList=[{id:"",name:"All"}]})}catch(n){console.log(n)}},e.prototype.loadRoleDropdown=function(){var e=this;try{this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/role-dropdown","").subscribe(function(t){e.responseModel=t,e.roles=e.responseModel.content})}catch(t){console.log(t)}},e.\u0275fac=function(t){return new(t||e)(l.Lb(o.a),l.Lb(a.a),l.Lb(s.a),l.Lb(r.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-booking-report"]],decls:58,vars:21,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none"],[1,"col-sm-2","p-0",2,"margin-left","2px!important"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","id","reportDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],["id","serviceType","name","serviceType",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],["id","serviceName","name","serviceName",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Booking"],["value","Checkin",4,"ngIf"],["value","Reservation"],[1,"col-sm-3","p-0",2,"margin-left","2px!important"],["class","input-group-prepend",4,"ngIf"],["id","role",1,"form-control",3,"ngModel","ngModelChange","change"],["value","All"],[3,"value",4,"ngFor","ngForOf"],["id","status",1,"form-control",3,"ngModel","ngModelChange","change"],["value","ROOM_SOLD"],["value","ROOM_RESERVED",4,"ngIf"],["value","ROOM_CANCELED"],[1,"col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],["value","Checkin"],[3,"value"],["value","ROOM_RESERVED"],[3,"message"],[3,"title","bookingList","serviceType","status",4,"ngIf"],[3,"title","bookingList","serviceType","status"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e){var n=l.Rb();l.Qb(0,"div",0),l.Qb(1,"span",1),l.Lc(2,"Booking report"),l.Pb(),l.Pb(),l.Qb(3,"div",2),l.Qb(4,"div",3),l.Qb(5,"div",4),l.Qb(6,"div",5),l.Qb(7,"div",6),l.Qb(8,"div",7),l.Lc(9,"Date"),l.Pb(),l.Pb(),l.Qb(10,"input",8,9),l.bc("ngModelChange",function(e){return t.date=e})("dateSelect",function(){return t.onLoad(0)})("click",function(){return l.Ac(n),l.xc(11).toggle()}),l.Pb(),l.Qb(12,"div",10),l.Qb(13,"button",11),l.bc("click",function(){return l.Ac(n),l.xc(11).toggle()}),l.Mb(14,"i",12),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(15,"div",4),l.Qb(16,"div",5),l.Qb(17,"ng-multiselect-dropdown",13),l.bc("ngModelChange",function(e){return t.loadServiceNameDropdown(e)})("ngModelChange",function(e){return t.selectedList=e}),l.Pb(),l.Pb(),l.Pb(),l.Qb(18,"div",4),l.Qb(19,"div",5),l.Qb(20,"ng-multiselect-dropdown",14),l.bc("ngModelChange",function(e){return t.selectedServiceNameList=e})("ngModelChange",function(){return t.onFilterChange()}),l.Pb(),l.Pb(),l.Pb(),l.Qb(21,"div",4),l.Qb(22,"div",5),l.Qb(23,"div",6),l.Qb(24,"div",7),l.Lc(25,"Type"),l.Pb(),l.Pb(),l.Qb(26,"select",15),l.bc("ngModelChange",function(e){return t.reportType=e})("change",function(e){return t.onTypeChange(e.target.value)}),l.Qb(27,"option",16),l.Lc(28," Sale date "),l.Pb(),l.Jc(29,Te,2,1,"option",17),l.Qb(30,"option",18),l.Lc(31),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(32,"div",19),l.Qb(33,"div",5),l.Jc(34,Oe,3,0,"div",20),l.Qb(35,"select",21),l.bc("ngModelChange",function(e){return t.filterRole=e})("change",function(){return t.onFilterChange()}),l.Qb(36,"option",22),l.Lc(37,"All"),l.Pb(),l.Jc(38,ke,2,2,"option",23),l.Pb(),l.Qb(39,"div",6),l.Qb(40,"div",7),l.Lc(41,"Status"),l.Pb(),l.Pb(),l.Qb(42,"select",24),l.bc("ngModelChange",function(e){return t.filterBookingStatus=e})("change",function(){return t.onFilterChange()}),l.Qb(43,"option",25),l.Lc(44," Sold "),l.Pb(),l.Jc(45,Ne,2,0,"option",26),l.Qb(46,"option",27),l.Lc(47," Canceled "),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(48,"div",28),l.Qb(49,"button",29),l.bc("click",function(){return t.onPrint()}),l.Mb(50,"i",30),l.Lc(51," Print "),l.Pb(),l.Pb(),l.Pb(),l.Qb(52,"div",31),l.Qb(53,"div",32),l.Jc(54,Ie,2,1,"div",33),l.Jc(55,Ae,2,1,"ng-container",34),l.Jc(56,Je,3,0,"ng-template",null,35,l.Kc),l.Pb(),l.Pb(),l.Pb()}if(2&e){var i=l.xc(57);l.zb(10),l.mc("ngModel",t.date),l.zb(7),l.mc("placeholder","Select Service Type")("settings",t.dropdownSettings)("data",t.dropdownData)("ngModel",t.selectedList),l.zb(3),l.mc("placeholder","Select Service Name")("settings",t.dropdownSettings)("data",t.dropdownServiceNameData)("ngModel",t.selectedServiceNameList),l.zb(6),l.mc("ngModel",t.reportType),l.zb(3),l.mc("ngIf",null!=t.selectedList&&t.selectedList.length>0&&"Hotel"===t.selectedList[0].id),l.zb(2),l.Oc(" ",t.checkinText," Date ",t.allText,""),l.zb(3),l.mc("ngIf",!(t.authService.hasRole("SERVICE_AGENT_SHIP")||t.authService.hasRole("B2B_AGENT")||t.authService.hasRole("SERVICE_AGENT_HOTEL")||t.authService.hasRole("OFFICE_AGENT"))),l.zb(1),l.mc("ngModel",t.filterRole),l.zb(3),l.mc("ngForOf",t.roles),l.zb(4),l.mc("ngModel",t.filterBookingStatus),l.zb(3),l.mc("ngIf",!(t.authService.hasRole("SERVICE_AGENT_SHIP")||t.authService.hasRole("B2B_AGENT")||t.authService.hasRole("B2B_COUNTER")||t.authService.hasRole("SERVICE_AGENT_HOTEL")||t.authService.hasRole("OFFICE_AGENT"))),l.zb(9),l.mc("ngIf",t.loading),l.zb(1),l.mc("ngIf",t.serviceAdminBookingReportList.length>0&&!t.loading)("ngIfElse",i)}},directives:[b.k,d.b,d.n,d.q,h.a,d.v,d.r,d.x,u.p,u.o,p.a,Ce],styles:[""]}),e}(),Ee=n("EApP"),Fe=n("53Co");function _e(e,t){1&e&&(l.Qb(0,"div",22),l.Mb(1,"loading"),l.Pb())}function Be(e,t){1&e&&(l.Qb(0,"th",25),l.Lc(1,"Advance"),l.Pb())}function He(e,t){1&e&&(l.Qb(0,"th",25),l.Lc(1,"Due"),l.Pb())}function $e(e,t){if(1&e&&(l.Qb(0,"td",25),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.totalAdvance)}}function Ue(e,t){if(1&e&&(l.Qb(0,"td",25),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.totalDue)}}function Ge(e,t){if(1&e&&(l.Qb(0,"tr"),l.Qb(1,"td"),l.Lc(2),l.Pb(),l.Qb(3,"td"),l.Lc(4),l.Pb(),l.Qb(5,"td"),l.Lc(6),l.Pb(),l.Qb(7,"td",25),l.Lc(8),l.Pb(),l.Qb(9,"td",25),l.Lc(10),l.Pb(),l.Jc(11,$e,2,1,"td",26),l.Jc(12,Ue,2,1,"td",26),l.Pb()),2&e){var n=t.$implicit,i=t.index,c=l.ec(2);l.zb(2),l.Mc(i+1),l.zb(2),l.Mc(null==n?null:n.date),l.zb(2),l.Nc(" ",n.hotelName," "),l.zb(2),l.Mc(n.totalNumberOfRooms),l.zb(2),l.Mc(n.totalRent),l.zb(1),l.mc("ngIf","Journey"!==c.checkinText),l.zb(1),l.mc("ngIf","Journey"!==c.checkinText)}}function Ve(e,t){if(1&e&&(l.Qb(0,"td",25),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.getSum("totalAdvance"))}}function Ye(e,t){if(1&e&&(l.Qb(0,"td",25),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.getSum("totalDue"))}}function qe(e,t){if(1&e&&(l.Qb(0,"div",23),l.Qb(1,"table",24),l.Qb(2,"thead"),l.Qb(3,"tr"),l.Qb(4,"th"),l.Lc(5,"Sl."),l.Pb(),l.Qb(6,"th"),l.Lc(7,"Date"),l.Pb(),l.Qb(8,"th"),l.Lc(9),l.Pb(),l.Qb(10,"th",25),l.Lc(11),l.Pb(),l.Qb(12,"th",25),l.Lc(13,"Rent"),l.Pb(),l.Jc(14,Be,2,0,"th",26),l.Jc(15,He,2,0,"th",26),l.Pb(),l.Pb(),l.Qb(16,"tbody"),l.Jc(17,Ge,13,7,"tr",27),l.Qb(18,"tr"),l.Mb(19,"td"),l.Mb(20,"td"),l.Qb(21,"td",25),l.Lc(22,"Total"),l.Pb(),l.Qb(23,"td",25),l.Lc(24),l.Pb(),l.Qb(25,"td",25),l.Lc(26),l.Pb(),l.Jc(27,Ve,2,1,"td",26),l.Jc(28,Ye,2,1,"td",26),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e){var n=l.ec();l.zb(9),l.Mc("Journey"==n.checkinText?"Ship Name":"Hotel Name"),l.zb(2),l.Mc("Journey"==n.checkinText?"Number of Seats":"Number of Rooms"),l.zb(3),l.mc("ngIf","Journey"!==n.checkinText),l.zb(1),l.mc("ngIf","Journey"!==n.checkinText),l.zb(2),l.mc("ngForOf",n.serviceAdminBookingReportList),l.zb(7),l.Mc(n.getSum("totalNumberOfRooms")),l.zb(2),l.Mc(n.getSum("totalRent")),l.zb(1),l.mc("ngIf","Journey"!==n.checkinText),l.zb(1),l.mc("ngIf","Journey"!==n.checkinText)}}var je=function(){function e(e,t,n,i){this.reportService=e,this.utilService=t,this.toastrService=n,this.restDataService=i,this.reportList=[],this.serviceAdminBookingReportList=[],this.daterange={},this.mode="Sell",this.loading=!1,this.dropdownData=[],this.selectedList=[],this.checkinText="Checkin",this.dropdownServiceNameData=[],this.selectedServiceNameList=[],this.serviceTypes=[],this.filterServiceName="All"}return e.prototype.ngOnInit=function(){this.dropdownSettings={singleSelection:!0,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.setDateRanges(),this.getServiceTypeList()},e.prototype.getServiceTypeList=function(){var e=this;try{this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/service-type","").subscribe(function(t){e.responseModel=t,e.serviceTypes=e.responseModel.content;for(var n=[],i=[],c=0;c<e.serviceTypes.length;c++)0===c&&i.push({id:e.serviceTypes[c],name:e.serviceTypes[c]}),n.push({id:e.serviceTypes[c],name:e.serviceTypes[c]});e.dropdownData=n,e.selectedList=i})}catch(t){console.log(t)}},e.prototype.loadServiceNameDropdown=function(e){var t=this;if(null!=e&&e.length>0)try{"Ship"===e[0].id?this.checkinText="Journey":"Hotel"===e[0].id&&(this.checkinText="Checkin"),this.selectedList=e,this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/service-dropdown/"+e[0].id,"").subscribe(function(e){t.responseModel=e,t.serviceNames=t.responseModel.content;for(var n=[],i=0;i<t.serviceNames.length;i++)n.push({id:t.serviceNames[i].id,name:t.serviceNames[i].serviceName});t.dropdownServiceNameData=n})}catch(n){console.log(n)}},e.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10),(new Date).setDate(this.daterange.checkinDate.getDate()-90),(new Date).setDate(this.daterange.checkinDate.getDate()+2),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},e.prototype.selectedDate=function(e){this.daterange.checkinDate=e.start._d,this.daterange.checkoutDate=e.end._d,this.daterange.label=e.label},e.prototype.filterReportDataByServiceName=function(e){if(null!=e&&e.length>0)switch(this.filterServiceName=e[0].name,e[0].name){case"All":this.serviceAdminBookingReportList=this.reportList;break;default:this.serviceAdminBookingReportList=this.reportList.filter(function(t){return t.hotelName===e[0].name})}},e.prototype.getSum=function(e){for(var t=0,n=0;n<this.serviceAdminBookingReportList.length;n++)t+=this.serviceAdminBookingReportList[n][e];return t},e.prototype.getAdminReservationReportRange=function(e,t,n,i,c){var o=this;this.loading=!0,this.serviceAdminBookingReportList=[],this.reportList=[],this.reportService.getAdminReservationReportRange(this.utilService.getDateString(e),this.utilService.getDateString(t),n,i,c).subscribe(function(e){o.reportList=e,o.serviceAdminBookingReportList=e,o.loading=!1})},e.prototype.onSearch=function(){var e=null,t=null;null!==this.selectedList&&this.selectedList.length>0&&(e=this.selectedList[0].id),null!==this.selectedServiceNameList&&this.selectedServiceNameList.length>0&&(t=this.selectedServiceNameList[0].id),null!==e?null!==t?this.getAdminReservationReportRange(this.daterange.checkinDate,this.daterange.checkoutDate,e,this.mode,t):this.toastrService.error("Error","Please service name first"):this.toastrService.error("Error","Please service type first")},e.\u0275fac=function(t){return new(t||e)(l.Lb(o.a),l.Lb(a.a),l.Lb(Ee.b),l.Lb(r.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-booking-range-report"]],decls:33,vars:13,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-sm-2","p-0",2,"margin-left","5px!important"],[1,"input-group","mb-2"],["id","serviceType","name","serviceType",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],["id","serviceName","name","serviceName",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"col-auto"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange"],["value","Sell"],["value","Reserve"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",2,"margin-bottom","100px","margin-left","20px",3,"click"],[1,"row","mb-5"],["class","col text-center",4,"ngIf"],["class","col",4,"ngIf"],[1,"col","text-center"],[1,"col"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Lc(2,"Booking range report"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"div",4),l.Qb(7,"div",5),l.Qb(8,"div",6),l.Mb(9,"i",7),l.Pb(),l.Pb(),l.Qb(10,"input",8),l.bc("selected",function(e){return t.selectedDate(e)}),l.Pb(),l.Pb(),l.Pb(),l.Qb(11,"div",9),l.Qb(12,"div",10),l.Qb(13,"ng-multiselect-dropdown",11),l.bc("ngModelChange",function(e){return t.loadServiceNameDropdown(e)})("ngModelChange",function(e){return t.selectedList=e}),l.Pb(),l.Pb(),l.Pb(),l.Qb(14,"div",9),l.Qb(15,"div",10),l.Qb(16,"ng-multiselect-dropdown",12),l.bc("ngModelChange",function(e){return t.selectedServiceNameList=e})("ngModelChange",function(e){return t.filterReportDataByServiceName(e)}),l.Pb(),l.Pb(),l.Pb(),l.Qb(17,"div",13),l.Qb(18,"div",10),l.Qb(19,"div",5),l.Qb(20,"div",6),l.Lc(21,"Type"),l.Pb(),l.Pb(),l.Qb(22,"select",14),l.bc("ngModelChange",function(e){return t.mode=e}),l.Qb(23,"option",15),l.Lc(24,"sells date "),l.Pb(),l.Qb(25,"option",16),l.Lc(26),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(27,"div",17),l.Qb(28,"button",18),l.bc("click",function(){return t.onSearch()}),l.Lc(29,"Search"),l.Pb(),l.Pb(),l.Pb(),l.Qb(30,"div",19),l.Jc(31,_e,2,0,"div",20),l.Jc(32,qe,29,9,"div",21),l.Pb(),l.Pb()),2&e&&(l.zb(10),l.mc("options",t.options),l.zb(3),l.mc("placeholder","Select Service Type")("settings",t.dropdownSettings)("data",t.dropdownData)("ngModel",t.selectedList),l.zb(3),l.mc("placeholder","Select Service Name")("settings",t.dropdownSettings)("data",t.dropdownServiceNameData)("ngModel",t.selectedServiceNameList),l.zb(6),l.mc("ngModel",t.mode),l.zb(4),l.Nc("",t.checkinText," date "),l.zb(5),l.mc("ngIf",t.loading),l.zb(1),l.mc("ngIf",!t.loading))},directives:[Fe.b,h.a,d.n,d.q,d.v,d.r,d.x,u.p,p.a,u.o],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),e}();function Ke(e,t){if(1&e&&(l.Qb(0,"option",17),l.Lc(1),l.Pb()),2&e){var n=t.$implicit;l.mc("value",n.Value),l.zb(1),l.Mc(n.Text)}}function Xe(e,t){if(1&e&&(l.Qb(0,"option",17),l.Lc(1),l.Pb()),2&e){var n=t.$implicit;l.mc("value",n),l.zb(1),l.Mc(n)}}function Ze(e,t){if(1&e&&(l.Qb(0,"option",17),l.Lc(1),l.Pb()),2&e){var n=t.$implicit;l.mc("value",n.id),l.zb(1),l.Mc(n.serviceName)}}function We(e,t){1&e&&l.Mb(0,"loading")}var et=function(){function e(e,t){this.restDataService=e,this.toastrService=t,this.monthList=[{Value:1,Text:"Jan"},{Value:2,Text:"Feb"},{Value:3,Text:"Mar"},{Value:4,Text:"Apr"},{Value:5,Text:"May"},{Value:6,Text:"June"},{Value:7,Text:"July"},{Value:8,Text:"Aug"},{Value:9,Text:"Sep"},{Value:10,Text:"Oct"},{Value:11,Text:"Nov"},{Value:12,Text:"Dec"}],this.yearList=[],this.loading=!1,this.selectedShip=0,this.totalSoldTicket=0}return e.prototype.ngOnInit=function(){this.getYearList(),this.loadServiceNameDropdown()},e.prototype.getYearList=function(){var e=(new Date).getFullYear();this.selectedYear=e,this.selectedMonth=(new Date).getMonth()+1;for(var t=e;t>=2020;t--)this.yearList.push(t)},e.prototype.loadServiceNameDropdown=function(){var e=this;this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/service-dropdown/Ship","").subscribe(function(t){e.responseModel=t,e.serviceNames=e.responseModel.content})},e.prototype.onSearch=function(){var e=this;0!==this.selectedShip?this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/get-ticket-count?shipId="+this.selectedShip+"&month="+this.selectedMonth+"&year="+this.selectedYear,null).subscribe(function(t){e.totalSoldTicket=t}):this.toastrService.error("Please select Ship","Error")},e.\u0275fac=function(t){return new(t||e)(l.Lb(r.a),l.Lb(Ee.b))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-ticket-sale-report"]],decls:36,vars:8,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["id","month",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange"],["id","shipId",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"col","text-center"],[4,"ngIf"],[2,"text-align","center"],[3,"value"]],template:function(e,t){1&e&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Lc(2,"Ticket Sold report"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"div",4),l.Qb(7,"div",5),l.Qb(8,"div",6),l.Lc(9,"Month"),l.Pb(),l.Pb(),l.Qb(10,"select",7),l.bc("ngModelChange",function(e){return t.selectedMonth=e}),l.Jc(11,Ke,2,2,"option",8),l.Pb(),l.Pb(),l.Pb(),l.Qb(12,"div",3),l.Qb(13,"div",4),l.Qb(14,"div",5),l.Qb(15,"div",6),l.Lc(16,"Year"),l.Pb(),l.Pb(),l.Qb(17,"select",9),l.bc("ngModelChange",function(e){return t.selectedYear=e}),l.Jc(18,Xe,2,2,"option",8),l.Pb(),l.Pb(),l.Pb(),l.Qb(19,"div",3),l.Qb(20,"div",4),l.Qb(21,"div",5),l.Qb(22,"div",6),l.Lc(23,"Ship"),l.Pb(),l.Pb(),l.Qb(24,"select",10),l.bc("ngModelChange",function(e){return t.selectedShip=e}),l.Qb(25,"option",11),l.Lc(26,"--Select One--"),l.Pb(),l.Jc(27,Ze,2,2,"option",8),l.Pb(),l.Pb(),l.Pb(),l.Qb(28,"div",12),l.Qb(29,"button",13),l.bc("click",function(){return t.onSearch()}),l.Lc(30,"Search"),l.Pb(),l.Pb(),l.Pb(),l.Qb(31,"div",2),l.Qb(32,"div",14),l.Jc(33,We,1,0,"loading",15),l.Qb(34,"h3",16),l.Lc(35),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e&&(l.zb(10),l.mc("ngModel",t.selectedMonth),l.zb(1),l.mc("ngForOf",t.monthList),l.zb(6),l.mc("ngModel",t.selectedYear),l.zb(1),l.mc("ngForOf",t.yearList),l.zb(6),l.mc("ngModel",t.selectedShip),l.zb(3),l.mc("ngForOf",t.serviceNames),l.zb(6),l.mc("ngIf",t.loading),l.zb(2),l.Nc("Total Number of Sold Seat is: ",t.totalSoldTicket,""))},directives:[d.v,d.n,d.q,u.o,d.r,d.x,u.p,p.a],styles:[""]}),e}(),tt=n("d26D"),nt=n("ITiG"),it=function(e,t,n,i){return new(n||(n=Promise))(function(c,o){function a(e){try{s(i.next(e))}catch(t){o(t)}}function r(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,r)}s((i=i.apply(e,t||[])).next())})},ct=function(e,t){var n,i,c,o,a={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(c=2&o[0]?i.return:o[0]?i.throw||((c=i.return)&&c.call(i),0):i.next)&&!(c=c.call(i,o[1])).done)return c;switch(i=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((c=(c=a.trys).length>0&&c[c.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){a.label=o[1];break}if(6===o[0]&&a.label<c[1]){a.label=c[1],c=o;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(o);break}c[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(r){o=[6,r],i=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}};function ot(e,t){if(1&e&&(l.Qb(0,"option",36),l.Lc(1),l.Pb()),2&e){var n=t.$implicit;l.mc("value",n.name),l.zb(1),l.Nc(" ",n.name," ")}}function at(e,t){if(1&e&&(l.Qb(0,"option",36),l.Lc(1),l.Pb()),2&e){var n=t.$implicit;l.mc("value",n.id),l.zb(1),l.Oc("",n.name,"[",n.phoneNumber,"] ")}}function rt(e,t){if(1&e){var n=l.Rb();l.Qb(0,"div",37),l.Qb(1,"button",38),l.bc("click",function(){return l.Ac(n),l.ec().onSearch()}),l.Lc(2,"Search"),l.Pb(),l.Pb()}}function st(e,t){if(1&e&&(l.Qb(0,"div"),l.Mb(1,"loading",39),l.Pb()),2&e){var n=l.ec();l.zb(1),l.mc("message",n.message)}}function lt(e,t){1&e&&(l.Qb(0,"th",42),l.Lc(1,"Advance"),l.Pb())}function bt(e,t){1&e&&(l.Qb(0,"th",42),l.Lc(1,"Due"),l.Pb())}function dt(e,t){1&e&&(l.Qb(0,"th",42),l.Lc(1,"Agent Com."),l.Pb())}function ht(e,t){1&e&&(l.Qb(0,"th",42),l.Lc(1,"ITA Com."),l.Pb())}function ut(e,t){1&e&&(l.Qb(0,"th"),l.Lc(1,"Ref"),l.Pb())}function pt(e,t){1&e&&(l.Qb(0,"th",42),l.Lc(1,"Ref Fee."),l.Pb())}function gt(e,t){if(1&e&&(l.Qb(0,"td",42),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.advance)}}function mt(e,t){if(1&e&&(l.Qb(0,"td",42),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.due)}}function vt(e,t){if(1&e&&(l.Qb(0,"td",42),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.commission-n.itaCommission)}}function ft(e,t){if(1&e&&(l.Qb(0,"td",42),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.itaCommission)}}function Lt(e,t){if(1&e&&(l.Qb(0,"td"),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.ref)}}function Mt(e,t){if(1&e&&(l.Qb(0,"td",42),l.Lc(1),l.Pb()),2&e){var n=l.ec().$implicit;l.zb(1),l.Mc(n.refFee)}}var Pt=function(e,t){return{"bg-warning":e,"bg-danger":t}},yt=function(e,t){return{"bg-primary":e,"bg-danger":t}};function St(e,t){if(1&e&&(l.Qb(0,"tr",46),l.Qb(1,"td",42),l.Lc(2),l.fc(3,"date"),l.Pb(),l.Qb(4,"td"),l.Lc(5),l.Pb(),l.Qb(6,"td"),l.Lc(7),l.Pb(),l.Qb(8,"td"),l.Lc(9),l.Pb(),l.Qb(10,"td",42),l.Lc(11),l.fc(12,"date"),l.Pb(),l.Qb(13,"td",42),l.Lc(14),l.Pb(),l.Jc(15,gt,2,1,"td",43),l.Jc(16,mt,2,1,"td",43),l.Qb(17,"td",42),l.Lc(18),l.Pb(),l.Qb(19,"td",42),l.Lc(20),l.Pb(),l.Jc(21,vt,2,1,"td",43),l.Jc(22,ft,2,1,"td",43),l.Jc(23,Lt,2,1,"td",32),l.Jc(24,Mt,2,1,"td",43),l.Qb(25,"td",47),l.Lc(26),l.Pb(),l.Pb()),2&e){var n=t.$implicit,i=l.ec(2);l.mc("ngClass",l.rc(25,Pt,"ROOM_RESERVED"==n.bookingStatus,"ROOM_CANCELED"==n.bookingStatus)),l.zb(2),l.Nc(" ",l.hc(3,19,n.created,"d MMM,y")," "),l.zb(3),l.Mc(n.hotelName),l.zb(2),l.Oc("",n.customerName,"[",n.customerPhone,"]"),l.zb(2),l.Oc("",n.roomNumber," [",n.category,"]"),l.zb(2),l.Nc(" ",l.hc(12,22,n.date,"d MMM,y")," "),l.zb(3),l.Mc(n.price),l.zb(1),l.mc("ngIf","Journey"!=i.checkinText),l.zb(1),l.mc("ngIf","Journey"!=i.checkinText),l.zb(2),l.Mc(n.paymentMethod),l.zb(2),l.Mc(n.commission),l.zb(1),l.mc("ngIf",i.authService.hasRole("ROLE_ADMIN")||i.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",i.authService.hasRole("ROLE_ADMIN")||i.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf","Journey"!=i.checkinText),l.zb(1),l.mc("ngIf","Journey"!=i.checkinText),l.zb(1),l.mc("ngClass",l.rc(28,yt,"Paid"==n.status,"Unpaid"==n.status)),l.zb(1),l.Nc(" ",n.status," ")}}function Qt(e,t){if(1&e&&(l.Qb(0,"th",42),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalAdvance)}}function Dt(e,t){if(1&e&&(l.Qb(0,"th",42),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalDue)}}function zt(e,t){if(1&e&&(l.Qb(0,"th",42),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalCommission-n.total.totalItaCommission)}}function Rt(e,t){if(1&e&&(l.Qb(0,"th",42),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalItaCommission)}}function Ct(e,t){1&e&&l.Mb(0,"td")}function Tt(e,t){1&e&&l.Mb(0,"td",42)}function Ot(e,t){if(1&e&&(l.Qb(0,"div"),l.Qb(1,"h3",40),l.Lc(2),l.Pb(),l.Qb(3,"table",41),l.Qb(4,"thead"),l.Qb(5,"tr"),l.Qb(6,"th"),l.Lc(7,"Sells Date"),l.Pb(),l.Qb(8,"th"),l.Lc(9),l.Pb(),l.Qb(10,"th"),l.Lc(11,"Customer Name"),l.Pb(),l.Qb(12,"th"),l.Lc(13),l.Pb(),l.Qb(14,"th",42),l.Lc(15),l.Pb(),l.Qb(16,"th",42),l.Lc(17,"Rent"),l.Pb(),l.Jc(18,lt,2,0,"th",43),l.Jc(19,bt,2,0,"th",43),l.Qb(20,"th",42),l.Lc(21,"Payment Method"),l.Pb(),l.Qb(22,"th",42),l.Lc(23,"Com."),l.Pb(),l.Jc(24,dt,2,0,"th",43),l.Jc(25,ht,2,0,"th",43),l.Jc(26,ut,2,0,"th",32),l.Jc(27,pt,2,0,"th",43),l.Qb(28,"th"),l.Lc(29,"Status"),l.Pb(),l.Pb(),l.Pb(),l.Qb(30,"tbody"),l.Jc(31,St,27,31,"tr",44),l.Pb(),l.Qb(32,"tfoot"),l.Qb(33,"tr"),l.Qb(34,"th"),l.Lc(35,"Total"),l.Pb(),l.Mb(36,"td"),l.Mb(37,"td"),l.Qb(38,"td",45),l.Lc(39),l.Pb(),l.Mb(40,"th"),l.Qb(41,"th",42),l.Lc(42),l.Pb(),l.Jc(43,Qt,2,1,"th",43),l.Jc(44,Dt,2,1,"th",43),l.Mb(45,"th",42),l.Qb(46,"th",42),l.Lc(47),l.Pb(),l.Jc(48,zt,2,1,"th",43),l.Jc(49,Rt,2,1,"th",43),l.Jc(50,Ct,1,0,"td",32),l.Jc(51,Tt,1,0,"td",43),l.Mb(52,"td",42),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e){var n=l.ec();l.zb(2),l.Oc(" ",n.reportType," report for date of : ",n.getDate()," "),l.zb(7),l.Mc("Journey"==n.checkinText?"Ship Name":"Hotel Name"),l.zb(4),l.Mc("Journey"==n.checkinText?"Seat No.":"Room No."),l.zb(2),l.Mc("Journey"==n.checkinText?"Journey Date":"Checkin Date"),l.zb(3),l.mc("ngIf","Journey"!=n.checkinText),l.zb(1),l.mc("ngIf","Journey"!=n.checkinText),l.zb(5),l.mc("ngIf",n.authService.hasRole("ROLE_ADMIN")||n.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",n.authService.hasRole("ROLE_ADMIN")||n.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf","Journey"!=n.checkinText),l.zb(1),l.mc("ngIf","Journey"!=n.checkinText),l.zb(4),l.mc("ngForOf",n.savedList),l.zb(8),l.Mc(n.total.totalSeatNumber),l.zb(3),l.Mc(n.total.totalrent),l.zb(1),l.mc("ngIf","Journey"!=n.checkinText),l.zb(1),l.mc("ngIf","Journey"!=n.checkinText),l.zb(3),l.Mc(n.total.totalCommission),l.zb(1),l.mc("ngIf",n.authService.hasRole("ROLE_ADMIN")||n.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf",n.authService.hasRole("ROLE_ADMIN")||n.authService.hasRole("OFFICE_COUNTER")),l.zb(1),l.mc("ngIf","Journey"!=n.checkinText),l.zb(1),l.mc("ngIf","Journey"!=n.checkinText)}}function kt(e,t){if(1&e&&(l.Qb(0,"tr"),l.Qb(1,"td"),l.Lc(2),l.Pb(),l.Qb(3,"td"),l.Lc(4),l.Pb(),l.Pb()),2&e){var n=t.$implicit,i=l.ec(2);l.zb(2),l.Mc(n.key),l.zb(2),l.Mc(i.paymentMethodAmountMap.get(n.key))}}function Nt(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalAdvance)}}function It(e,t){if(1&e&&(l.Qb(0,"th"),l.Lc(1),l.Pb()),2&e){var n=l.ec(2);l.zb(1),l.Mc(n.total.totalrent)}}function wt(e,t){if(1&e&&(l.Qb(0,"div",30),l.Qb(1,"div",8),l.Qb(2,"table",41),l.Qb(3,"tr"),l.Qb(4,"th"),l.Lc(5,"Payment Method"),l.Pb(),l.Qb(6,"th"),l.Lc(7,"Amount"),l.Pb(),l.Pb(),l.Jc(8,kt,5,2,"tr",48),l.fc(9,"keyvalue"),l.Qb(10,"tr"),l.Qb(11,"th"),l.Lc(12,"Total"),l.Pb(),l.Jc(13,Nt,2,1,"th",32),l.Jc(14,It,2,1,"th",32),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e){var n=l.ec();l.zb(8),l.mc("ngForOf",l.gc(9,3,n.paymentMethodAmountMap)),l.zb(5),l.mc("ngIf","Journey"!=n.checkinText),l.zb(1),l.mc("ngIf","Journey"==n.checkinText)}}function At(e,t){1&e&&(l.Qb(0,"h4",40),l.Mb(1,"i",49),l.Lc(2," No record yet "),l.Pb())}var Jt=function(){function e(e,t,n,i,c,o){this.userService=e,this.hotelService=t,this.reportService=n,this.authService=i,this.util=c,this.restDataService=o,this.daterange={},this.reportType="Sells",this.loading=!1,this.reportList=[],this.savedList=[],this.message="",this.dropdownData=[],this.selectedList=[],this.checkinText="Checkin",this.dropdownServiceNameData=[],this.selectedServiceNameList=[],this.serviceTypes=[],this.filterServiceName="All",this.filterBookingStatus="ROOM_SOLD",this.paymentMethodAmountMap=new Map}return e.prototype.ngOnInit=function(){this.dropdownSettings={singleSelection:!0,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.getAllHotels(),this.getServiceTypeList(),this.loadRoleDropdown(),this.setDateRanges()},e.prototype.getServiceTypeList=function(){var e=this;try{this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/service-type","").subscribe(function(t){e.responseModel=t,e.serviceTypes=e.responseModel.content;for(var n=[],i=[],c=0;c<e.serviceTypes.length;c++)0===c&&i.push({id:e.serviceTypes[c],name:e.serviceTypes[c]}),n.push({id:e.serviceTypes[c],name:e.serviceTypes[c]});e.dropdownData=n,e.selectedList=i})}catch(t){console.log(t)}},e.prototype.loadRoleDropdown=function(){var e=this;try{this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/role-dropdown","").subscribe(function(t){e.responseModel=t,e.roles=e.responseModel.content})}catch(t){console.log(t)}},e.prototype.loadServiceNameDropdown=function(e){var t=this;if(null!=e&&e.length>0)try{"Ship"===e[0].id?this.checkinText="Journey":"Hotel"===e[0].id&&(this.checkinText="Checkin"),this.serviceType=e[0].id,this.selectedList=e,this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/service-dropdown/"+e[0].id,"").subscribe(function(e){t.responseModel=e,t.serviceNames=t.responseModel.content;var n=[];n.push({id:"",name:"All"});for(var i=0;i<t.serviceNames.length;i++)n.push({id:t.serviceNames[i].id,name:t.serviceNames[i].serviceName});t.dropdownServiceNameData=n,t.selectedServiceNameList=[{id:"",name:"All"}],t.reportList=null,t.savedList=null})}catch(n){console.log(n)}},e.prototype.setDateRanges=function(){this.daterange.startDate=new Date,this.daterange.endDate=new Date,(new Date).setDate(this.daterange.startDate.getDate()-490),(new Date).setDate(this.daterange.endDate.getDate()+90),this.daterange.startDate.setDate(this.daterange.endDate.getDate()-10),this.daterange.endDate.setDate(this.daterange.endDate.getDate()+10),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}},e.prototype.selectedDate=function(e){this.savedList=null,this.daterange.startDate=e.start._d,this.daterange.endDate=e.end._d,this.daterange.label=e.label},e.prototype.getAllHotels=function(){return it(this,void 0,void 0,function(){var e,t;return ct(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),e=this,[4,this.hotelService.gethotelsList().toPromise()];case 2:return e.hotelList=n.sent(),this.hotelList.sort(this.util.dynamicSortObject("name")),this.loading=!1,[3,4];case 3:return t=n.sent(),console.log(t),[3,4];case 4:return[2]}})})},e.prototype.onServiceChange=function(){var e=this;if(this.selectedServiceNameList.length>0){var t=this.selectedServiceNameList[0].name;if(t)switch(t){case"All":this.savedList=this.reportList;break;default:this.savedList=this.reportList.filter(function(e){return e.hotelName===t})}this.filterBookingStatus&&null!==this.savedList&&(this.savedList=this.savedList.filter(function(t){return t.bookingStatus===e.filterBookingStatus})),this.calculateServiceAdminBookingReportList()}},e.prototype.getUserListByRole=function(e){return it(this,void 0,void 0,function(){var t,n;return ct(this,function(i){switch(i.label){case 0:this.savedList=null,this.loading=!0,i.label=1;case 1:return i.trys.push([1,3,,4]),t=this,[4,this.userService.getCounterUserListByRole(e).toPromise()];case 2:return t.userList=i.sent(),this.userList.sort(this.util.dynamicSortObject("name")),this.loading=!1,[3,4];case 3:return n=i.sent(),console.log(n),[3,4];case 4:return[2]}})})},e.prototype.onSearch=function(){switch(this.reportType){case"Sells":this.getAdminSellsRangeReport(1,this.counter.id,this.daterange.startDate,this.daterange.endDate,this.serviceType);break;case"Reservation":this.getAdminSellsRangeReport(0,this.counter.id,this.daterange.startDate,this.daterange.endDate,this.serviceType)}},e.prototype.getAdminSellsRangeReport=function(e,t,n,i,c){return it(this,void 0,void 0,function(){var o,a,r,s;return ct(this,function(l){switch(l.label){case 0:this.loading=!0,o=this.util.getDateString(n),a=this.util.getDateString(i),l.label=1;case 1:return l.trys.push([1,3,,4]),r=this,[4,this.reportService.getAdminSellsReportRangeForIndividual(e,t,o,a,c).toPromise()];case 2:return r.reportList=l.sent(),this.reportList.sort(this.util.dynamicSortObject("created")),this.savedList=this.reportList,this.onServiceChange(),this.loading=!1,[3,4];case 3:return s=l.sent(),console.log(s),[3,4];case 4:return[2]}})})},e.prototype.onCounterChange=function(e){this.savedList=null,this.counter=this.userList.find(function(t){return t.id.toString()===e})},e.prototype.getDate=function(){return this.daterange.startDate.getDate()+"-"+(this.daterange.startDate.getMonth()+1)+"-"+this.daterange.startDate.getFullYear()+"-"+this.daterange.endDate.getDate()+" to "+(this.daterange.endDate.getMonth()+1)+"-"+this.daterange.endDate.getFullYear()},e.prototype.calculateServiceAdminBookingReportList=function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalSeatNumber:0,totalCommission:0,totalItaCommission:0},this.paymentMethodAmountMap=new Map,null!==this.savedList&&this.savedList.forEach(function(t){e.total.totalrent+=t.price,e.total.totalAdvance+=t.advance,e.total.totalSeatNumber+=t.numberOfSeat,e.total.totalDue+=t.due,e.total.totalCommission+=t.commission,e.total.totalItaCommission+=t.itaCommission,null!==t.paymentMethod&&""!==t.paymentMethod&&e.paymentMethodAmountMap.set(t.paymentMethod,"Journey"!=e.checkinText?e.paymentMethodAmountMap.get(t.paymentMethod)?e.paymentMethodAmountMap.get(t.paymentMethod)+t.advance:t.advance:e.paymentMethodAmountMap.get(t.paymentMethod)?e.paymentMethodAmountMap.get(t.paymentMethod)+t.price:t.price),null!==t.paymentMethod&&""!==t.paymentMethod||(t.paymentMethod="Others",e.paymentMethodAmountMap.set(t.paymentMethod,"Journey"!=e.checkinText?e.paymentMethodAmountMap.get(t.paymentMethod)?e.paymentMethodAmountMap.get(t.paymentMethod)+t.advance:t.advance:e.paymentMethodAmountMap.get(t.paymentMethod)?e.paymentMethodAmountMap.get(t.paymentMethod)+t.price:t.price))})},e.prototype.clear=function(){this.savedList=null},e.prototype.onPrint=function(){window.print()},e.\u0275fac=function(t){return new(t||e)(l.Lb(nt.a),l.Lb(tt.a),l.Lb(o.a),l.Lb(s.a),l.Lb(a.a),l.Lb(r.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-couter-report"]],decls:64,vars:19,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","d-print-none","bg-light","shadow-sm"],[1,"col-sm-1","p-0",2,"margin-left","5px!important","margin-top","25px"],[1,"input-group","mb-2"],["id","serviceType","name","serviceType",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"col-sm-2","p-0",2,"margin-left","5px!important","margin-top","25px"],["id","serviceName","name","serviceName",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"col-auto"],[1,"form-group"],["for","counterType"],["id","counterType",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","counterUser"],["id","counterUser",1,"form-control",3,"change"],["for","dateRange"],["type","text","id","dateRange","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],["for","reportType"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],["id","status",1,"form-control",3,"ngModel","ngModelChange","change"],["value","ROOM_SOLD"],["value","ROOM_RESERVED"],["value","ROOM_CANCELED"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center","ml-auto","mr-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","row",4,"ngIf"],["noRecord",""],[3,"value"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],[3,"message"],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],["class","text-right",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[2,"text-align","center","font-weight","bold"],[3,"ngClass"],[1,"text-white",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Lc(2,"Details report"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"div",4),l.Qb(7,"ng-multiselect-dropdown",5),l.bc("ngModelChange",function(e){return t.loadServiceNameDropdown(e)})("ngModelChange",function(e){return t.selectedList=e}),l.Pb(),l.Pb(),l.Pb(),l.Qb(8,"div",6),l.Qb(9,"div",4),l.Qb(10,"ng-multiselect-dropdown",7),l.bc("ngModelChange",function(e){return t.selectedServiceNameList=e})("ngModelChange",function(){return t.onServiceChange()}),l.Pb(),l.Pb(),l.Pb(),l.Qb(11,"div",8),l.Qb(12,"div",9),l.Qb(13,"label",10),l.Lc(14,"Type"),l.Pb(),l.Qb(15,"select",11),l.bc("change",function(e){return t.getUserListByRole(e.target.value)}),l.Qb(16,"option",12),l.Lc(17," Select Type"),l.Pb(),l.Jc(18,ot,2,2,"option",13),l.Pb(),l.Pb(),l.Pb(),l.Qb(19,"div",8),l.Qb(20,"div",9),l.Qb(21,"label",14),l.Lc(22,"User"),l.Pb(),l.Qb(23,"select",15),l.bc("change",function(e){return t.onCounterChange(e.target.value)}),l.Qb(24,"option",12),l.Lc(25," Select User"),l.Pb(),l.Jc(26,at,2,3,"option",13),l.Pb(),l.Pb(),l.Pb(),l.Qb(27,"div",8),l.Qb(28,"div",9),l.Qb(29,"label",16),l.Lc(30,"Date Range"),l.Pb(),l.Qb(31,"input",17),l.bc("selected",function(e){return t.selectedDate(e)}),l.Pb(),l.Pb(),l.Pb(),l.Qb(32,"div",8),l.Qb(33,"label",18),l.Lc(34,"Report Type"),l.Pb(),l.Qb(35,"div",4),l.Qb(36,"select",19),l.bc("ngModelChange",function(e){return t.reportType=e})("change",function(){return t.clear()}),l.Qb(37,"option",20),l.Lc(38," By Sells Date"),l.Pb(),l.Qb(39,"option",21),l.Lc(40),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(41,"div",8),l.Qb(42,"label",18),l.Lc(43,"Status"),l.Pb(),l.Qb(44,"div",4),l.Qb(45,"select",22),l.bc("ngModelChange",function(e){return t.filterBookingStatus=e})("change",function(){return t.onServiceChange()}),l.Qb(46,"option",23),l.Lc(47," Sold"),l.Pb(),l.Qb(48,"option",24),l.Lc(49," Reserved"),l.Pb(),l.Qb(50,"option",25),l.Lc(51," Canceled"),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Jc(52,rt,3,0,"div",26),l.Qb(53,"div",27),l.Qb(54,"button",28),l.bc("click",function(){return t.onPrint()}),l.Mb(55,"i",29),l.Lc(56," Print "),l.Pb(),l.Pb(),l.Pb(),l.Qb(57,"div",30),l.Qb(58,"div",31),l.Jc(59,st,2,1,"div",32),l.Jc(60,Ot,53,21,"div",33),l.Jc(61,wt,15,5,"div",34),l.Jc(62,At,3,0,"ng-template",null,35,l.Kc),l.Pb(),l.Pb(),l.Pb()),2&e){var n=l.xc(63);l.zb(7),l.mc("placeholder","Select Service Type")("settings",t.dropdownSettings)("data",t.dropdownData)("ngModel",t.selectedList),l.zb(3),l.mc("placeholder","Select Service Name")("settings",t.dropdownSettings)("data",t.dropdownServiceNameData)("ngModel",t.selectedServiceNameList),l.zb(8),l.mc("ngForOf",t.roles),l.zb(8),l.mc("ngForOf",t.userList),l.zb(5),l.mc("options",t.options),l.zb(5),l.mc("ngModel",t.reportType),l.zb(4),l.Nc(" By ",t.checkinText," Date"),l.zb(5),l.mc("ngModel",t.filterBookingStatus),l.zb(7),l.mc("ngIf",null!=t.counter),l.zb(7),l.mc("ngIf",t.loading),l.zb(1),l.mc("ngIf",(null==t.savedList?null:t.savedList.length)>0&&!t.loading)("ngIfElse",n),l.zb(1),l.mc("ngIf",(null==t.savedList?null:t.savedList.length)>0)}},directives:[h.a,d.n,d.q,d.r,d.x,u.o,Fe.b,d.v,u.p,p.a,u.n],pipes:[u.f,u.j],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),e}(),xt=n("KZX/");function Et(e,t){1&e&&(l.Qb(0,"div",17),l.Mb(1,"loading"),l.Pb())}function Ft(e,t){if(1&e&&(l.Qb(0,"tr"),l.Qb(1,"td"),l.Lc(2),l.Pb(),l.Qb(3,"td"),l.Lc(4),l.Pb(),l.Qb(5,"td"),l.Lc(6),l.Pb(),l.Qb(7,"td",21),l.Lc(8),l.Pb(),l.Pb()),2&e){var n=t.$implicit,i=t.index;l.zb(2),l.Mc(i+1),l.zb(2),l.Mc(null==n?null:n.date),l.zb(2),l.Nc(" ",n.hotelName," "),l.zb(2),l.Mc(n.totalNumberOfRooms)}}function _t(e,t){if(1&e&&(l.Qb(0,"div",18),l.Qb(1,"table",19),l.Qb(2,"thead"),l.Qb(3,"tr"),l.Qb(4,"th"),l.Lc(5,"Sl."),l.Pb(),l.Qb(6,"th"),l.Lc(7,"Date"),l.Pb(),l.Qb(8,"th"),l.Lc(9,"Hotel Name"),l.Pb(),l.Qb(10,"th"),l.Lc(11,"Numbers"),l.Pb(),l.Pb(),l.Pb(),l.Qb(12,"tbody"),l.Jc(13,Ft,9,4,"tr",20),l.Qb(14,"tr"),l.Mb(15,"td"),l.Mb(16,"td"),l.Qb(17,"td",21),l.Lc(18,"Total"),l.Pb(),l.Qb(19,"td",21),l.Lc(20),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e){var n=l.ec();l.zb(13),l.mc("ngForOf",n.serviceAdminBookingReportList),l.zb(7),l.Mc(n.getSum("totalNumberOfRooms"))}}var Bt=[{path:"booking-report",component:xe},{path:"booking-range-report",component:je},{path:"due-not-collected-range-report",component:function(){function e(e,t,n,i){this.reportService=e,this.utilService=t,this.toastrService=n,this.restDataService=i,this.reportList=[],this.serviceAdminBookingReportList=[],this.daterange={},this.loading=!1,this.selectedList=[],this.dropdownServiceNameData=[],this.selectedServiceNameList=[],this.filterServiceName="All"}return e.prototype.ngOnInit=function(){this.dropdownSettings={singleSelection:!0,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.setDateRanges(),this.loadServiceNameDropdown()},e.prototype.loadServiceNameDropdown=function(){var e=this;this.restDataService.sendAuthenticateGetRequestObserver("api/v1/admin/reports/service-dropdown/Hotel",null).subscribe(function(t){e.responseModel=t,e.serviceNames=e.responseModel.content;for(var n=[],i=0;i<e.serviceNames.length;i++)n.push({id:e.serviceNames[i].id,name:e.serviceNames[i].serviceName});e.dropdownServiceNameData=n})},e.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10),(new Date).setDate(this.daterange.checkinDate.getDate()-90),(new Date).setDate(this.daterange.checkinDate.getDate()+2),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},e.prototype.selectedDate=function(e){this.daterange.checkinDate=e.start._d,this.daterange.checkoutDate=e.end._d,this.daterange.label=e.label},e.prototype.filterReportDataByServiceName=function(e){if(null!=e&&e.length>0)switch(this.filterServiceName=e[0].name,e[0].name){case"All":this.serviceAdminBookingReportList=this.reportList;break;default:this.serviceAdminBookingReportList=this.reportList.filter(function(t){return t.hotelName===e[0].name})}},e.prototype.getSum=function(e){for(var t=0,n=0;n<this.serviceAdminBookingReportList.length;n++)t+=this.serviceAdminBookingReportList[n][e];return t},e.prototype.getNotCollectedReport=function(e,t,n){var i=this;this.loading=!0,this.serviceAdminBookingReportList=[],this.reportList=[],this.reportService.getDueNotCollectedReportRange(this.utilService.getDateString(e),this.utilService.getDateString(t),n).subscribe(function(e){i.reportList=e,i.serviceAdminBookingReportList=e,i.loading=!1})},e.prototype.onSearch=function(){var e=null;null!==this.selectedServiceNameList&&this.selectedServiceNameList.length>0&&(e=this.selectedServiceNameList[0].id),null!==e?this.getNotCollectedReport(this.daterange.checkinDate,this.daterange.checkoutDate,e):this.toastrService.error("Error","Please service name first")},e.\u0275fac=function(t){return new(t||e)(l.Lb(o.a),l.Lb(a.a),l.Lb(Ee.b),l.Lb(r.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-not-collected-due-range-report"]],decls:20,vars:7,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-sm-2","p-0",2,"margin-left","5px!important"],[1,"input-group","mb-2"],["id","serviceName","name","serviceName",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",2,"margin-bottom","100px","margin-left","20px",3,"click"],[1,"row","mb-5"],["class","col text-center",4,"ngIf"],["class","col",4,"ngIf"],[1,"col","text-center"],[1,"col"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"text-right"]],template:function(e,t){1&e&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Lc(2,"Due Not Collected Report"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"div",4),l.Qb(7,"div",5),l.Qb(8,"div",6),l.Mb(9,"i",7),l.Pb(),l.Pb(),l.Qb(10,"input",8),l.bc("selected",function(e){return t.selectedDate(e)}),l.Pb(),l.Pb(),l.Pb(),l.Qb(11,"div",9),l.Qb(12,"div",10),l.Qb(13,"ng-multiselect-dropdown",11),l.bc("ngModelChange",function(e){return t.selectedServiceNameList=e})("ngModelChange",function(e){return t.filterReportDataByServiceName(e)}),l.Pb(),l.Pb(),l.Pb(),l.Qb(14,"div",12),l.Qb(15,"button",13),l.bc("click",function(){return t.onSearch()}),l.Lc(16,"Search"),l.Pb(),l.Pb(),l.Pb(),l.Qb(17,"div",14),l.Jc(18,Et,2,0,"div",15),l.Jc(19,_t,21,2,"div",16),l.Pb(),l.Pb()),2&e&&(l.zb(10),l.mc("options",t.options),l.zb(3),l.mc("placeholder","Select Service Name")("settings",t.dropdownSettings)("data",t.dropdownServiceNameData)("ngModel",t.selectedServiceNameList),l.zb(5),l.mc("ngIf",t.loading),l.zb(1),l.mc("ngIf",!t.loading))},directives:[Fe.b,h.a,d.n,d.q,u.p,p.a,u.o],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),e}()},{path:"counter-report",component:Jt},{path:"ticket-sale-report",component:et}],Ht=function(){function e(){}return e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({factory:function(t){return new(t||e)},imports:[[c.a,xt.a,i.d.forChild(Bt),h.b]]}),e}()}}]);